---
ver: rpa2
title: Fair Reciprocal Recommendation in Matching Markets
arxiv_id: '2409.00720'
source_url: https://arxiv.org/abs/2409.00720
tags:
- recommendation
- agent
- agents
- fairness
- users
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper studies fairness in reciprocal recommender systems for
  two-sided matching markets, such as online dating platforms. It identifies a trade-off
  between maximizing matches and ensuring fairness of recommendation opportunities.
---

# Fair Reciprocal Recommendation in Matching Markets

## Quick Facts
- **arXiv ID**: 2409.00720
- **Source URL**: https://arxiv.org/abs/2409.00720
- **Reference count**: 40
- **Primary result**: Alternating Nash Social Welfare maximization via Frank-Wolfe achieves approximately envy-free recommendations while maintaining competitive match rates

## Executive Summary
This paper addresses fairness in reciprocal recommender systems for two-sided matching markets, such as online dating platforms. It identifies a fundamental trade-off between maximizing matches and ensuring fairness of recommendation opportunities. The authors introduce envy-freeness from fair division theory as a fairness criterion and demonstrate that maximizing social welfare can lead to significant unfairness. They propose an alternating Nash Social Welfare (NSW) maximization method via the Frank-Wolfe algorithm that achieves approximately envy-free recommendations while maintaining competitive match rates. Experiments on synthetic and real-world data demonstrate that the NSW method achieves near-zero envy while producing match counts close to or better than existing methods.

## Method Summary
The proposed method optimizes recommendation policies for two-sided matching markets by alternating between maximizing left-side and right-side Nash Social Welfare functions. The algorithm uses the Frank-Wolfe method to handle the doubly stochastic matrix constraints that represent probabilistic recommendation rankings. The NSW objective balances fairness (through product of utilities) with efficiency (maintaining high match quality). The method operates on preference probability matrices estimated from data and iteratively refines recommendation policies to achieve near-envy-free allocations while maintaining competitive match rates.

## Key Results
- Maximizing social welfare leads to significant unfairness in recommendation opportunities
- Alternating Nash Social Welfare maximization achieves near-zero envy
- NSW method maintains match rates close to or better than pure match maximization
- The method works effectively on both synthetic and real-world datasets

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Alternating Nash Social Welfare (NSW) maximization via Frank-Wolfe achieves approximately envy-free recommendations while maintaining competitive match rates.
- Mechanism: The NSW function maximizes the product of utilities across agents, naturally balancing the distribution of recommendation opportunities. By alternating optimization between left-side and right-side NSW functions, the method ensures that recommendations are fair to both sides of the market while still being socially beneficial.
- Core assumption: When preference probabilities satisfy a similarity condition (ğœ€-similarity), maximizing NSW functions for both sides simultaneously leads to approximately double envy-free allocations.
- Evidence anchors:
  - [abstract] "They propose an alternating Nash Social Welfare (NSW) maximization method via the Frank-Wolfe algorithm to achieve approximately envy-free recommendations while maintaining competitive match rates."
  - [section 4] "Theorem 4.1... implies that if two sets of recommendations simultaneously satisfy NSW-best under a certain condition, then the policy is approximately double envy-free."
- Break condition: The approximation guarantee fails when preference similarity assumption is violated or when the algorithm fails to converge to the NSW-optimal solution.

### Mechanism 2
- Claim: Maximizing social welfare (expected matches) can lead to significant unfairness in recommendation opportunities.
- Mechanism: When algorithms focus solely on maximizing total matches, they tend to concentrate recommendation opportunities on popular users, creating envy among less popular users who receive fewer opportunities.
- Core assumption: Popularity differences among users exist and affect the optimization landscape such that pure match maximization creates inequitable opportunity distributions.
- Evidence anchors:
  - [abstract] "The recommendations that approximately maximize the expected number of matches, empirically obtained by heuristic algorithms, are likely to result in significant unfairness of opportunity."
  - [section 2.2, example 2.2] Demonstrates a concrete case where socially optimal policy is not double envy-free.
- Break condition: When all users have identical preferences and popularity, pure match maximization would be fair.

### Mechanism 3
- Claim: The NSW maximization method achieves near-zero envy while producing match counts close to or better than existing methods.
- Mechanism: By optimizing the product of utilities rather than sum, NSW naturally balances the distribution of recommendation opportunities while maintaining high overall match quality. The alternating optimization ensures both sides receive fair treatment.
- Core assumption: The NSW function's concavity properties enable effective optimization via Frank-Wolfe algorithm, and the resulting policies provide good approximation to envy-free allocations.
- Evidence anchors:
  - [abstract] "Experiments on synthetic and real-world data demonstrate that the NSW method achieves near-zero envy while producing match counts close to or better than existing methods."
  - [section 5.1.4] "NSW method achieves almost zero envies for all cases, while it achieves competitive level of expected matches with SW or others for most cases."
- Break condition: When the preference similarity assumption is strongly violated or when computational limitations prevent finding good NSW solutions.

## Foundational Learning

- Concept: Two-sided matching markets with reciprocal preferences
  - Why needed here: The entire problem formulation and fairness definitions are specific to reciprocal recommendation settings where both sides must express interest for a match to occur.
  - Quick check question: What distinguishes a two-sided matching market from a conventional one-sided recommender system?

- Concept: Envy-freeness from fair division theory
  - Why needed here: Envy-freeness is the core fairness criterion used to evaluate recommendation policies, requiring understanding of how to measure when one agent prefers another's allocation over their own.
  - Quick check question: How do we define when agent ğ‘ğ‘– envies agent ğ‘ğ‘–â€² in terms of recommendation opportunities?

- Concept: Nash Social Welfare (NSW) as a fairness-efficiency tradeoff metric
  - Why needed here: NSW is the key optimization objective that balances fairness (through product of utilities) with efficiency (maintaining high match counts), and understanding its properties is crucial for implementing the proposed method.
  - Quick check question: Why does maximizing the product of utilities tend to produce more balanced allocations than maximizing the sum?

## Architecture Onboarding

- Component map: Preference probability matrices -> Doubly stochastic recommendation matrices -> Expected match probabilities -> Alternating NSW maximization -> Envy-freeness evaluation

- Critical path:
  1. Initialize random doubly stochastic recommendation matrices
  2. Alternate between optimizing left-side and right-side NSW functions
  3. Use Frank-Wolfe to handle the doubly stochastic matrix constraints
  4. Check convergence and compute final recommendations
  5. Evaluate fairness and match rate performance

- Design tradeoffs:
  - Fairness vs. match rate: Pure social welfare maximization achieves highest matches but creates unfairness; NSW balances both
  - Computational complexity: NSW optimization is more expensive than simple heuristics but provides better fairness guarantees
  - Scalability: Frank-Wolfe algorithm scales with ğ‘›Â²ğ‘š + ğ‘›ğ‘šÂ² variables, limiting application to very large markets

- Failure signatures:
  - Non-convergence of alternating optimization (may indicate poor initialization or ill-conditioned preference matrices)
  - High envy values persisting after optimization (suggests preference similarity assumption is violated)
  - Match rates significantly below heuristic methods (indicates optimization getting stuck in poor local optima)

- First 3 experiments:
  1. Verify envy-freeness: Run the NSW method on a small synthetic dataset with known preference patterns and check that envy counts are near zero
  2. Compare match rates: Test the NSW method against social welfare maximization on the same dataset and measure the trade-off in match rates
  3. Stress test scalability: Run the algorithm on increasingly large synthetic datasets to identify the point where computation time becomes prohibitive

## Open Questions the Paper Calls Out

The paper does not explicitly call out open questions in the text provided.

## Limitations
- The ğœ€-similarity assumption for preference probabilities may not hold in real-world scenarios with diverse user preferences
- Frank-Wolfe algorithm may converge to local optima rather than global solutions, affecting approximation guarantees
- Computational complexity limits scalability to very large matching markets

## Confidence
- **High confidence**: The existence of trade-off between match maximization and fairness, and the general framework of alternating NSW maximization
- **Medium confidence**: The approximation guarantees under ğœ€-similarity assumption, as this relies on specific mathematical conditions
- **Medium confidence**: Empirical results showing near-zero envy and competitive match rates, as these depend on implementation details and data characteristics

## Next Checks
1. **Stress test preference similarity**: Systematically vary the ğœ€ parameter in synthetic data to determine when the approximation guarantee breaks down, measuring both envy and match rate performance across the spectrum.

2. **Compare against alternative fairness metrics**: Evaluate the NSW method using additional fairness criteria beyond envy-freeness (such as Rawlsian fairness or diversity metrics) to assess whether the method remains competitive under different definitions of fairness.

3. **Analyze real-world preference distributions**: Apply the ğœ€-similarity analysis to actual user preference data from online dating platforms to determine how realistic the assumption is in practice and what impact violations have on performance.