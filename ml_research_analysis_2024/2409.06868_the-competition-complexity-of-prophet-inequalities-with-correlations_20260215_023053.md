---
ver: rpa2
title: The Competition Complexity of Prophet Inequalities with Correlations
arxiv_id: '2409.06868'
source_url: https://arxiv.org/abs/2409.06868
tags:
- algorithm
- value
- prophet
- inequality
- rewards
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper studies the competition complexity of prophet inequalities
  when rewards are correlated. The authors show that unlike the independent case,
  the required number of additional rewards depends on the original number of rewards,
  and that block-threshold algorithms (optimal in the independent case) may require
  infinitely many additional rewards with correlations.
---

# The Competition Complexity of Prophet Inequalities with Correlations

## Quick Facts
- arXiv ID: 2409.06868
- Source URL: https://arxiv.org/abs/2409.06868
- Reference count: 7
- This paper shows that unlike the independent case, the competition complexity of prophet inequalities with correlated rewards depends linearly on the number of original rewards.

## Executive Summary
This paper studies prophet inequalities with correlated rewards, where the goal is to select a single reward to maximize expected value when rewards are revealed sequentially. Unlike the independent case where O(log(1/ε)) additional copies suffice for (1-ε) approximation, the authors prove that correlation fundamentally changes the landscape. They show that the number of additional copies must depend linearly on the original number of rewards n, that block-threshold algorithms (optimal for independent rewards) may require infinitely many additional copies with correlations, and develop asymptotically optimal algorithms for three scenarios: block arrival model, adversarial arrival model, and pairwise independence.

## Method Summary
The authors develop a two-phase algorithm for the block arrival model that first applies an Online Contention Resolution Scheme (OCRS) with selectability factor 1/n for values above the (1-1/n)-quantile over n+1 rounds, then switches to doubly exponential quantile thresholds for values below this threshold. For the adversarial arrival model, they identify the optimal reward type with highest surplus revenue and apply a threshold algorithm across all k copies. For pairwise independence, they use a simpler algorithm with constant quantile thresholds in the first phase followed by doubly exponential thresholds in the second phase.

## Key Results
- The competition complexity for correlated rewards is Θ(n + log log(1/ε)) for the block arrival model, matching lower and upper bounds
- Block-threshold algorithms require infinite competition complexity even for n=2 rewards with correlations
- For the adversarial arrival model, the competition complexity is Θ(n/ε)
- For pairwise independence, a simpler algorithm achieves O(log log(1/ε)) competition complexity

## Why This Works (Mechanism)

### Mechanism 1
- Claim: The competition complexity depends linearly on the number of rewards n due to correlation structure.
- Mechanism: The authors construct an instance where each reward i has value 1/δⁱ with probability δⁱ (δ = ε/n), and rewards are correlated such that reward i can only be non-zero if all previous rewards are non-zero. This creates a cascading dependency where the expected maximum value is n - ε + ε/n, but no online algorithm can achieve more than 1 on a single copy.
- Core assumption: The correlation structure forces rewards to appear sequentially, preventing algorithms from leveraging multiple high-value rewards appearing together.
- Evidence anchors:
  - [abstract] "Our results demonstrate that, unlike in the independent case, the required number of additional rewards for approximation depends on the number of original rewards"
  - [section] "Proof. Let δ = ε/n. Consider an instance with n rewards, where reward i = 1,..., n is equal to 1/δⁱ with probability δⁱ and 0 otherwise. The correlation is such that vi can only be non-zero if all previous rewards are realized to be non-zero."
- Break condition: If the correlation structure allows multiple high-value rewards to appear simultaneously, the linear dependence on n may not hold.

### Mechanism 2
- Claim: Block-threshold algorithms require infinite competition complexity with correlations even for n=2.
- Mechanism: The authors construct a hard instance with two correlated random variables where v₁ = ξ·min(X,ξ) and v₂ = ξ·min(X,ξ)+1, where X follows a geometric distribution. Any threshold set by the decision-maker would almost surely select the first variable (if selecting any) leading to a low expectation, preventing finite competition complexity.
- Core assumption: The geometric distribution creates a heavy-tailed structure where thresholds cannot effectively distinguish between the two correlated values.
- Evidence anchors:
  - [abstract] "that block-threshold algorithms, which are optimal in the independent case, may require an infinite number of additional rewards when correlations are present"
  - [section] "Proposition 6.3. For every ε < 1 and M > 0 there is an instance of correlated prophet inequality with n = 2 rewards for which for every block threshold algorithm, the (1 - ε)-competition complexity is at least M."
- Break condition: If the correlation structure changes such that thresholds can effectively distinguish between correlated values, finite competition complexity might be achievable.

### Mechanism 3
- Claim: The algorithm achieves O(n + log log(1/ε)) competition complexity by partitioning values into upper and lower quantiles.
- Mechanism: The algorithm uses two phases: Phase 1 applies an OCRS (Online Contention Resolution Scheme) for values above the (1-1/n)-quantile, requiring O(n) rounds to cover this contribution. Phase 2 uses doubly exponentially decreasing quantile thresholds to cover values below the (1-1/n)-quantile up to the ε-quantile, requiring O(log log(1/ε)) rounds.
- Core assumption: The OCRS approach with selectability factor 1/n works for correlated values, and the quantile thresholding approach can efficiently cover the remaining value distribution.
- Evidence anchors:
  - [abstract] "We develop asymptotically optimal algorithms for the following three scenarios: (1) where rewards arrive in blocks corresponding to the different copies of the original instance"
  - [section] "Our algorithm has two phases consisting of m1, m2 rounds respectively. The first phase of the algorithm is implemented in Algorithm 1. Algorithm 1 applies the same procedure for all of them1 rounds it runs. In each such round, it applies an OCRS for one copy of the correlated prophet inequality instance with a selectability factor of 1/n."
- Break condition: If the correlation structure makes the OCRS approach ineffective or the quantile thresholding cannot cover the distribution efficiently, the complexity bound may not hold.

## Foundational Learning

- Concept: Online Contention Resolution Schemes (OCRS)
  - Why needed here: OCRS is used in Phase 1 to handle the selection problem for values above the (1-1/n)-quantile, where the algorithm needs to select rewards with probability proportional to their chance of being the maximum.
  - Quick check question: What is the selectability factor used in the OCRS for the correlated case, and how does it compare to the independent case?

- Concept: Stochastic domination up to ε-quantile
  - Why needed here: The algorithm's performance is measured by whether it stochastically dominates the prophet's distribution up to the ε-quantile, which is the key requirement for achieving the (1-ε)-competition complexity.
  - Quick check question: What is the difference between (1-ε)-stochastic domination and stochastic domination up to ε-quantile?

- Concept: Pairwise independence
  - Why needed here: The paper considers a pairwise independence scenario as a generalization of the independent case, showing that simpler algorithms can achieve optimal complexity in this setting.
  - Quick check question: How does pairwise independence differ from full independence in terms of the algorithm's approach and complexity?

## Architecture Onboarding

- Component map:
  - Algorithm 3 (main algorithm): Coordinates two phases
  - Algorithm 1 (Phase 1): OCRS-based selection for upper quantile values
  - Algorithm 2 (Phase 2): Quantile thresholding for lower quantile values
  - Lemma 5.1: Caragiannis et al. result for pairwise independence
  - Proposition 6.1: Lower bound showing linear dependence on n
  - Proposition 6.2: Lower bound showing logarithmic dependence on 1/ε

- Critical path:
  1. Set initial threshold T₀ as (1-1/n)-quantile
  2. Run Phase 1 for n+1 rounds using OCRS approach
  3. If no value selected, run Phase 2 for O(log log(1/ε)) rounds
  4. Use quantile thresholds that decrease doubly exponentially

- Design tradeoffs:
  - Using OCRS in Phase 1 provides good coverage of upper values but requires O(n) rounds
  - Quantile thresholding in Phase 2 is more efficient but only works after upper values are covered
  - The two-phase approach balances efficiency and coverage but requires careful threshold selection

- Failure signatures:
  - If the OCRS doesn't achieve the expected selectability factor of 1/n, Phase 1 will fail to cover upper values
  - If quantile thresholds are not set correctly in Phase 2, the algorithm may miss significant portions of the value distribution
  - If the correlation structure violates the assumptions, both phases may perform poorly

- First 3 experiments:
  1. Test Algorithm 3 on the hard instance from Proposition 6.1 to verify it achieves the linear dependence on n
  2. Test Algorithm 3 on instances with different correlation structures to see how performance varies
  3. Compare Algorithm 3 with a simple threshold algorithm on the pairwise independence case to verify the improvement

## Open Questions the Paper Calls Out

### Open Question 1
- Question: What is the optimal competition complexity for the adversarial arrival model when rewards are pairwise independent rather than fully correlated?
- Basis in paper: [explicit] The paper establishes a Θ(n/ε) competition complexity for the adversarial arrival model with fully correlated rewards, but only mentions pairwise independence as a generalization that "leads to a simple algorithm (and analysis) with optimal asymptotic competition complexity."
- Why unresolved: The paper does not provide the exact competition complexity for the pairwise independence case under adversarial arrival, only mentioning it as a generalization of the block arrival model result.
- What evidence would resolve it: A formal proof establishing the competition complexity bound for the pairwise independent case under adversarial arrival, either matching the O(log log(1/ε)) result from the block arrival model or showing a different dependence on n.

### Open Question 2
- Question: Can the dependence on n in the competition complexity for the block arrival model be reduced when rewards have negative correlations rather than positive correlations?
- Basis in paper: [inferred] The paper focuses on general correlations but references prior work on negative correlations by Rinott and Samuel-Cahn (1991, 1992, 1987) that showed prophet inequality guarantees continue to hold under negative correlations.
- Why unresolved: The paper does not analyze the competition complexity under negative correlations, which could potentially allow for better approximation guarantees than the Θ(n + log log(1/ε)) bound for general correlations.
- What evidence would resolve it: An algorithm and analysis showing improved competition complexity bounds for negative correlation structures, or a lower bound proving that negative correlations still require the same dependence on n.

### Open Question 3
- Question: What is the exact constant in the competition complexity for the block arrival model when aiming to approximately stochastically dominate the prophet?
- Basis in paper: [explicit] The authors state their result "achieves tightness in the leading coefficient constants when aiming to approximately stochastically dominate the prophet" and provide the bound as (1 + o(1)) · (n + log log(1/ε)).
- Why unresolved: The paper provides only asymptotic tightness and does not determine the exact constant factor in the leading term.
- What evidence would resolve it: A complete characterization of the exact constant in the competition complexity expression, either through matching upper and lower bounds or by proving a specific constant achieves the optimal performance.

## Limitations

- The algorithms require precise knowledge of the value distributions and their correlation structure, which may not be available in practice
- The theoretical bounds are asymptotic and provide limited insight into the practical performance on real-world instances
- The hard instances used to prove lower bounds may be highly artificial and not representative of natural correlation patterns

## Confidence

**Competition Complexity Bounds (High Confidence)**: The lower bound proofs for linear dependence on n and logarithmic dependence on 1/ε are well-constructed and the upper bound matching these for the block arrival model is rigorous.

**Block-Threshold Algorithm Impossibility (Medium Confidence)**: The proof that block-threshold algorithms require infinite competition complexity is theoretically sound, but the constructed instance may be highly artificial and not representative of practical correlation structures.

**Algorithm Performance (Medium Confidence)**: The two-phase algorithm achieving O(n + log log(1/ε)) complexity is well-analyzed, but the practical effectiveness depends on accurate implementation of OCRS and quantile calculations.

## Next Checks

**Validation Check 1**: Implement the algorithm on synthetic instances with various correlation structures (beyond the worst-case constructions) to empirically verify that the O(n + log log(1/ε)) bound holds across different correlation patterns and that the algorithm performs reasonably well even when the correlation structure doesn't match the worst-case assumptions.

**Validation Check 2**: Conduct experiments comparing the proposed algorithms with simple threshold-based approaches on instances with pairwise independence to verify the claimed improvements and understand when the more complex algorithms provide practical benefits over simpler methods.

**Validation Check 3**: Test the algorithm's robustness to distributional uncertainty by running experiments where the decision-maker has only partial knowledge of the correlation structure or value distributions, and measure how performance degrades as information becomes more limited.