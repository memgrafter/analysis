---
ver: rpa2
title: Event-based Product Carousel Recommendation with Query-Click Graph
arxiv_id: '2402.03277'
source_url: https://arxiv.org/abs/2402.03277
tags:
- product
- carousel
- recommendations
- clustering
- aspects
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the challenge of automatically recommending
  product carousels for events in e-commerce, a task traditionally done manually by
  human curators. The authors propose a novel approach using iterative clustering
  over a query-click bipartite graph to infer event-related aspects and their associated
  product types.
---

# Event-based Product Carousel Recommendation with Query-Click Graph

## Quick Facts
- arXiv ID: 2402.03277
- Source URL: https://arxiv.org/abs/2402.03277
- Authors: Luyi Ma; Nimesh Sinha; Parth Vajge; Jason HD Cho; Sushant Kumar; Kannan Achan
- Reference count: 31
- One-line primary result: Novel approach using iterative clustering over query-click bipartite graphs to infer event aspects and generate product carousels achieves high precision and diversity for Valentine's Day and Summer Water Activity events.

## Executive Summary
This paper addresses the challenge of automatically recommending product carousels for e-commerce events, a task traditionally done manually by human curators. The authors propose a novel approach using iterative clustering over a query-click bipartite graph to infer event-related aspects and their associated product types. Their method treats each cluster as a carousel and ranks product types within each cluster by click-through rate. Experiments on two types of events (Valentine's Day and Summer Water Activity) demonstrate that their approach achieves high precision (up to 71.43% for Valentine's Day) compared to baseline clustering methods like hierarchical clustering and DBSCAN. The approach also shows strong performance in terms of heterogeneity (diversity of carousels) and cohesion (relatedness of products within a carousel).

## Method Summary
The authors construct a bipartite graph between search queries and product-types based on click and impression data, then iteratively apply hierarchical clustering to group queries into aspects. Each cluster of queries is treated as an inferred aspect, and product-types associated with those queries are ranked by click-through rate to form product carousels. The method uses product-types instead of individual products to reduce sparsity and increase generality of recommendations. Two variants of iterative clustering are proposed: IC-1 (query-only clustering) and IC-2 (query and product-type clustering).

## Key Results
- The proposed method achieves high precision (up to 71.43% for Valentine's Day) compared to baseline clustering methods like hierarchical clustering and DBSCAN.
- Strong performance in terms of heterogeneity (diversity of carousels) and cohesion (relatedness of products within a carousel).
- Case studies show the model can infer meaningful and diverse aspects for events, such as "greeting cards & candies" and "stuffed toys" for Valentine's Day.

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Iterative clustering over a query-click bipartite graph can infer event-related aspects by grouping queries with similar shopping demands.
- Mechanism: The algorithm constructs a bipartite graph between search queries and product-types based on click and impression data, then iteratively applies hierarchical clustering to group queries into aspects. Each cluster of queries is treated as an inferred aspect, and product-types associated with those queries are ranked by click-through rate to form product carousels.
- Core assumption: Queries containing event-related keywords and the product-types they click on form a reliable signal for inferring the multiple aspects of an event.
- Evidence anchors:
  - [abstract] The authors state that "we apply the iterative clustering algorithm over the query-click bipartite graph and infer the event-related aspects by the clusters of queries."
  - [section] The paper describes that "We conduct the iterative clustering method over the query-click bipartite graph to group queries with similar aspects in the same cluster to mine aspects."
- Break condition: If the query-click data is too sparse or dominated by generic queries, the clustering may fail to separate distinct aspects, leading to low precision or heterogeneity.

### Mechanism 2
- Claim: Using product-types instead of individual products reduces sparsity and increases generality of recommendations.
- Mechanism: By aggregating products into types (e.g., "Chocolate Candy" instead of each individual candy product), the bipartite graph becomes denser, making it easier for clustering algorithms to detect meaningful groups of queries and associated product-types.
- Core assumption: Products within the same type are substitutional and share similar shopping demand patterns during events.
- Evidence anchors:
  - [section] The paper explains that "we consider product-type rather than the individual product in the bipartite graph" to "keep the generality of the model and also reduce the sparsity."
  - [section] It is noted that "the product-level recommendations could be easily generated by the existing recommendation techniques with products from the recommended product-types."
- Break condition: If product types are too broad or too narrow, the recommendations may become too generic or too specific, harming precision and relevance.

### Mechanism 3
- Claim: Click-through rate (CTR) ranking within each cluster produces effective product carousels for each inferred aspect.
- Mechanism: After clustering, the algorithm ranks product-types within each query cluster by their CTR, which reflects the observed preference of users who searched for queries in that cluster.
- Core assumption: CTR is a strong proxy for relevance and user preference for a given aspect during the event.
- Evidence anchors:
  - [abstract] The authors mention that "The aspect-related recommendations are powered by the click-through rate of products regarding each aspect."
  - [section] The paper states that "we rank the product in the corresponding product pool by the click-through rate in descending order as the product carousel for this aspect."
- Break condition: If CTR is dominated by popular items unrelated to the aspect or if the data is biased, the rankings may not reflect true relevance, reducing precision and cohesion.

## Foundational Learning

- Concept: Bipartite graphs and their use in recommendation systems
  - Why needed here: The entire approach relies on constructing and clustering a bipartite graph between queries and product-types to infer aspects.
  - Quick check question: Can you explain how a bipartite graph differs from a typical user-item interaction graph in recommendation systems?

- Concept: Iterative clustering and hierarchical clustering
  - Why needed here: The method uses iterative hierarchical clustering to progressively refine clusters of queries (and optionally product-types) until stable aspects emerge.
  - Quick check question: Why might iterative clustering be preferred over a single round of clustering in sparse data settings?

- Concept: Click-through rate as a relevance metric
  - Why needed here: CTR is used to rank product-types within each inferred aspect to form the final carousel recommendations.
  - Quick check question: What are the advantages and limitations of using CTR as a ranking signal compared to other metrics like conversion rate?

## Architecture Onboarding

- Component map: Data ingestion -> Graph construction -> Clustering engine -> Ranking engine -> Evaluation module -> Output
- Critical path:
  1. Filter and preprocess query-click data for the target event.
  2. Build bipartite graph with product-types.
  3. Run iterative clustering to infer aspects.
  4. Rank product-types within each aspect by CTR.
  5. Output top carousels for recommendation.

- Design tradeoffs:
  - Using product-types vs. individual products: Reduces sparsity but may lose fine-grained personalization.
  - IC-1 (query-only clustering) vs. IC-2 (query and product-type clustering): IC-1 is faster and simpler; IC-2 may yield more refined clusters but at higher computational cost.
  - Distance threshold τ: Higher τ merges more clusters (risking loss of aspect diversity), lower τ may over-segment.

- Failure signatures:
  - Low precision: Clusters contain irrelevant product-types or fail to capture event-specific aspects.
  - Low heterogeneity: All clusters recommend similar product-types, indicating poor aspect differentiation.
  - Low cohesion: Products within a carousel span unrelated categories, suggesting noisy clustering.

- First 3 experiments:
  1. Run IC-1 with τ = 0.1 on Valentine's Day data and measure precision, heterogeneity, and cohesion.
  2. Compare IC-1 vs. IC-2 performance on the same dataset to assess impact of product-type clustering.
  3. Test sensitivity to distance threshold τ by sweeping from 0.1 to 0.5 and observing changes in evaluation metrics.

## Open Questions the Paper Calls Out
The paper does not explicitly call out open questions, but the discussion section highlights some limitations and areas for future work, such as the need for more diverse event types and the impact of hyperparameter tuning on model performance.

## Limitations
- Limited evaluation on only two events (Valentine's Day and Summer Water Activity) raises questions about generalizability.
- The ground truth labeling is subjective and may not capture all possible aspects of an event.
- The approach may struggle with events lacking clear seasonal patterns or with sparse query-click data.

## Confidence
- Confidence in the core claim (iterative clustering over query-click graphs can infer event aspects): High
- Confidence in the CTR-based ranking mechanism: Medium
- Confidence in generalizability to other event types: Low

## Next Checks
1. Evaluate the model on a broader set of events (e.g., Black Friday, Christmas) to test generalizability.
2. Perform an ablation study to assess the impact of each hyperparameter (τ, α, β) on clustering quality and recommendation performance.
3. Compare the CTR-based ranking to alternative ranking methods (e.g., conversion rate, collaborative filtering) to verify the robustness of the recommendation quality.