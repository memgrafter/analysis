---
ver: rpa2
title: Quantitative Evaluation of Motif Sets in Time Series
arxiv_id: '2412.09346'
source_url: https://arxiv.org/abs/2412.09346
tags:
- motif
- motifs
- time
- series
- sets
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: The paper introduces PROM, a quantitative metric for evaluating
  Time Series Motif Discovery (TSMD) methods that overcomes limitations of existing
  metrics by providing a more comprehensive assessment of discovered motifs against
  ground truth. PROM calculates precision, recall, and F1-score by optimally matching
  discovered motif sets to ground truth motif sets, penalizing both false positives
  and false negatives.
---

# Quantitative Evaluation of Motif Sets in Time Series

## Quick Facts
- **arXiv ID:** 2412.09346
- **Source URL:** https://arxiv.org/abs/2412.09346
- **Reference count:** 18
- **Primary result:** Introduces PROM, a comprehensive metric for TSMD evaluation, and TSMD-Bench, a challenging benchmark using real time series data.

## Executive Summary
This paper addresses critical limitations in evaluating Time Series Motif Discovery (TSMD) methods by introducing PROM, a quantitative metric that provides comprehensive assessment of discovered motifs against ground truth. PROM overcomes the limitations of existing metrics by independently measuring precision and recall through optimal matching of motif sets, penalizing both false positives and false negatives. The authors also propose TSMD-Bench, a benchmark constructed from real time series classification data, which is more challenging and realistic than existing benchmarks based on random-walk data. Experiments demonstrate that PROM provides more complete evaluation than existing metrics, LoCoMotif statistically outperforms other TSMD methods with an average rank of 1.07, and TSMD-Bench offers a more realistic evaluation environment.

## Method Summary
The paper introduces PROM (Precision-Recall under Optimal Matching), a metric that calculates precision, recall, and F1-score by optimally matching discovered motif sets to ground truth motif sets. PROM works by first matching individual motifs using an overlap rate threshold, then optimally matching motif sets using the Hungarian method to maximize diagonal overlap. This creates a contingency matrix that allows separate calculation of true positives, false positives, and false negatives. The authors also construct TSMD-Bench, a benchmark dataset built from real time series classification data by concatenating instances from the same class, ensuring ground truth motifs are real patterns rather than artificially inserted ones. The benchmark is designed to be more challenging than existing synthetic benchmarks.

## Key Results
- PROM provides a more complete evaluation than existing metrics by independently measuring precision and recall of discovered motif sets
- LoCoMotif statistically outperforms other TSMD methods with an average rank of 1.07
- TSMD-Bench offers a more realistic evaluation environment, as simple methods can achieve F1-scores of 0.98 on existing random-walk based benchmarks

## Why This Works (Mechanism)

### Mechanism 1
- Claim: PROM provides a more complete evaluation by independently measuring recall and precision of discovered motif sets
- Mechanism: PROM matches individual motifs based on overlap rate, then optimally matches motif sets using the Hungarian method to maximize diagonal overlap. This creates a contingency matrix that allows separate calculation of TP, FP, and FN for precision and recall
- Core assumption: Ground truth motifs are non-overlapping, and matching threshold (0.5) appropriately distinguishes true matches from false positives
- Evidence anchors:
  - [abstract] "PROM calculates precision, recall, and F1-score by optimally matching discovered motif sets to ground truth motif sets, penalizing both false positives and false negatives"
  - [section 4] "The optimal matching between discovered motif sets and GT motif sets is obtained by permuting the columns of M so that the sum of the diagonal elements Mi,i is maximized"
- Break condition: If ground truth contains overlapping motifs, the core assumption is violated and PROM's matching logic breaks down

### Mechanism 2
- Claim: TSMD-Bench provides more challenging and realistic evaluation by using real time series classification data rather than random-walk insertion
- Mechanism: The benchmark constructs time series by concatenating instances from the same class, ensuring ground truth motifs are real patterns rather than artificially inserted ones. The interleaving structure with unique classes minimizes false target patterns
- Core assumption: Instances from the same class in classification datasets are similar in shape, making them suitable for motif discovery
- Evidence anchors:
  - [section 5.1] "Each benchmark time series is a concatenation of classification instances. The instances that belong to the same class constitute a GT motif set"
  - [corpus] "Found 25 related papers (using 8). Average neighbor FMR=0.446" - indicates related work exists but shows moderate relevance
- Break condition: If classification dataset classes are not truly similar in shape, the benchmark construction fails to create meaningful ground truth

### Mechanism 3
- Claim: The optimal matching via Hungarian method ensures the best possible correspondence between discovered and ground truth motif sets
- Mechanism: By treating motif set matching as a linear sum assignment problem, PROM finds the permutation that maximizes total overlap, avoiding greedy matching errors
- Core assumption: The optimal permutation can be computed efficiently and represents the best evaluation
- Evidence anchors:
  - [section 4.2] "This task reduces to a linear sum assignment problem and can be solved in O(max(g, d)3) time using the Hungarian method (Jonker and Volgenant 1987)"
  - [section 6.1.1] "The C value is calculated as the average over all m matches. The way π is obtained was not described in the original paper; hence, we assume that the metric uses the π that maximizes the final correctness value"
- Break condition: If motif sets are too numerous or the cost matrix is ill-conditioned, the Hungarian method may fail to find meaningful matches

## Foundational Learning

- Concept: Overlap rate (OR) as a matching criterion
  - Why needed here: OR quantifies similarity between motif segments and determines matchability
  - Quick check question: What OR threshold does PROM use to consider two motifs matchable?

- Concept: Linear sum assignment problem
  - Why needed here: Optimal matching between motif sets requires solving this optimization problem
  - Quick check question: Which algorithm does PROM use to solve the matching problem?

- Concept: Precision, recall, and F1-score definitions
  - Why needed here: These metrics quantify the quality of motif discovery in terms of false positives and false negatives
  - Quick check question: How does PROM define true positives in the context of motif sets?

## Architecture Onboarding

- Component map: PROM consists of three main components - motif matching (overlap rate calculation), motif set matching (Hungarian algorithm), and metric calculation (precision/recall/F1). TSMD-Bench has two main components - dataset construction (from classification data) and validation split generation
- Critical path: For PROM evaluation, the critical path is: calculate overlap rates → build contingency matrix → solve Hungarian assignment → compute metrics. For TSMD-Bench, it's: select classification dataset → construct time series → split validation/test → generate ground truth
- Design tradeoffs: PROM trades computational complexity (O(km + m³)) for more comprehensive evaluation. TSMD-Bench trades synthetic simplicity for realism and challenge
- Failure signatures: PROM fails when ground truth has overlaps or when motifs have vastly different lengths. TSMD-Bench fails when classification classes are not similar in shape
- First 3 experiments:
  1. Implement PROM on a simple synthetic dataset with known ground truth to verify metric calculations
  2. Apply PROM to TSMD-Bench and compare results with existing metrics to validate comprehensiveness
  3. Test the simple random-walk detection method on synthetic random-walk data to confirm benchmarks are too easy

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does PROM perform on time series with overlapping motifs or motifs that share common segments?
- Basis in paper: [inferred] The paper assumes ground truth motifs do not overlap and discusses this assumption in Section 2, but does not address scenarios with overlapping motifs
- Why unresolved: The current PROM formulation relies on non-overlapping ground truth motifs to define matchability and matching procedures
- What evidence would resolve it: Experimental results comparing PROM's performance on datasets with overlapping versus non-overlapping motifs, and analysis of how overlap affects precision, recall, and F1-score calculations

### Open Question 2
- Question: What is the impact of different OR threshold values on PROM's performance and sensitivity?
- Basis in paper: [explicit] The paper mentions that Lemma 1 holds for any OR-threshold between 0.5 and 1 and that a stricter OR-threshold can be used, but does not investigate the effects of different thresholds
- Why unresolved: The paper uses a fixed OR-threshold of 0.5 without exploring how varying this threshold affects motif matching and overall evaluation
- What evidence would resolve it: Sensitivity analysis showing PROM's performance across a range of OR-threshold values on various benchmark datasets

### Open Question 3
- Question: How does PROM handle time series with varying lengths or irregular sampling rates?
- Basis in paper: [inferred] The paper discusses fixed-length and variable-length motifs but does not explicitly address time series with irregular sampling rates or how this affects motif discovery and evaluation
- Why unresolved: The current PROM formulation assumes regular sampling and does not account for potential challenges posed by irregular time series
- What evidence would resolve it: Experimental results applying PROM to time series with irregular sampling rates and analysis of how resampling or interpolation affects evaluation outcomes

### Open Question 4
- Question: Can PROM be extended to handle multivariate time series with inter-variable-length motifs?
- Basis in paper: [explicit] The paper mentions that LoCoMotif can handle intra-variable-length motifs in multivariate time series, but does not discuss extending PROM to handle inter-variable-length motifs across different dimensions
- Why unresolved: The current PROM formulation is not explicitly designed for inter-variable-length motifs, and the paper does not explore potential extensions or modifications
- What evidence would resolve it: Development and testing of an extended PROM version that can handle inter-variable-length motifs, with experimental results on relevant benchmark datasets

## Limitations
- Implementation details of 11 TSMD methods are not provided, requiring independent implementation
- Hungarian method performance on large motif sets remains unverified with potential computational bottlenecks
- OR threshold of 0.5 is justified but may not be optimal across all datasets and motif types

## Confidence
- PROM metric design and theoretical framework: High confidence (well-defined mathematical formulation with clear proofs)
- TSMD-Bench construction methodology: Medium confidence (logical approach but requires validation on diverse datasets)
- Experimental results showing LoCoMotif superiority: Medium confidence (depends on correct implementation of all 11 methods)

## Next Checks
1. Verify the Hungarian method implementation by testing on synthetic motif sets with known optimal matchings
2. Cross-validate PROM results using a second matching criterion besides overlap rate
3. Benchmark the random-walk detection method on the new TSMD-Bench to confirm it achieves significantly lower scores than on synthetic benchmarks