---
ver: rpa2
title: 'Long-term Fairness For Real-time Decision Making: A Constrained Online Optimization
  Approach'
arxiv_id: '2401.02552'
source_url: https://arxiv.org/abs/2401.02552
tags:
- fairness
- time
- dynamic
- equation
- long-term
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the challenge of ensuring long-term fairness
  in real-time decision-making systems with time-varying fairness constraints. The
  authors propose a novel framework that formulates the decision problem as a constrained
  online optimization problem and present a novel algorithm, LoTFair, to solve it.
---

# Long-term Fairness For Real-time Decision Making: A Constrained Online Optimization Approach

## Quick Facts
- arXiv ID: 2401.02552
- Source URL: https://arxiv.org/abs/2401.02552
- Authors: Ruijie Du; Deepan Muthirayan; Pramod P. Khargonekar; Yanning Shen
- Reference count: 40
- Primary result: Novel algorithm LoTFair achieves sub-linear dynamic regret and sub-linear accumulated unfairness in real-time decision-making with time-varying fairness constraints

## Executive Summary
This paper addresses the challenge of ensuring long-term fairness in real-time decision-making systems where fairness constraints evolve over time. The authors propose a constrained online optimization framework and introduce LoTFair, an algorithm that can tolerate instantaneous fairness violations while guaranteeing convergence to fairness in the long run. The approach is demonstrated on both classification tasks using the Adult dataset and energy management problems in peer-to-peer electricity markets.

## Method Summary
The paper formulates the real-time fairness decision problem as a constrained online optimization task where both the cost functions and fairness constraints vary over time. LoTFair employs a primal-dual approach with adaptive step sizes to solve this problem. The algorithm maintains dual variables that track cumulative fairness violations and updates decisions to minimize both the immediate cost and long-term fairness violations. A key innovation is allowing instantaneous fairness violations while ensuring sub-linear accumulated unfairness over the entire time horizon.

## Key Results
- LoTFair achieves sub-linear dynamic regret and sub-linear accumulated unfairness in both synthetic and real-world experiments
- The algorithm demonstrates effectiveness on the Adult dataset for classification tasks, balancing accuracy and fairness over time
- Performance is validated on peer-to-peer electricity market scenarios using real data from California ISO

## Why This Works (Mechanism)

### Mechanism 1
- Claim: LoTFair can allow instantaneous fairness violations while guaranteeing long-term fairness convergence.
- Mechanism: The algorithm uses dual variables to track cumulative fairness violations across time slots. By updating Lagrange multipliers based on the current fairness imbalance, it adapts decisions to steer the cumulative violation toward zero over the horizon.
- Core assumption: The time-varying fairness constraints have bounded variations and satisfy the interior point condition in Assumption 4.
- Evidence anchors:
  - [abstract]: "LoTFair achieves sub-linear dynamic regret and sub-linear accumulated unfairness, allowing for instantaneous fairness violations while ensuring fairness in the long run."
  - [section III]: "Equation 8 tries to minimize the fair constraint violation by taking a modified descent step."
  - [corpus]: Weak evidence; only related papers discuss constrained online optimization but not specifically long-term fairness adaptation mechanisms.
- Break condition: If fairness constraints vary too rapidly (beyond V(g)), the dual updates cannot track the constraint trajectory and the long-term guarantee fails.

### Mechanism 2
- Claim: The dynamic regret bound depends on the variation of optimal decision trajectories and fairness constraints.
- Mechanism: By bounding the regret in terms of V({x∗t}T t=1) and V({gt}T t=1), the algorithm can adapt its step sizes to the problem's temporal variability, ensuring sub-linear regret even when the optimal decisions change over time.
- Core assumption: The problem satisfies Assumptions 1-5, especially convexity of ft(x) and gt(x).
- Evidence anchors:
  - [section V.B]: "The dynamic regret RT is bounded by the primal stepsize, dual stepsize and accumulated variations of instantaneous minimizers V({x∗t}T t=1) and time-varying constraints V({gt}T t=1)."
  - [abstract]: "We prove that LoTFair can make overall fairness violations negligible while maintaining the performance over the long run."
  - [corpus]: Weak evidence; no direct proof of regret bounds for long-term fairness in related works.
- Break condition: If the optimal decision trajectory varies faster than O(T1/3), sub-linear regret cannot be guaranteed with fixed step sizes.

### Mechanism 3
- Claim: The algorithm maintains feasibility by enforcing a relaxed instantaneous constraint gκt(xt) ≤ τ during certain time slots.
- Mechanism: When the strict long-term constraint would make the problem infeasible, the algorithm falls back to a relaxed instantaneous constraint, ensuring that decisions remain implementable while still pursuing the long-term fairness goal.
- Core assumption: The relaxed constraint is sufficiently loose to guarantee feasibility in all time slots.
- Evidence anchors:
  - [section II]: "The relaxed instantaneous constraint, gκt(xt) ≤ 0, bounds the learner to make the violation caused by the decision within an acceptable range, controlled by κ."
  - [section VI.B]: "To address this issue, we further relax the gκt(x) ≤ 0 to gκt(x) ≤ τ, as (13h)."
  - [corpus]: No direct evidence; related papers mention constrained optimization but not this specific relaxation strategy.
- Break condition: If τ is chosen too small relative to the problem dynamics, the algorithm may still encounter infeasibility and fail to produce valid decisions.

## Foundational Learning

- Concept: Online convex optimization with time-varying constraints
  - Why needed here: The decision problem must be solved in real-time as the fairness constraints and cost functions evolve, requiring methods that handle non-stationary environments.
  - Quick check question: What are the necessary assumptions to ensure that online gradient descent with time-varying constraints achieves sub-linear regret?

- Concept: Duality and Lagrange multiplier updates
  - Why needed here: The algorithm relies on dual variable updates to penalize fairness violations and steer the cumulative fairness toward zero over the horizon.
  - Quick check question: How does the dual update rule in equations (9) and (10) ensure that the cumulative fairness violation is bounded?

- Concept: Dynamic regret and its relationship to problem variation
  - Why needed here: The performance metric must account for the fact that the optimal decision changes over time, so static regret is insufficient.
  - Quick check question: Why does the dynamic regret bound include terms like V({x∗t}T t=1) and V({gt}T t=1)?

## Architecture Onboarding

- Component map: Receive data -> Primal update -> Dual update -> Feasibility check -> Performance monitoring
- Critical path:
  1. Receive current cost ft(xt) and fairness constraint gt(xt)
  2. Update dual variables λ1,t+1 and λ2,t+1
  3. Compute new decision xt using equation 8
  4. Check feasibility; apply relaxed constraint if necessary
  5. Log performance metrics
- Design tradeoffs:
  - Larger dual step size μ improves fairness convergence but may destabilize primal updates
  - Fixed step sizes are simpler but may not adapt to varying problem dynamics
  - Relaxing the instantaneous constraint improves feasibility but may increase fairness violations
- Failure signatures:
  - Increasing cumulative fairness violation despite dual updates → constraint variation too fast or step size too small
  - Primal iterates diverging → step size α too large or dual updates too aggressive
  - Algorithm frequently falling back to relaxed constraint → original constraint set too restrictive or problem infeasible
- First 3 experiments:
  1. Synthetic 1D problem with known time-varying fairness constraints; verify that cumulative violation → 0 and regret → 0
  2. Binary classification on Adult dataset; measure trade-off between accuracy and fairness over time
  3. P2P electricity market simulation with synthetic demand/supply; test feasibility and fairness under varying network conditions

## Open Questions the Paper Calls Out

The paper does not explicitly call out open questions in the text provided.

## Limitations
- Theoretical guarantees depend on assumptions about bounded variation of optimal decisions and interior point conditions that may not hold in highly dynamic environments
- Experimental validation is limited to relatively small-scale problems, raising questions about scalability to real-world deployments
- The algorithm's performance under complex, non-convex fairness constraints or multiple sensitive attributes is not explored

## Confidence
- High confidence in the theoretical framework and algorithm design, given the rigorous convex optimization foundation
- Medium confidence in the long-term fairness guarantees, as they depend on assumptions that may be violated in practice
- Low confidence in scalability claims, as experiments do not test large-scale deployment scenarios

## Next Checks
1. **Stress Test Assumption Sensitivity**: Systematically relax Assumptions 4 and 5 in synthetic experiments to quantify how quickly the regret and fairness bounds degrade as constraint variation increases.

2. **Large-Scale Simulation**: Implement the algorithm on a realistic P2P energy market with thousands of participants and dynamic pricing to evaluate performance at scale.

3. **Comparison to Offline Benchmarks**: Compare LoTFair's long-term fairness performance against offline fair optimization methods on time-varying problems to verify that online adaptation provides meaningful benefits.