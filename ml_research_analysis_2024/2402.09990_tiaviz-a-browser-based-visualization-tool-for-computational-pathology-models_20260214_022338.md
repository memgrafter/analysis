---
ver: rpa2
title: 'TIAViz: A Browser-based Visualization Tool for Computational Pathology Models'
arxiv_id: '2402.09990'
source_url: https://arxiv.org/abs/2402.09990
tags:
- visualization
- pathology
- tiatoolbox
- tool
- digital
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: TIAViz is a browser-based Python visualization tool for digital
  pathology that enables interactive overlay of model outputs, annotations, and images
  onto whole slide images. Built into TIAToolbox, it uses Bokeh for dynamic visualization
  and supports heatmaps, segmentations, graphs, and multiple overlay types simultaneously.
---

# TIAViz: A Browser-based Visualization Tool for Computational Pathology Models

## Quick Facts
- arXiv ID: 2402.09990
- Source URL: https://arxiv.org/abs/2402.09990
- Reference count: 19
- Primary result: Browser-based Python visualization tool enabling interactive overlay of model outputs onto whole slide images for computational pathology

## Executive Summary
TIAViz is a browser-based Python visualization tool designed for digital pathology that enables researchers to interactively overlay model outputs, annotations, and images onto whole slide images (WSIs). Built as part of the TIAToolbox ecosystem, it leverages Bokeh for dynamic visualization and supports multiple overlay types including heatmaps, segmentations, graphs, and annotations simultaneously. The tool facilitates research workflows by allowing remote use through browser access, providing online demos, and integrating easily into Python-based machine learning pipelines. TIAViz has been applied in multiple studies for visualizing gene expression patterns, cell networks, and tumor subtypes in computational pathology research.

## Method Summary
TIAViz is implemented in Python and integrated into the TIAToolbox framework. The tool uses Bokeh for the browser-based UI and Flask for serving image tiles on demand. It reads WSIs in various formats and overlays model outputs including heatmaps, segmentations, annotations, and graphs. The system uses TIAToolbox's SQLiteStore for efficient annotation storage and querying, and supports multiple overlay types through standardized file formats like GeoJSON and JSON. Users can launch the tool locally or on a remote server, with the UI accessible through a web browser for interactive exploration of pathology images and model outputs.

## Key Results
- Enables interactive overlay of heatmaps, segmentations, annotations, and graphs on whole slide images
- Supports browser-based remote visualization, allowing access from different machines or servers
- Successfully applied in multiple studies for visualizing gene expression, cell networks, and tumor subtypes
- Integrates with TIAToolbox's SQLite annotation store for efficient querying of large annotation datasets

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Browser-based architecture enables remote visualization and collaboration by decoupling UI from data storage/compute.
- Mechanism: The UI is rendered in the browser via Bokeh server, while the backend runs on a remote machine or server, streaming image tiles and overlays on-demand.
- Core assumption: Network bandwidth and latency between client and server are acceptable for interactive exploration of high-resolution pathology images.
- Evidence anchors:
  - [abstract]: "The UI is browser-based, allowing use either locally, on a remote machine, or on a server to provide publicly available demos."
  - [section]: "as a browser-based visualization tool, TIAViz can be launched on a remote machine and used to view slides/overlays from that remote machine in a browser window on the local machine."
  - [corpus]: Weak evidence. No directly related work cited in corpus that validates remote browser-based visualization for pathology.
- Break condition: High network latency or insufficient bandwidth makes tile streaming and interactive updates unacceptably slow.

### Mechanism 2
- Claim: Integration with TIAToolbox's SQLite annotation store enables efficient querying and dynamic rendering of large annotation datasets.
- Mechanism: Annotations are stored as geometries with properties in SQLite, allowing fast spatial and property-based filtering before rendering.
- Core assumption: SQLite queries and in-memory filtering can handle the annotation volume without degrading UI responsiveness.
- Evidence anchors:
  - [section]: "TIAToolbox offers an SQLite-based database for storing annotations... Methods are provided to allow efficient and powerful querying of the store."
  - [section]: "TIAViz uses the TIAToolbox SQLiteStore to store annotations and segmentations as Annotation objects..."
  - [corpus]: No corpus support; this is a core design feature not cited elsewhere.
- Break condition: Annotation dataset grows beyond SQLite's query performance limits or available memory for filtering.

### Mechanism 3
- Claim: Bokeh's interactive plotting framework supports multi-layer overlay visualization with independent control of each layer type.
- Mechanism: Bokeh's server model allows dynamic addition/removal of overlay layers (graphs, heatmaps, segmentations, WSIs) with independent toggle and styling controls.
- Core assumption: Bokeh's architecture can efficiently handle multiple simultaneous overlay layers without significant performance degradation.
- Evidence anchors:
  - [abstract]: "TIAViz builds on the capabilities of TIAToolbox... utilizing two core components... flask-based tileserver serves image tiles on the fly... Bokeh [11] visualization library."
  - [section]: "TIAViz is capable of overlaying a wide variety of model outputs... Any combination of one graph overlay, one annotation-based overlay, and multiple image-based overlays can be shown."
  - [corpus]: No direct corpus support; this is a stated capability without external validation.
- Break condition: Number of overlay layers or annotation complexity exceeds Bokeh's rendering performance capabilities.

## Foundational Learning

- Concept: Whole Slide Image (WSI) pyramid structure and tile-based streaming
  - Why needed here: TIAViz must efficiently display multi-gigapixel images by requesting only visible tiles at appropriate zoom levels.
  - Quick check question: What is the advantage of using a tile server over loading the entire WSI into memory?

- Concept: GeoJSON and JSON-based data formats for annotations and graphs
  - Why needed here: TIAViz supports multiple overlay types that use these formats for describing geometries and graph structures.
  - Quick check question: How does GeoJSON differ from the .dat file format used for segmentation overlays?

- Concept: Flask server architecture and Bokeh server model
  - Why needed here: TIAViz uses Flask for tile serving and Bokeh server for interactive visualization, requiring understanding of their integration.
  - Quick check question: What is the role of the Bokeh server in maintaining the interactive state of the visualization?

## Architecture Onboarding

- Component map: User Browser -> Bokeh Server -> Flask Tile Server -> WSI Storage and SQLiteStore
- Critical path: User interaction → Bokeh server processes request → Flask tile server serves image tiles → SQLiteStore queries annotations → Bokeh renders combined view
- Design tradeoffs: Browser-based UI enables remote access but requires continuous network connection; SQLite offers simplicity but may not scale to extremely large annotation sets
- Failure signatures: Slow initial load with many annotations; unresponsive UI when adding complex overlays; tile loading failures due to network issues
- First 3 experiments:
  1. Launch TIAViz locally with a small WSI and simple annotation overlay to verify basic functionality
  2. Add a second overlay type (e.g., heatmap) to test multi-layer rendering capabilities
  3. Test remote access by running TIAViz on a server and connecting from a different machine to validate browser-based architecture

## Open Questions the Paper Calls Out

### Open Question 1
- Question: What are the performance bottlenecks when handling very large datasets in TIAViz, and how can they be addressed?
- Basis in paper: [explicit] The paper mentions that TIAViz can be slow on initial loading when dealing with large numbers of annotations, though it is generally responsive after this initial delay.
- Why unresolved: The paper identifies the issue but does not provide specific details on the underlying causes or potential solutions for performance optimization.
- What evidence would resolve it: Profiling TIAViz with large datasets to identify specific bottlenecks (e.g., memory usage, rendering time, data loading) and implementing targeted optimizations (e.g., data chunking, caching, parallel processing) would resolve this question.

### Open Question 2
- Question: How can TIAViz be extended to support a wider variety of visualization tools and model outputs within its interface?
- Basis in paper: [explicit] The paper states that currently only HoVer-Net can be run interactively within the interface, and there is scope to widen the options.
- Why unresolved: The paper acknowledges the potential for expansion but does not provide concrete plans or examples of how this could be achieved.
- What evidence would resolve it: Developing and integrating additional visualization tools and model outputs into TIAViz, along with documenting the process and performance impact, would resolve this question.

### Open Question 3
- Question: What are the potential benefits and challenges of implementing a visualization server for TIAViz that allows users to upload slides and overlays for visualization?
- Basis in paper: [explicit] The paper mentions the possibility of providing a visualization server for this purpose and notes that a prototype server exists.
- Why unresolved: The paper suggests the idea but does not explore the technical, logistical, or user experience aspects of implementing such a server.
- What evidence would resolve it: Building and deploying a visualization server, gathering user feedback, and analyzing usage patterns and performance would resolve this question.

## Limitations

- Performance degradation with large annotation datasets, particularly during initial loading
- Limited support for interactive model execution beyond HoVer-Net within the interface
- Browser-based architecture requires continuous network connection and may struggle with high-latency conditions

## Confidence

- **High** for the tool's basic functionality and integration with TIAToolbox components (tile serving, SQLite annotation storage, Bokeh visualization)
- **Medium** for the remote browser-based architecture's scalability and performance under real-world network conditions
- **Medium** for multi-layer overlay rendering performance with complex datasets

## Next Checks

1. **Performance benchmark**: Test TIAViz with a WSI containing 50,000+ annotations and measure UI responsiveness during pan/zoom operations, particularly during initial load and overlay addition/removal.

2. **Network stress test**: Deploy TIAViz on a server with high-latency network conditions (simulated 100-500ms latency) and evaluate interactive performance when streaming tiles to a remote client.

3. **Scalability limit**: Determine the maximum number of simultaneous overlay layers (heatmaps, segmentations, graphs) before noticeable performance degradation occurs, and identify which component (tile serving, Bokeh rendering, SQLite querying) becomes the bottleneck.