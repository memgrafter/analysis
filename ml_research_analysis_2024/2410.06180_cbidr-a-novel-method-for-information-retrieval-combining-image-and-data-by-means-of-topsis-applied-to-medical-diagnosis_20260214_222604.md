---
ver: rpa2
title: 'CBIDR: A novel method for information retrieval combining image and data by
  means of TOPSIS applied to medical diagnosis'
arxiv_id: '2410.06180'
source_url: https://arxiv.org/abs/2410.06180
tags:
- image
- images
- data
- retrieval
- neural
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper proposes CBIDR, a novel method for Content-Based Image
  and Data Retrieval that combines image features extracted by CNNs with patient clinical
  data using the TOPSIS ranking algorithm. The approach is applied to a case study
  of oral cancer diagnosis using the NDB-UFES dataset, which includes histopathological
  images and patient clinical information.
---

# CBIDR: A novel method for information retrieval combining image and data by means of TOPSIS applied to medical diagnosis

## Quick Facts
- arXiv ID: 2410.06180
- Source URL: https://arxiv.org/abs/2410.06180
- Reference count: 10
- Primary result: CBIDR combines CNN-extracted image features with clinical data using TOPSIS, achieving 97.44% Top-1 and 100% Top-5 accuracy for oral cancer diagnosis.

## Executive Summary
CBIDR introduces a novel content-based image and data retrieval method that integrates histopathological image features with patient clinical data for medical diagnosis. The approach extracts deep features from images using pre-trained CNNs, encodes clinical data as binary vectors, and combines both modalities using the TOPSIS ranking algorithm. Applied to oral cancer diagnosis using the NDB-UFES dataset, CBIDR significantly outperforms standard image-only retrieval methods by leveraging complementary information from multiple data sources.

## Method Summary
CBIDR extracts deep features from histopathological images using fine-tuned pre-trained CNNs (ResNet50, DenseNet-121, MobileNetV2) with MarginLoss to ensure discriminative representations. Clinical data are encoded as binary vectors and similarity is computed using Hamming distance. The TOPSIS algorithm then ranks database cases by combining image similarity and clinical similarity, with weights determining the relative importance of each modality. The method is evaluated on a dataset of 3753 512x512 histopathological patches from oral cancer cases, achieving superior retrieval accuracy compared to image-only approaches.

## Key Results
- Achieved 97.44% Top-1 accuracy and 100% Top-5 accuracy using MobileNetV2 with equal weights [0.5, 0.5]
- Outperformed standard CBIR baselines by integrating clinical metadata into the retrieval process
- MobileNetV2 demonstrated the best performance among evaluated CNN architectures

## Why This Works (Mechanism)

### Mechanism 1
- Combining image features from CNNs with clinical data improves retrieval accuracy beyond image-only CBIR.
- The CBIDR method extracts deep features from histopathological images using pre-trained CNNs and quantifies similarity between clinical data using Hamming distance. These two similarity scores are fused via the TOPSIS ranking algorithm to jointly rank database cases, enabling retrieval decisions that incorporate both visual and patient-specific information.
- Core assumption: Visual and clinical similarity measures are complementary and can be meaningfully combined through weighted distance aggregation.
- Evidence anchors:
  - [abstract]: "CBIDR, a novel method for Content-Based Image and Data Retrieval that combines image features extracted by CNNs with patient clinical data using the TOPSIS ranking algorithm."
  - [section]: "clinical data into the analysis, two distance metrics are considered: one for images and another for clinical data... the TOPSIS algorithm for ranking is employed."
- Break condition: If clinical data are sparse, irrelevant, or noisy, the Hamming distance contribution degrades TOPSIS ranking quality.

### Mechanism 2
- TOPSIS effectively ranks multimodal retrieval candidates by simultaneously optimizing for minimal image distance and minimal clinical data distance.
- TOPSIS normalizes and weights the two distance criteria, constructs ideal and negative-ideal solutions, and ranks alternatives by their relative closeness to the ideal solution, thereby selecting cases most similar in both modalities.
- Core assumption: Image distance and clinical data distance can be normalized and weighted on the same scale for fair comparison.
- Evidence anchors:
  - [section]: "TOPSIS (Technique for Order Preference by Similarity to Ideal Solution) proposed by Hwang and Yoon (1981)... works by evaluating the performance of alternatives based on their similarity to the ideal solution."
  - [section]: "Two distance vectors are generated and passed as input to TOPSIS, producing ranked results."
- Break condition: If weights are poorly chosen or if one modality dominates the other, the ranking will be biased toward that modality.

### Mechanism 3
- Pre-trained CNNs with transfer learning provide discriminative feature vectors that capture relevant histopathology patterns for retrieval.
- Fine-tuning CNN backbones (ResNet50, DenseNet-121, MobileNetV2) on the P-NDB-UFES dataset using MarginLoss encourages the model to map same-class images close together in feature space, producing compact and discriminative descriptors for retrieval.
- Core assumption: The MarginLoss-based fine-tuning adapts pre-trained features to the domain without overfitting on small datasets.
- Evidence anchors:
  - [section]: "MarginLoss (Wu et al., 2017) was used as the loss function... encourages images of the same class to be closer while pushing images of different classes farther apart."
  - [section]: "MobileNetV2... achieved 97.44% for Top-1 and 100% for Top-5 accuracy with the weights [0.5, 0.5]."
- Break condition: If the fine-tuning dataset is too small or imbalanced, feature generalization degrades and retrieval accuracy drops.

## Foundational Learning

- Concept: Image feature extraction with CNNs
  - Why needed here: CBIDR depends on CNN-extracted descriptors to quantify visual similarity between histopathological images.
  - Quick check question: What is the shape of the feature vector output by ResNet50 before the classification head?

- Concept: Clinical data encoding and similarity metrics
  - Why needed here: Patient attributes must be numerically encoded (e.g., binary vectors) so Hamming distance can measure clinical similarity.
  - Quick check question: How would you encode a smoking habit attribute that has three possible values (never, former, current) for Hamming distance calculation?

- Concept: TOPSIS multi-criteria ranking
  - Why needed here: TOPSIS merges two heterogeneous distance metrics into a single ranked list, enabling combined image+data retrieval.
  - Quick check question: In TOPSIS, what is the difference between the ideal and negative-ideal solutions?

## Architecture Onboarding

- Component map:
  - CNN backbone (ResNet50/DenseNet-121/MobileNetV2) → feature extractor
  - Faiss index → stores and retrieves nearest image descriptors
  - Clinical data encoder → binary vector representation
  - Hamming distance calculator → clinical similarity
  - TOPSIS module → combines image and clinical distances into final ranking
  - NDB-UFES dataset → source of histopathology images + clinical metadata

- Critical path:
  1. Preprocess image patches → CNN feature extraction
  2. Index features in Faiss
  3. Encode clinical data → Hamming distance matrix
  4. For a query: compute image distances via Faiss, clinical distances via Hamming
  5. Build Mx2 decision matrix → TOPSIS ranking → output ranked list

- Design tradeoffs:
  - Using Hamming distance limits clinical data to binary/categorical form; continuous variables must be discretized.
  - Equal weighting ([0.5, 0.5]) may not be optimal; domain experts might need to tune weights.
  - Pre-trained CNNs reduce training data needs but may not capture subtle histopathology nuances without careful fine-tuning.

- Failure signatures:
  - Low Top-1 accuracy even with clinical data suggests CNN features are not discriminative enough.
  - High Top-5 but low Top-1 indicates retrieval is getting close but not exact matches.
  - Sensitivity to weight tuning indicates poor separation between image and clinical contributions.

- First 3 experiments:
  1. Run CBIR baseline (images only) with ResNet50 → record Top-1/Top-5.
  2. Add clinical data with equal weights [0.5, 0.5] via TOPSIS → compare accuracy.
  3. Sweep weight combinations ([0.6,0.4], [0.7,0.3], etc.) → identify best-performing ratio.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does the performance of CBIDR compare when using more than two criteria (e.g., incorporating additional clinical features or combining multiple similarity metrics)?
- Basis in paper: [inferred] The paper combines image features and clinical data using TOPSIS with two criteria. It would be valuable to explore the impact of incorporating more criteria or features.
- Why unresolved: The paper only uses two criteria (image distance and clinical data distance) in the TOPSIS algorithm. The effect of adding more criteria or features is not explored.
- What evidence would resolve it: Experimental results comparing CBIDR performance with varying numbers of criteria or features incorporated into the TOPSIS algorithm.

### Open Question 2
- Question: How does the choice of CNN architecture for feature extraction impact the performance of CBIDR in different medical imaging domains?
- Basis in paper: [explicit] The paper evaluates three CNN architectures (ResNet50, DenseNet-121, MobileNetV2) for oral cancer diagnosis. The performance varies across architectures.
- Why unresolved: While the paper shows performance differences across architectures for oral cancer, it does not explore how these results generalize to other medical imaging domains or tasks.
- What evidence would resolve it: Comparative studies of CBIDR performance using different CNN architectures across multiple medical imaging domains (e.g., radiology, dermatology, pathology).

### Open Question 3
- Question: What is the optimal weight distribution between image features and clinical data for different medical conditions or patient populations?
- Basis in paper: [explicit] The paper experiments with different weight combinations (e.g., [0.5, 0.5], [0.6, 0.4]) and finds that equal weighting performs best for oral cancer.
- Why unresolved: The paper finds equal weighting optimal for oral cancer but does not investigate whether this generalizes to other conditions or patient populations.
- What evidence would resolve it: Systematic analysis of CBIDR performance with varying weight distributions across different medical conditions, patient demographics, and disease severities.

## Limitations
- Clinical data encoding method is not fully specified, affecting reproducibility of Hamming distance calculations
- TOPSIS normalization and weighting scheme for combining heterogeneous distance metrics is only partially described
- Small dataset size with 51.29% class imbalance raises concerns about overfitting and generalization

## Confidence
- **High confidence**: The basic framework of combining CNN image features with clinical data via TOPSIS is clearly described and experimentally validated
- **Medium confidence**: The reported accuracy improvements are convincing within the dataset used, but may not generalize to other medical domains or datasets
- **Low confidence**: Exact implementation details of margin loss, clinical data encoding, and TOPSIS normalization are unclear, limiting exact replication

## Next Checks
1. Implement and test multiple clinical data encoding schemes (binary vectors, one-hot encoding) to verify impact on Hamming distance quality
2. Conduct ablation studies varying TOPSIS weight combinations beyond [0.5, 0.5] to confirm sensitivity and optimal weighting
3. Evaluate retrieval performance on a held-out test set or cross-validation folds to assess robustness to class imbalance and overfitting