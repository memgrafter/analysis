---
ver: rpa2
title: What Is Missing In Homophily? Disentangling Graph Homophily For Graph Neural
  Networks
arxiv_id: '2406.18854'
source_url: https://arxiv.org/abs/2406.18854
tags:
- homophily
- graph
- node
- feature
- performance
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: 'This paper identifies a gap in how graph homophily is currently
  understood, showing that existing metrics like edge and node homophily only capture
  label consistency while ignoring structural and feature aspects. The authors propose
  disentangling graph homophily into three components: label homophily (consistency
  of node labels), structural homophily (consistency of neighborhood patterns within
  classes), and feature homophily (dependencies of node features across topology).'
---

# What Is Missing In Homophily? Disentangling Graph Homophily For Graph Neural Networks

## Quick Facts
- arXiv ID: 2406.18854
- Source URL: https://arxiv.org/abs/2406.18854
- Authors: Yilun Zheng; Sitao Luan; Lihui Chen
- Reference count: 40
- Primary result: Tri-Hom metric shows significantly higher correlation with GNN performance than 17 existing metrics by considering label, structural, and feature homophily together

## Executive Summary
This paper addresses a fundamental gap in how graph homophily is understood for Graph Neural Networks (GNNs). While existing metrics focus primarily on label consistency, the authors identify that homophily has three distinct aspects: label homophily (consistency of node labels), structural homophily (consistency of neighborhood patterns within classes), and feature homophily (dependencies of node features across topology). They propose a new metric called Tri-Hom that captures all three aspects simultaneously, showing significantly better correlation with GNN performance than existing metrics across 31 real-world datasets.

## Method Summary
The authors introduce a new theoretical framework based on Contextual Stochastic Block Model with three types of Homophily (CSBM-3H) that allows controlled generation of synthetic graphs with varying homophily properties. They develop three metrics to quantify label, structural, and feature homophily respectively, and combine them into a composite metric called Tri-Hom. The method involves training multiple GNN architectures (MLP, GCN, GraphSage, GAT) on both synthetic and real-world datasets, then calculating correlations between Tri-Hom values and model performance. Experiments are conducted on 31 benchmark datasets covering various graph types and sizes.

## Key Results
- Tri-Hom achieves significantly higher correlation with GNN performance than 17 existing metrics that only focus on single homophily aspects
- The theoretical framework shows that node distinguishability, determined by the three homophily metrics, directly influences GNN performance
- Experiments on 31 real-world datasets validate that Tri-Hom captures the synergy between label, structural, and feature homophily more comprehensively than existing approaches

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Tri-Hom achieves significantly higher correlation with GNN performance than existing metrics by considering label, structural, and feature homophily together
- Mechanism: The metric captures the synergy between three homophily aspects through a theoretical framework (CSBM-3H) that models their combined effect on node distinguishability
- Core assumption: Node distinguishability directly determines GNN performance and can be expressed as a function of the three homophily metrics
- Evidence anchors:
  - [abstract] "Tri-Hom has significantly higher correlation values than 17 existing metrics that only focus on a single homophily aspect"
  - [section 4.2] "We name J ¬G h and J G h as Tri-Hom for M¬G and MG"
  - [corpus] Weak - no direct mention of Tri-Hom in neighbor papers

### Mechanism 2
- Claim: Structural homophily improves intra-class node representation consistency after aggregation
- Mechanism: When nodes within the same class have similar neighborhood distributions, graph-aware models produce more consistent embeddings for these nodes
- Core assumption: Neighborhood distribution consistency leads to closer representations in embedding space
- Evidence anchors:
  - [section 3.2] "A high structural homophily indicates that the graph-aware models leveraging structural encoding will have similar embeddings for intra-class nodes after aggregation"
  - [section 4.2] "Theorem 2.2 shows an increase of hS consistently improves the performance of MG"
  - [corpus] Weak - limited direct evidence in neighbor papers

### Mechanism 3
- Claim: Feature homophily captures feature dependencies across topology that influence node distinguishability
- Mechanism: The metric measures how node features depend on their neighbors' features through a graph diffusion process, affecting how distinguishable nodes are
- Core assumption: Node features in real-world graphs are not conditionally independent of topology given labels
- Evidence anchors:
  - [section 3.3] "To disentangle the feature effect from label and graph structure, we define the feature homophily as the dependencies of node features across the graph topology"
  - [section 4.2] "Theorem 2.3 shows the influences of hF to MG is determined by the hL"
  - [corpus] Weak - no direct mention of feature homophily in neighbor papers

## Foundational Learning

- Concept: Stochastic Block Model (SBM)
  - Why needed here: The paper builds on SBM to create CSBM-3H, a more sophisticated model that controls three types of homophily
  - Quick check question: What is the key difference between traditional SBM and CSBM-3H?

- Concept: Graph diffusion and feature dependencies
  - Why needed here: The feature homophily metric is based on modeling how features spread across the graph through diffusion
  - Quick check question: How does the parameter ω control the relationship between a node's features and its neighbors' features?

- Concept: Node distinguishability
  - Why needed here: The theoretical framework uses node distinguishability (ratio of intra-class to inter-class distances) to analyze how homophily affects GNN performance
  - Quick check question: Why does a smaller node distinguishability metric indicate better model performance?

## Architecture Onboarding

- Component map: CSBM-3H -> Tri-Hom -> Correlation analysis -> GNN performance evaluation
- Critical path:
  1. Generate synthetic graphs with controlled homophily
  2. Calculate Tri-Hom values for each graph
  3. Train GNNs and measure performance
  4. Compute correlation between Tri-Hom and performance
  5. Compare with existing metrics on real datasets
- Design tradeoffs:
  - Complexity vs. comprehensiveness: Tri-Hom is more complex but captures more information than single-aspect metrics
  - Theoretical assumptions vs. practical applicability: CSBM-3H makes simplifying assumptions that may not hold in all real cases
- Failure signatures:
  - Low correlation between Tri-Hom and performance in real datasets
  - Inconsistent behavior across different GNN architectures
  - High variance in metric values across similar graphs
- First 3 experiments:
  1. Replicate the synthetic experiments to verify Tri-Hom's alignment with GNN performance
  2. Test Tri-Hom on a new real-world dataset not used in the paper
  3. Compare Tri-Hom's performance with a subset of the 17 existing metrics on heterogeneous graphs

## Open Questions the Paper Calls Out

- Question: How would disentangled graph homophily metrics behave under more complex graph structures beyond the Contextual Stochastic Block Model with three types of Homophily (CSBM-3H)?
  - Basis in paper: [explicit] The paper notes that future work could investigate disentangled graph homophily in more general CSBM settings without assumptions like uniform node degrees, balanced classes, and linear feature dependencies.
  - Why unresolved: The theoretical analysis and experiments in the paper are based on CSBM-3H, which makes simplifying assumptions. Real-world graphs often have more complex structures, varying node degrees, and non-linear feature dependencies.
  - What evidence would resolve it: Extending the theoretical framework and experiments to more realistic graph models with non-uniform node degrees, imbalanced classes, and non-linear feature dependencies would provide evidence for how the disentangled metrics generalize to complex graph structures.

- Question: How can the three types of homophily (label, structural, and feature) be estimated in unsupervised or weakly-supervised scenarios?
  - Basis in paper: [explicit] The paper suggests that estimating three types of homophily in unsupervised or weakly-supervised scenarios would be important for label-scarcity cases.
  - Why unresolved: The current estimation methods for the three homophily metrics require labeled data. In many real-world scenarios, labeled data may be scarce or unavailable.
  - What evidence would resolve it: Developing and validating estimation methods for label, structural, and feature homophily that work effectively in unsupervised or weakly-supervised settings would address this open question.

- Question: How does the disentangled graph homophily framework inform the design of new Graph Neural Network architectures that are robust to heterophily?
  - Basis in paper: [explicit] The paper concludes by suggesting that the theoretical results could inspire future studies on model designs that address heterophily issues in GNNs.
  - Why unresolved: While the paper provides insights into how different aspects of homophily affect GNN performance, it does not propose specific architectural changes or new GNN designs based on these insights.
  - What evidence would resolve it: Designing and evaluating new GNN architectures that explicitly leverage the disentangled homophily metrics (e.g., by incorporating structural-aware features or adapting aggregation based on feature homophily) would demonstrate the practical impact of the framework on GNN design.

## Limitations

- The theoretical analysis relies on several simplifying assumptions in the CSBM-3H model that may not hold in real-world graphs
- The experimental validation is based on correlation analysis rather than causal inference, limiting definitive claims about Tri-Hom capturing true underlying mechanisms
- The feature homophily estimation process in real-world datasets involves optimization that may introduce approximation errors

## Confidence

- **High**: The observation that existing homophily metrics are limited to single aspects (label consistency) - well-supported by literature review and experimental comparisons
- **Medium**: The theoretical framework showing how three homophily aspects interact to affect node distinguishability - mathematically sound but relies on model assumptions that may not generalize
- **Low**: The claim that Tri-Hom should replace all existing metrics as the primary measure of graph homophily - extrapolation from correlation analysis that needs additional validation

## Next Checks

1. Test Tri-Hom's correlation with GNN performance across diverse graph types including temporal, heterogeneous, and large-scale graphs not covered in the current study
2. Conduct ablation studies to quantify the individual contributions of each homophily component to overall GNN performance
3. Validate the feature homophily estimation process through controlled experiments where ground truth feature dependencies are known