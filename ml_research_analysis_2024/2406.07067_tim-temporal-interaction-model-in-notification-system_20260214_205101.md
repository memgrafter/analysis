---
ver: rpa2
title: 'TIM: Temporal Interaction Model in Notification System'
arxiv_id: '2406.07067'
source_url: https://arxiv.org/abs/2406.07067
tags:
- user
- notifications
- users
- notification
- interaction
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the problem of optimizing notification delivery
  timing in mobile applications by modeling user behavior patterns across time slots.
  The proposed Temporal Interaction Model (TIM) leverages long-term user interaction
  sequences and employs a temporal attention unit (TAU) to extract behavioral patterns,
  with a particular focus on distinguishing between work days and rest days.
---

# TIM: Temporal Interaction Model in Notification System

## Quick Facts
- arXiv ID: 2406.07067
- Source URL: https://arxiv.org/abs/2406.07067
- Authors: Huxiao Ji; Haitao Yang; Linchuan Li; Shunyu Zhang; Cunyi Zhang; Xuanping Li; Wenwu Ou
- Reference count: 27
- One-line primary result: TIM achieves 0.8614 AUC on work days and 0.8559 AUC on rest days, with 1% CTR increase in online A/B tests

## Executive Summary
This paper addresses the challenge of optimizing notification delivery timing in mobile applications by modeling user behavior patterns across time slots. The proposed Temporal Interaction Model (TIM) leverages long-term user interaction sequences and employs a temporal attention unit (TAU) to extract behavioral patterns, with particular focus on distinguishing between work days and rest days. The model predicts click-through rates (CTR) for each time slot and uses these predictions to optimize the holistic timing of multiple notifications. Offline experiments show TIM achieves superior performance compared to baseline models, with AUC scores reaching 0.8614 for work days and 0.8559 for rest days. Online A/B tests demonstrate a 1% increase in CTR, leading to a 0.1% increase in daily active users and a 0.066% increase in watch time, while maintaining user satisfaction.

## Method Summary
TIM is a notification delivery optimization system that processes long-term user interaction sequences (notification receipts, clicks, watch time, effective views) across K time slots and L days. The core component is the Temporal Attention Unit (TAU), which uses linear self-attention with RoPE and target attention with date type embeddings to extract user behavior pattern embeddings. These embeddings, combined with user contextual features, are processed through a fully connected network to predict slot-wise CTR. The model employs a holistic notification strategy that maximizes expected click count while minimizing the number of notifications per slot, formulated as an optimization problem with regularization.

## Key Results
- Offline AUC scores: 0.8614 for work days, 0.8559 for rest days
- Online A/B test: 1% increase in CTR
- Online A/B test: 0.1% increase in daily active users
- Online A/B test: 0.066% increase in watch time

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Modeling user behavior patterns across time slots improves notification CTR prediction compared to static models.
- Mechanism: TIM uses long-term interaction sequences and a temporal attention unit (TAU) to extract slot-wise user behavior patterns, allowing the model to predict CTR for each time slot.
- Core assumption: User behavior patterns are consistent enough across similar days (work vs. rest) to be modeled effectively.
- Evidence anchors:
  - [abstract] "TIM leverages long-term user historical interaction sequence features such as notification receipts, clicks, watch time and effective views, and employs a temporal attention unit (TAU) to extract user behavior patterns."
  - [section] "The feature vectors forms a ùêæ √ó ùêø √ó ùëë1 tensor ùëã = (ùëã1, ùëã2, . . . , ùëãùêæ ). We leverage the effectiveness of attention mechanisms[1, 4, 5, 18] for sequence processing by introducing the Temporal Attention Unit (TAU) to extract user behavior pattern embeddings from long-term historical interaction sequences..."
- Break condition: If user behavior patterns are too volatile or unpredictable, the model's predictions will be unreliable.

### Mechanism 2
- Claim: Distinguishing between work days and rest days in the model improves CTR prediction accuracy.
- Mechanism: TIM incorporates date type embedding (DTE) to capture differences in user behavior habits between work days and rest days, allowing the model to adjust its predictions accordingly.
- Core assumption: There are significant differences in user behavior patterns between work days and rest days that impact notification engagement.
- Evidence anchors:
  - [abstract] "...extract user behavior patterns, with a particular focus on identifying distinct patterns that emerge during work days and rest days."
  - [section] "The fully connected network that follows integrates user contextual features and behavior pattern embeddings... ùíÖùëû and ùê∑‚Ñé represent target date type embedding and historical date type embedding (DTE) respectively, which can alleviate the difference in user behavior habits between work days and rest days..."
- Break condition: If the difference in user behavior between work days and rest days is negligible, the added complexity of DTE may not be justified.

### Mechanism 3
- Claim: Optimizing the holistic timing of multiple notifications in a day increases overall user engagement without causing excessive disturbance.
- Mechanism: TIM predicts slot-wise CTR and uses a strategy to maximize the expected click count while minimizing the number of notifications in a single slot, ensuring a balanced approach to notification delivery.
- Core assumption: There is a non-linear relationship between the number of notifications sent and user engagement, with an optimal point that maximizes engagement while minimizing disturbance.
- Evidence anchors:
  - [abstract] "Moreover, we provide an elegant strategy of holistic notifications send time control to improve user engagement while minimizing disruption."
  - [section] "To achieve our business goal, we need to maximize user's overall click count in one day, which is formulated as minimizeùíè ‚àí ùíë‚ä§ùíè + ùúÜ‚à•ùíè‚à•2 2 subject to ‚à•ùíè‚à•1 = ùëû, ùëõùëñ ‚â• 0, ùëñ = 1, 2, . . . , ùêæ..."
- Break condition: If users are equally engaged by a uniform distribution of notifications, the optimization strategy may not provide significant benefits.

## Foundational Learning

- Concept: Attention mechanisms for sequence processing
  - Why needed here: To effectively extract user behavior patterns from long-term interaction sequences.
  - Quick check question: How does the attention mechanism in TIM differ from standard attention mechanisms used in NLP tasks?

- Concept: Date type embedding (DTE)
  - Why needed here: To capture differences in user behavior patterns between work days and rest days.
  - Quick check question: How is DTE implemented in TIM, and what is its impact on the model's performance?

- Concept: Optimization under constraints
  - Why needed here: To maximize the expected click count while minimizing the number of notifications in a single slot.
  - Quick check question: What is the mathematical formulation of the optimization problem in TIM, and how is it solved?

## Architecture Onboarding

- Component map: User interaction sequences ‚Üí Temporal Attention Unit (TAU) ‚Üí Date Type Embedding (DTE) ‚Üí Fully connected network ‚Üí Slot-wise CTR predictions ‚Üí Optimization layer ‚Üí Notification delivery

- Critical path: User interaction sequence features ‚Üí TAU ‚Üí DTE ‚Üí Fully connected network ‚Üí Slot-wise CTR predictions ‚Üí Optimization layer ‚Üí Notification delivery

- Design tradeoffs:
  - Model complexity vs. interpretability: TIM uses complex attention mechanisms and optimization, which may be harder to interpret than simpler models.
  - Data requirements: TIM requires long-term user interaction data to effectively learn behavior patterns.
  - Real-time performance: The optimization strategy may introduce latency in the notification delivery process.

- Failure signatures:
  - Low CTR: The model's predictions are inaccurate, or the optimization strategy is not effective.
  - High notification churn rate: Users are finding the notifications too frequent or intrusive.
  - Low DAU or watch time: The notifications are not effectively driving user engagement.

- First 3 experiments:
  1. Compare TIM's CTR predictions to a baseline model (e.g., XGBoost) using offline metrics (AUC, HR@1, HR@5, HR@9, A@1, A@5, A@9).
  2. Evaluate the impact of DTE on TIM's performance by comparing models with and without DTE.
  3. Conduct an online A/B test to compare TIM's notification delivery strategy to a uniform delivery strategy, measuring metrics such as DAU, watch time, CTR, and switch close rate.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does the model's performance scale with the length of the historical interaction sequence (L)? Is there an optimal sequence length beyond which additional data provides diminishing returns?
- Basis in paper: [inferred] The paper mentions leveraging long-term user historical interaction sequences but does not discuss the impact of varying sequence lengths on model performance.
- Why unresolved: The paper does not provide experiments or analysis on how different values of L affect model performance, making it unclear if the current choice of L is optimal.
- What evidence would resolve it: Conducting experiments with varying L values and reporting the corresponding model performance metrics (AUC, HR@1, etc.) would help identify the optimal sequence length.

### Open Question 2
- Question: How does the model perform when applied to different types of mobile applications beyond short video platforms like Kuaishou?
- Basis in paper: [explicit] The paper mentions that future work includes exploring the application of TIM in diverse scenarios but does not provide any results or analysis for other types of applications.
- Why unresolved: The current evaluation is limited to a short video application, and there is no evidence of the model's generalizability to other domains.
- What evidence would resolve it: Applying TIM to various types of mobile applications (e.g., social media, gaming, productivity apps) and comparing its performance across these domains would demonstrate its generalizability.

### Open Question 3
- Question: How does the model handle real-time updates and adapt to sudden changes in user behavior patterns?
- Basis in paper: [inferred] The paper discusses the use of long-term historical interaction sequences but does not address how the model adapts to real-time changes in user behavior.
- Why unresolved: The model's ability to handle real-time updates and adapt to dynamic user behavior is not discussed, leaving uncertainty about its performance in rapidly changing environments.
- What evidence would resolve it: Conducting experiments that simulate sudden changes in user behavior and measuring the model's ability to adapt and maintain performance would provide insights into its real-time capabilities.

## Limitations
- The paper lacks sufficient detail on the fully connected network architecture and training hyperparameters, making complete reproduction difficult.
- Offline evaluation relies on only two weeks of historical data, which may not capture long-term user behavior patterns effectively.
- Online A/B test results show relatively modest improvements (1% CTR increase, 0.1% DAU increase, 0.066% watch time increase), suggesting potential limitations in real-world impact.

## Confidence

- **High Confidence**: The fundamental approach of using attention mechanisms to extract temporal patterns from user interaction sequences is well-established in the literature and the model architecture is technically sound.
- **Medium Confidence**: The specific implementation details for the TAU and optimization strategy, while plausible, lack sufficient detail for complete reproduction and validation.
- **Medium Confidence**: The online A/B test results show positive impact but the effect sizes are relatively small, suggesting potential limitations in real-world applicability.

## Next Checks
1. **Architecture Validation**: Reconstruct the TIM model architecture from the paper specifications and compare its predictions against a simpler baseline (like XGBoost) on the same dataset to verify the claimed improvements are attributable to the proposed approach rather than data leakage or overfitting.

2. **Cross-Validation Robustness**: Evaluate TIM's performance across multiple time periods beyond the two-week window mentioned, testing whether the model maintains consistent performance during different seasons, special events, or user behavior shifts.

3. **User Experience Impact**: Conduct a longer-term online A/B test (minimum 4 weeks) measuring not just engagement metrics but also user satisfaction indicators like notification opt-out rates, app uninstalls, and user feedback scores to ensure the optimization strategy doesn't negatively impact the overall user experience.