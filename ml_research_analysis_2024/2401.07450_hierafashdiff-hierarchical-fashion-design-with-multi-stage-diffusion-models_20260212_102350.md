---
ver: rpa2
title: 'HieraFashDiff: Hierarchical Fashion Design with Multi-stage Diffusion Models'
arxiv_id: '2401.07450'
source_url: https://arxiv.org/abs/2401.07450
tags:
- fashion
- design
- editing
- image
- generation
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper introduces HieraFashDiff, a hierarchical diffusion-based
  framework for fashion design that mimics the practical design workflow by decomposing
  the denoising process into an ideation stage (high-level concepts) and an iteration
  stage (low-level attributes). The method supports both fashion design generation
  and fine-grained local editing within a single framework, using a novel multi-stage
  approach conditioned on hierarchical text descriptions.
---

# HieraFashDiff: Hierarchical Fashion Design with Multi-stage Diffusion Models

## Quick Facts
- arXiv ID: 2401.07450
- Source URL: https://arxiv.org/abs/2401.07450
- Authors: Zhifeng Xie; Hao Li; Huiming Ding; Mengtian Li; Xinhan Di; Ying Cao
- Reference count: 10
- Primary result: Hierarchical diffusion framework that mimics fashion design workflow by decomposing denoising into ideation (high-level concepts) and iteration (low-level attributes) stages

## Executive Summary
HieraFashDiff introduces a novel hierarchical diffusion-based framework for fashion design that decomposes the denoising process into two successive stages aligned with practical fashion design workflows. The method uses hierarchical text conditioning with progressive prompt concatenation to enable both generation from high-level concepts and fine-grained local editing within a single framework. Extensive evaluations demonstrate superior performance compared to prior approaches, with FID scores of 10.27 and CLIP-S scores of 30.61 for design draft generation.

## Method Summary
The method builds on pre-trained Stable Diffusion and introduces a hierarchical multi-stage diffusion approach that splits the denoising process into an ideation stage (1000-900 steps) for high-level concept generation and an iteration stage (900-0 steps) for progressive attribute refinement. The framework conditions on hierarchical text descriptions - abstract design concepts during ideation and progressively added apparel attributes during iteration. Body part masks and pose conditioning enable localized attribute editing without affecting non-target regions. The model is trained on a custom HieraFashion dataset with over 5,000 full-body fashion images annotated with hierarchical text descriptions.

## Key Results
- FID scores of 10.27 and CLIP-S scores of 30.61 for design draft generation
- Consistent performance across iterative editing tasks for five apparel attributes
- Superior generation quality and prompt adherence compared to prior approaches
- Effective integration of concept-guided generation and semantic editing in fashion design

## Why This Works (Mechanism)

### Mechanism 1
The two-stage diffusion decomposition (ideation + iteration) aligns with practical fashion design workflows and improves both generation and editing performance. By mapping high-level concepts to early denoising steps and low-level attributes to later steps, the model can first generate coarse drafts guided by abstract ideas, then refine them with specific details. This mirrors the typical fashion design process of concept-to-draft followed by iterative refinement.

### Mechanism 2
Hierarchical text conditioning with progressive prompt concatenation enables both coarse-grained generation and fine-grained local editing within a single framework. The model uses high-level concepts (PC) during the ideation stage and progressively concatenates attribute descriptions (PA = PC + A1 + ... + An) during iteration stages. This allows the model to maintain conceptual consistency while adding specific details sequentially.

### Mechanism 3
Body part masks and pose conditioning enable localized attribute editing without global changes to non-target regions. For each attribute, the model generates a body part mask based on pose detection, then applies blended latent diffusion to preserve non-target regions during editing. Pose maps are additionally provided to the UNet to improve localization and human pose preservation.

## Foundational Learning

- Concept: Diffusion models and denoising processes
  - Why needed here: The entire framework builds on understanding how diffusion models progressively transform noise into images through sequential denoising steps
  - Quick check question: Why does the paper allocate [1000, 900] to ideation and [900, 0] to iteration, rather than splitting the timeline evenly?

- Concept: Hierarchical text conditioning and prompt scheduling
  - Why needed here: The model requires understanding how to condition different levels of text prompts at different stages of generation, and how to progressively concatenate prompts
  - Quick check question: What would happen if the model used the same flat prompt throughout all denoising steps instead of the hierarchical approach?

- Concept: Multimodal fusion and cross-attention in diffusion models
  - Why needed here: The model conditions on both text prompts and pose maps, requiring understanding of how to integrate multiple modalities into the denoising network
  - Quick check question: How does the pose conditioning mechanism interact with the text conditioning in the UNet architecture?

## Architecture Onboarding

- Component map: Pre-trained Stable Diffusion -> Hierarchical multi-stage denoising network with UNet -> Text prompts (hierarchical) + Pose maps -> Custom objective with prompt schedule function C(t) and pose schedule function M(t) -> HieraFashion dataset with hierarchical annotations -> FID, Coverage, CLIP-S metrics

- Critical path: Ideation stage → Noise generation → Text conditioning (PC) → Coarse draft generation → Iteration stage → Progressive attribute conditioning → Local editing with masks → Final output

- Design tradeoffs:
  - Stage decomposition vs. single-stage training: Two-stage allows workflow alignment but increases complexity
  - Hierarchical vs. flat prompts: Hierarchical enables better separation of concerns but requires careful prompt scheduling
  - Mask-based vs. global editing: Masks preserve non-target regions but require accurate body part detection

- Failure signatures:
  - Poor FID/CLIP-S scores indicate generation quality or prompt adherence issues
  - Attribute misalignment suggests problems with prompt scheduling or attribute ordering
  - Unwanted global changes during editing indicate mask generation failures
  - Pose distortion suggests issues with pose conditioning integration

- First 3 experiments:
  1. Test single-stage vs. two-stage training to verify workflow alignment benefits
  2. Compare hierarchical vs. flat prompt conditioning to validate prompt separation effectiveness
  3. Validate mask-based editing by testing with and without body part masks on controlled attribute changes

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does the proposed attribute ordering strategy (based on affected area size) compare to other potential ordering methods, such as semantic importance or user-defined preferences?
- Basis in paper: [explicit] The paper mentions using the size of affected areas to order attributes, but acknowledges this is just one approach and doesn't explore alternatives.
- Why unresolved: The paper only evaluates their proposed ordering strategy and doesn't compare it to other potential methods.
- What evidence would resolve it: A controlled experiment comparing different attribute ordering strategies (e.g., based on affected area, semantic importance, or user-defined preferences) on generation quality and editing accuracy metrics.

### Open Question 2
- Question: How does the hierarchical text description approach generalize to other domains beyond fashion, such as interior design or product design?
- Basis in paper: [explicit] The paper suggests that the idea of drawing analogy between the full design pipeline and the denoising process could inspire work in other domains.
- Why unresolved: The paper only demonstrates the approach on fashion design and doesn't explore its applicability to other design domains.
- What evidence would resolve it: Applying the hierarchical text description and multi-stage diffusion approach to other design domains (e.g., interior design, product design) and comparing the results to existing methods in those domains.

### Open Question 3
- Question: What is the optimal balance between high-level concepts and low-level attributes in the hierarchical text descriptions for achieving the best generation and editing results?
- Basis in paper: [inferred] The paper uses a specific number of high-level concepts and low-level attributes, but doesn't explore how varying this balance affects performance.
- Why unresolved: The paper doesn't systematically vary the number or complexity of high-level concepts and low-level attributes in the text descriptions.
- What evidence would resolve it: A study varying the number and complexity of high-level concepts and low-level attributes in the text descriptions and measuring the impact on generation quality and editing accuracy metrics.

## Limitations

- Framework is specialized for fashion design and may not generalize to other domains requiring hierarchical attribute control
- Limited attribute diversity (five apparel attributes) restricts the scope of achievable edits
- No quantitative comparison of generation speed between single-stage and two-stage approaches
- Pose conditioning mechanism adds computational overhead without clear efficiency analysis

## Confidence

**Confidence: Medium** - The paper shows promising results with FID scores of 10.27 and CLIP-S scores of 30.61, but the evaluation is limited to a relatively small dataset (5,200 images) and five apparel attributes.

**Confidence: Medium** - While the body part mask approach for localized editing is innovative, the method relies on accurate pose detection and segmentation, which may not generalize well to complex poses or occlusions.

**Confidence: Low** - The hierarchical text conditioning mechanism, while theoretically sound, lacks ablation studies demonstrating the necessity of progressive prompt concatenation versus alternative conditioning strategies.

## Next Checks

1. **Ablation study on attribute ordering**: Systematically test different orderings of the five apparel attributes to empirically validate whether ordering by "influenced area size" is optimal, or if other criteria (semantic importance, edit difficulty) yield better results.

2. **Cross-domain generalization test**: Apply the hierarchical diffusion framework to a different domain (e.g., furniture design or architectural visualization) with hierarchical attributes to assess whether the two-stage decomposition generalizes beyond fashion.

3. **Robustness evaluation under mask failure**: Intentionally corrupt body part masks with varying levels of noise and measure the degradation in editing quality to quantify the reliability of the mask-based preservation mechanism and identify failure thresholds.