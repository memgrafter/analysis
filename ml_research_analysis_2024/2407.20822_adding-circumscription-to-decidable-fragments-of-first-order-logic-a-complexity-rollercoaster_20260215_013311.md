---
ver: rpa2
title: 'Adding Circumscription to Decidable Fragments of First-Order Logic: A Complexity
  Rollercoaster'
arxiv_id: '2407.20822'
source_url: https://arxiv.org/abs/2407.20822
tags:
- such
- then
- every
- which
- lemma
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: "This paper studies extensions of decidable fragments of first-order\
  \ logic with circumscription, focusing on FO\xB2, its extension C\xB2 with counting\
  \ quantifiers, and the guarded fragment GF. The key result is that when only unary\
  \ predicates are minimized during circumscription, decidability of logical consequence\
  \ is preserved."
---

# Adding Circumscription to Decidable Fragments of First-Order Logic: A Complexity Rollercoaster

## Quick Facts
- arXiv ID: 2407.20822
- Source URL: https://arxiv.org/abs/2407.20822
- Reference count: 40
- This paper studies extensions of decidable fragments of first-order logic with circumscription, focusing on FO², C² with counting quantifiers, and the guarded fragment GF.

## Executive Summary
This paper investigates how adding circumscription to decidable fragments of first-order logic affects decidability and complexity. The main result is that when only unary predicates are minimized during circumscription, decidability of logical consequence is preserved for FO² and GF. However, the complexity increases significantly: for FO² from coNEXP to coNEXP^NP-complete, and for GF from 2EXP to TOWER-complete. The paper also studies circumscribed querying, showing that it is decidable for unions of conjunctive queries with TOWER-complete combined complexity. The key technical contribution involves adapting finite model constructions from the literature to satisfy additional properties needed for the circumscribed case.

## Method Summary
The authors use finite model constructions adapted from the literature (Grädel et al. for FO² and Rosati cover for GF) to establish decidability results. These constructions are modified to satisfy Property (♡), ensuring the number of instances of each unary type does not increase during circumscription. For complexity analysis, they employ brute-force enumeration of models up to certain size bounds combined with NP oracle checks for CP-minimality in FO². For GF, they develop a mosaic-based approach for UCQ-querying that exploits the forest-like structure of countermodels when unraveled from a core part. The approach for C² leverages BAPA (Boolean Algebra with Presburger Arithmetic) to handle counting quantifiers.

## Key Results
- Adding circumscription while minimizing only unary predicates preserves decidability of logical consequence for FO² and GF
- Complexity increases from coNEXP to coNEXP^NP-complete for FO² and from 2EXP to TOWER-complete for GF
- Circumscribed UCQ-querying in GF is decidable, TOWER-complete in combined complexity, and elementary in data complexity
- The complexity of circumscribed consequence in C² remains an open question

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Extending FO² with circumscription while minimizing only unary predicates preserves decidability and increases complexity from coNEXP to coNEXP^NP-complete.
- Mechanism: The proof constructs finite models satisfying Property (♡), ensuring the number of instances of each unary type does not increase, then uses an NP oracle to verify CP-minimality.
- Core assumption: The Scott normal form conversion and the modified finite model construction from Grädel et al. (1997) can be adapted to satisfy the additional cardinality constraint.
- Evidence anchors:
  - [abstract] "For FO² the complexity increases from coNEXP to coNEXP^NP-complete"
  - [section 3] Proposition 1 and Proposition 2 show the finite model property with cardinality bounds and use NP oracle for CP-minimality.
- Break condition: If the modified construction fails to preserve Property (♡) or the NP check cannot be implemented in time polynomial in the model size.

### Mechanism 2
- Claim: Extending GF with circumscription while minimizing only unary predicates preserves decidability but increases complexity from 2EXP to TOWER-complete.
- Mechanism: A modified Rosati cover is used to build finite models satisfying Property (♡), and the non-elementary size of these models leads to TOWER-hardness.
- Core assumption: The Rosati cover can be adapted to leave untouched a selected part of the original model while maintaining the cardinality constraint.
- Evidence anchors:
  - [abstract] "for GF it (remarkably!) increases from 2EXP to TOWER-complete"
  - [section 4.1] Proposition 3 and Lemma 1 show the modified Rosati cover construction and the TOWER complexity bound.
- Break condition: If the modified Rosati cover construction yields models of elementary size or the cardinality constraint cannot be maintained.

### Mechanism 3
- Claim: Circumscribed querying in GF is decidable, TOWER-complete in combined complexity, and elementary in data complexity, with no uniform bound on the elementary class.
- Mechanism: A mosaic-based approach is used to assemble countermodels, exploiting the fact that countermodels have a forest-like shape when unraveled from a core part.
- Core assumption: The mosaic approach can effectively capture the structure of countermodels while respecting the circumscription pattern.
- Evidence anchors:
  - [abstract] "querying circumscribed knowledge bases ... showing that the problem is decidable for unions of conjunctive queries, TOWER-complete in combined complexity, and elementary in data complexity"
  - [section 4.2] Theorem 5 and the mosaic-based algorithm description.
- Break condition: If the mosaic approach fails to capture all possible countermodels or the unraveling process cannot be implemented efficiently.

## Foundational Learning

- Concept: Scott normal form
  - Why needed here: Scott normal form is used to convert FO2 and GF sentences into a form that facilitates the finite model construction and the application of Property (♡).
  - Quick check question: What is the shape of a Scott normal form sentence in GF?

- Concept: Guarded fragment and guarded unraveling
  - Why needed here: The guarded fragment is the main focus of the complexity analysis, and guarded unraveling is used to transform models into a forest-like shape for the mosaic-based approach.
  - Quick check question: What is the key difference between guarded and unguarded quantification in FO?

- Concept: Circumscription patterns and CP-minimality
  - Why needed here: Circumscription patterns specify which predicates are minimized, fixed, or varying, and CP-minimality is the key property that needs to be checked in the complexity analysis.
  - Quick check question: What are the three components of a circumscription pattern?

## Architecture Onboarding

- Component map: Finite model construction (modified Grädel/Rosati cover) -> NP oracle for CP-minimality -> Complexity analysis
- Critical path: For circumscribed consequence, the critical path is the finite model construction followed by the NP oracle check. For circumscribed querying, the critical path is the mosaic-based algorithm.
- Design tradeoffs: The choice of finite model construction (modified Grädel vs. modified Rosati cover) affects the complexity bounds and the applicability of Property (♡). The mosaic-based approach trades off expressiveness for decidability.
- Failure signatures: If the finite model construction fails to produce models of the required size or satisfying Property (♡), or if the NP oracle check cannot be implemented efficiently, the approach breaks down.
- First 3 experiments:
  1. Implement the modified finite model construction for FO2 and verify that it produces models satisfying Property (♡) and the cardinality bounds.
  2. Implement the NP oracle for CP-minimality checking and verify that it runs in time polynomial in the model size.
  3. Implement the mosaic-based algorithm for circumscribed querying in GF and verify that it correctly identifies countermodels and respects the circumscription pattern.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: What is the exact complexity of circumscribed consequence in C2?
- Basis in paper: [explicit] The paper states that circumscribed consequence and AQ-querying in C2 are decidable, but the complexity remains open. The authors speculate it might be brought down to CONEXP NP using techniques from (Pratt-Hartmann 2005).
- Why unresolved: While decidability is established using BAPA, the specific complexity class has not been determined.
- What evidence would resolve it: A formal proof showing either CONEXP NP-completeness or establishing a different complexity class for circumscribed consequence in C2.

### Open Question 2
- Question: What is the complexity of circumscribed consequence in GF with only a single minimized predicate or with multiple such predicates but no preference order?
- Basis in paper: [explicit] The paper establishes TOWER-hardness for GF with multiple minimized predicates and a preference order, but leaves open the complexity for the restricted cases.
- Why unresolved: The current lower bound proofs rely on the preference order to create exponentially long tapes, which is not possible with a single minimized predicate.
- What evidence would resolve it: A formal proof showing either a matching upper bound (e.g., k-EXP for some k) or a stronger lower bound for these restricted cases.

### Open Question 3
- Question: Is circumscribed UCQ-querying in GF finitely controllable?
- Basis in paper: [inferred] The paper shows that for every fixed ontology O, query q, and circumscription pattern CP, querying is in k-EXP for some k, but k cannot be uniformly bounded. This suggests finite controllability might not hold.
- Why unresolved: While individual cases are in k-EXP, the lack of a uniform bound suggests the problem might not be finitely controllable in general.
- What evidence would resolve it: Either a proof that there exists a uniform bound on k for all O, q, and CP, or a construction showing that no such uniform bound exists.

### Open Question 4
- Question: What is the complexity of circumscribed querying with less expressive classes of existential rules such as inclusion dependencies?
- Basis in paper: [explicit] The paper mentions this as an open question, noting that it's unclear how the complexity results extend to these less expressive rule languages.
- Why unresolved: The current complexity results are established for guarded existential rules, and it's not clear how the techniques would adapt to weaker rule languages.
- What evidence would resolve it: Complexity results (upper and/or lower bounds) for circumscribed querying with inclusion dependencies or other classes of existential rules.

### Open Question 5
- Question: Is circumscribed consequence decidable in the unary/ guarded negation fragments of FO?
- Basis in paper: [explicit] The paper mentions this as an open question, noting that while satisfiability in the guarded negation fragment is reducible to UCQ-querying in GF, this reduction relies on techniques that cannot be applied in presence of circumscription.
- Why unresolved: The reduction from satisfiability in guarded negation to UCQ-querying in GF uses treeifications of subformulas, which interact poorly with circumscription.
- What evidence would resolve it: Either a proof of decidability for circumscribed consequence in these fragments, or a proof that it's undecidable.

## Limitations

- The complexity of circumscribed consequence in C² remains an open question
- The non-elementary complexity bounds for GF with circumscription may limit practical applicability
- The mosaic-based approach for UCQ-querying depends on complex constructions that may be challenging to implement correctly

## Confidence

**High Confidence**: The preservation of decidability when minimizing only unary predicates in FO² and GF, and the complexity increase from coNEXP to coNEXP^NP-complete for FO².

**Medium Confidence**: The TOWER-hardness result for GF with circumscription and the decidability of UCQ-querying in GF, as these depend on more complex constructions.

**Low Confidence**: The complexity of C² with circumscription, as this remains an open question in the paper.

## Next Checks

1. **Implement and verify the modified Rosati cover construction**: Create a concrete implementation of the modified Rosati cover for GF and verify that it consistently produces models satisfying Property (♡) and the required cardinality bounds.

2. **Implement the NP oracle for CP-minimality**: Develop and test an NP oracle implementation for checking CP-minimality in FO² models, ensuring it runs in time polynomial in the model size.

3. **Validate the mosaic-based algorithm for UCQ-querying**: Implement the mosaic-based approach for UCQ-querying in GF and conduct experiments to verify its correctness and efficiency across various query patterns and database sizes.