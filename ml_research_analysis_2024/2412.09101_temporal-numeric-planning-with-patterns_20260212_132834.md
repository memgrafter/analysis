---
ver: rpa2
title: Temporal Numeric Planning with Patterns
arxiv_id: '2412.09101'
source_url: https://arxiv.org/abs/2412.09101
tags:
- action
- actions
- encoding
- each
- pattern
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper extends the Symbolic Pattern Planning (SPP) approach
  to handle temporal numeric planning problems expressed in PDDL 2.1 level 3. The
  authors develop an SMT encoding that is correct and complete, leveraging pattern-based
  representations to capture action sequences and their temporal relationships.
---

# Temporal Numeric Planning with Patterns

## Quick Facts
- arXiv ID: 2412.09101
- Source URL: https://arxiv.org/abs/2412.09101
- Reference count: 18
- Primary result: PATTY T achieves highest coverage (157/200 problems) on temporal numeric planning domains compared to other symbolic and search-based planners

## Executive Summary
This paper extends the Symbolic Pattern Planning (SPP) approach to handle temporal numeric planning problems expressed in PDDL 2.1 level 3. The authors develop an SMT encoding that is correct and complete, leveraging pattern-based representations to capture action sequences and their temporal relationships. The encoding generalizes the recent pattern approach from numeric to temporal domains by incorporating durative actions, concurrency constraints, and numeric effects. Experiments on 10 domains requiring concurrency show that PATTY T outperforms competing planners in both coverage and solution quality.

## Method Summary
The authors extend SPP to temporal numeric planning by developing an SMT encoding using pattern ≺-encodings with sets of variables for states, actions, and times. The encoding defines executability and frame axioms, and enforces temporal constraints like ǫ-separation and no-self-overlapping. The approach uses pattern variables representing the number of times an action is executed and the time at which it is executed, allowing for the combination of multiple effects on the same variable by different actions. The method is implemented in PATTY T, which uses Z3 v4.8.7 as the underlying SMT solver.

## Key Results
- PATTY T achieves 157/200 coverage across 10 temporal numeric planning domains
- PATTY T outperforms ANML SMT, ITSAT, OPTIC, LPG, and TFD planners in both coverage and solution quality
- The pattern-based encoding maintains correctness and completeness while providing lower bounds on all problems than competing approaches

## Why This Works (Mechanism)

### Mechanism 1
- Claim: The pattern-based encoding reduces the search space by allowing multiple executions of the same action in a single step
- Mechanism: By generalizing the R and R2∃ encodings to the temporal numeric setting, the pattern-based encoding allows consecutive executions of durative actions, even if they are in mutex or have contradictory effects
- Core assumption: The pattern-based encoding maintains correctness and completeness while reducing the search space
- Evidence anchors:
  - [abstract] The paper states that the pattern-based encoding is correct and complete, and that it dominates the standard encoding in terms of performance
  - [section] The paper provides a detailed explanation of the pattern-based encoding and how it extends the SPP approach to the temporal numeric setting
- Break condition: The pattern-based encoding may not be effective if the pattern used is not complete or if the durative actions are not eligible for rolling

### Mechanism 2
- Claim: The pattern-based encoding enforces temporal constraints, such as ǫ-separation and no-self-overlapping, which are necessary for valid temporal plans
- Mechanism: The pattern-based encoding includes constraints that ensure that actions are executed at the correct times and that they do not overlap in time
- Core assumption: The temporal constraints are necessary for valid temporal plans and can be effectively enforced through the pattern-based encoding
- Evidence anchors:
  - [abstract] The paper states that the pattern-based encoding enforces temporal constraints like ǫ-separation and no-self-overlapping
  - [section] The paper provides a detailed explanation of the pattern time encoding formula and how it enforces temporal constraints
- Break condition: The pattern-based encoding may not be effective if the temporal constraints are not properly enforced or if the durative actions have complex temporal relationships

### Mechanism 3
- Claim: The pattern-based encoding allows for the combination of multiple effects on the same variable by different actions
- Mechanism: The pattern-based encoding includes frame axioms that allow for the combination of multiple effects on the same variable by different actions
- Core assumption: The combination of multiple effects on the same variable by different actions is necessary for valid temporal plans and can be effectively achieved through the pattern-based encoding
- Evidence anchors:
  - [abstract] The paper states that the pattern-based encoding allows for the combination of multiple effects on the same variable by different actions
  - [section] The paper provides a detailed explanation of the pattern state encoding formula and how it combines multiple effects on the same variable
- Break condition: The pattern-based encoding may not be effective if the effects of the actions are not properly combined or if the durative actions have complex effects

## Foundational Learning

- Concept: PDDL 2.1 level 3
  - Why needed here: The paper extends the SPP approach to handle temporal numeric planning problems expressed in PDDL 2.1 level 3
  - Quick check question: What are the key features of PDDL 2.1 level 3 that distinguish it from other levels?

- Concept: Durative actions
  - Why needed here: The paper considers only durative actions, as snap actions can be treated as durative actions without lasting and ending actions
  - Quick check question: What is the difference between durative actions and snap actions in PDDL 2.1 level 3?

- Concept: Mutex actions
  - Why needed here: The paper defines mutex actions and how they affect the execution of actions in a temporal plan
  - Quick check question: What are the conditions under which two actions are considered mutex in PDDL 2.1 level 3?

## Architecture Onboarding

- Component map: Pattern definition -> Pattern variables and time variables -> Pattern state encoding formula -> Pattern time encoding formula -> SMT solver
- Critical path: The critical path for generating a valid temporal plan using the pattern-based encoding is: define the pattern, generate the pattern variables and time variables, apply the pattern state encoding formula, apply the pattern time encoding formula, and solve the resulting SMT formula
- Design tradeoffs: The pattern-based encoding trades off between the complexity of the encoding and the performance of the solver. The encoding is more complex than standard encodings, but it allows for more efficient solving
- Failure signatures: The pattern-based encoding may fail if the pattern used is not complete, if the durative actions are not eligible for rolling, or if the temporal constraints are not properly enforced
- First 3 experiments:
  1. Test the pattern-based encoding on a simple temporal numeric planning problem with a small number of actions and variables
  2. Test the pattern-based encoding on a temporal numeric planning problem with required concurrency
  3. Test the pattern-based encoding on a temporal numeric planning problem with complex temporal relationships between actions

## Open Questions the Paper Calls Out

- **Open Question 1**: How does the pattern encoding scale with increasingly complex temporal numeric domains requiring higher concurrency?
  - Basis in paper: [explicit] The authors compare their approach to other planners on 10 domains with required concurrency, but don't explore scaling beyond these domains
  - Why unresolved: The paper focuses on a fixed set of 10 benchmark domains without exploring how performance changes as problem complexity increases
  - What evidence would resolve it: Experimental results on larger, more complex temporal numeric domains with varying levels of required concurrency would show the encoding's scalability limits

- **Open Question 2**: Can the pattern approach be extended to handle temporal numeric planning with uncertainty or probabilistic effects?
  - Basis in paper: [inferred] The paper focuses on deterministic temporal numeric planning, but uncertainty is a common feature in real-world planning problems
  - Why unresolved: The authors don't address uncertainty or probabilistic effects, which would require significant modifications to the pattern encoding approach
  - What evidence would resolve it: A modified pattern encoding that incorporates probabilistic effects and uncertainty handling, with experimental validation on uncertain temporal numeric domains

- **Open Question 3**: How does the choice of pattern generation strategy impact the performance of the temporal numeric planner?
  - Basis in paper: [explicit] The authors mention using the Asymptotic Relaxed Planning Graph for pattern generation, but don't explore alternative strategies
  - Why unresolved: The paper uses a single pattern generation approach without comparing it to other possible strategies or analyzing its impact on performance
  - What evidence would resolve it: Experimental comparison of different pattern generation strategies (e.g., heuristic-based, learning-based) and their impact on planner performance across various domains

## Limitations

- The empirical validation covers only 10 domains with 200 problems total, which may not be representative of all temporal numeric planning scenarios
- The paper does not provide detailed analysis of solver performance on different problem classes or investigate the impact of different pattern choices on solution quality
- The temporal constraints (ǫ-separation and no-self-overlapping) are handled through the SMT encoding, but the paper does not explore edge cases where these constraints might lead to unsolvability or performance degradation

## Confidence

- **High confidence**: The correctness and completeness of the SMT encoding (Theorem 3.1 and Theorem 3.2) - these are formally proven with clear mathematical definitions
- **Medium confidence**: The experimental results showing PATTY T's superiority - while the methodology appears sound, the limited domain coverage reduces generalizability
- **Medium confidence**: The claim that the pattern-based encoding dominates standard encodings - supported by theoretical analysis but requires broader empirical validation

## Next Checks

1. **Pattern sensitivity analysis**: Test PATTY T on the same 200 problems using different pattern definitions (e.g., varying levels of completeness) to quantify the impact of pattern choice on coverage and solving time
2. **Stress testing on edge cases**: Construct specific temporal numeric planning problems that push the limits of the ǫ-separation and no-self-overlapping constraints to identify potential failure modes
3. **Comparative scaling analysis**: Evaluate PATTY T's performance on increasingly larger problem instances within the 10 domains to understand the solver's scalability characteristics and identify the point where alternative approaches might become competitive