---
ver: rpa2
title: Large-Scale Multipurpose Benchmark Datasets For Assessing Data-Driven Deep
  Learning Approaches For Water Distribution Networks
arxiv_id: '2404.15386'
source_url: https://arxiv.org/abs/2404.15386
tags:
- data
- wdns
- demand
- guration
- parameter
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This work addresses the scarcity of large-scale, ready-to-use datasets
  for training and evaluating data-driven deep learning models in Water Distribution
  Networks (WDNs). Instead of providing only configuration files, the authors generated
  and shared a dataset of 1,394,400 hours of simulated WDN data across 10 public networks
  (Anytown, Modena, Balerma, C-Town, D-Town, L-Town, Ky1, Ky6, Ky8, and Ky13).
---

# Large-Scale Multipurpose Benchmark Datasets For Assessing Data-Driven Deep Learning Approaches For Water Distribution Networks

## Quick Facts
- arXiv ID: 2404.15386
- Source URL: https://arxiv.org/abs/2404.15386
- Authors: Andres Tello; Huy Truong; Alexander Lazovik; Victoria Degeler
- Reference count: 0
- Key outcome: Generated and shared a dataset of 1,394,400 hours of simulated WDN data across 10 public networks to address the scarcity of large-scale, ready-to-use datasets for training and evaluating data-driven deep learning models in Water Distribution Networks.

## Executive Summary
This work addresses the critical gap in large-scale, ready-to-use datasets for training and evaluating data-driven deep learning models in Water Distribution Networks (WDNs). The authors generated and shared a dataset of 1,394,400 hours of simulated WDN data across 10 public networks, implementing a semi-automatic sampling strategy with demand pattern generation and pressure validation rules. The resulting data spans broader demand and pressure ranges than baseline networks, enabling more robust model training for tasks like state estimation, demand forecasting, and surrogate modeling. A compressed 50 GB dataset and a smaller 1,000-scenario subset are made publicly available.

## Method Summary
The authors implemented a semi-automatic sampling strategy with demand pattern generation and pressure validation rules to generate a large-scale dataset for Water Distribution Networks. They used 10 public WDNs and ran parallel simulations via WNTR to produce inputs and outputs such as pressure, flow, and velocity. The dataset spans broader demand and pressure ranges than baseline networks, and both input parameters and output simulation data were encoded and encapsulated by Zarr for efficient storage and access.

## Key Results
- Generated a dataset of 1,394,400 hours of simulated WDN data across 10 public networks
- Dataset spans broader demand and pressure ranges than baseline networks
- Compressed 50 GB dataset and a smaller 1,000-scenario subset are publicly available

## Why This Works (Mechanism)

### Mechanism 1
The semi-automatic sampling strategy with demand pattern generation and pressure validation rules produces a more diverse and realistic dataset than existing configuration-only approaches. By automatically generating different 24-hour time-series demands for each node and enforcing pressure range validation [0, 151], the method avoids unrealistic repetition of demand patterns across nodes and ensures stable simulation states. The core assumption is that random sampling within bounded parameter ranges, combined with validation rules, will yield enough valid scenarios without excessive computational waste. If the acceptable success ratio falls below 40%, the algorithm may revert to default values, limiting dataset diversity.

### Mechanism 2
The 10× node-count sampling rule balances dataset size and computational feasibility across networks of varying complexity. By generating 10 times as many scenarios as nodes in each network, the dataset ensures sufficient coverage for training while avoiding excessive computational burden. The core assumption is that a linear scaling rule (10× nodes) is sufficient to capture the variability needed for robust model training across different WDN sizes. If certain networks require more complex topologies, 10× may be insufficient, leading to under-representation of rare but important scenarios.

### Mechanism 3
Parallel simulation via WNTR with chunked Zarr storage enables efficient generation and sharing of large-scale datasets. Running simulations in parallel batches of 64 on a 32-CPU cluster, then encoding results with Zarr compression, allows generation of 1.4 million hours of data within days and facilitates easy access. The core assumption is that the computational infrastructure (32 CPUs, parallel processing) is available and cost-effective for generating and storing the dataset. If hardware resources are limited or parallelization fails, dataset generation time may become prohibitive.

## Foundational Learning

- Concept: Water Distribution Network (WDN) hydraulics and simulation
  - Why needed here: Understanding pressure, flow, and demand relationships is essential for interpreting the dataset and designing models
  - Quick check question: What physical law governs the relationship between pressure drop and flow in pipes?

- Concept: Demand pattern generation and time-series data
  - Why needed here: The dataset's value comes from realistic, varied demand patterns; understanding how these are generated is key to using the data properly
  - Quick check question: How does assigning different demand patterns to each node improve model robustness compared to reusing the same pattern?

- Concept: Data validation and quality control
  - Why needed here: The dataset includes validation rules; understanding these helps assess data quality and appropriate use cases
  - Quick check question: Why is it important to restrict pressure values within a specific range during simulation?

## Architecture Onboarding

- Component map: WDN configuration files (INP format) -> Parameter extraction and filtering -> Demand pattern generation -> Simulation execution via WNTR -> Pressure range checking -> Zarr-compressed arrays containing input parameters and simulation outputs

- Critical path:
  1. Load WDN configuration
  2. Extract and filter hydraulic parameters
  3. Generate demand patterns
  4. Sample parameter space within boundaries
  5. Run parallel WNTR simulations
  6. Validate pressure outputs
  7. Store valid scenarios in Zarr format

- Design tradeoffs:
  - Dataset size vs. computational cost (10× nodes rule)
  - Parameter range breadth vs. simulation success rate
  - Data compression vs. accessibility (Zarr vs. CSV)

- Failure signatures:
  - Zero valid scenarios for a network (parameter boundaries too restrictive)
  - Excessive storage requirements (insufficient compression)
  - Unrealistic demand patterns (random generation not constrained enough)

- First 3 experiments:
  1. Load a single WDN configuration and run 10 simulations with default parameters to verify basic functionality
  2. Generate demand patterns for one network and visualize to check for realistic variation
  3. Run a small batch of 50 simulations for one network and check pressure validation success rate

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does the demand pattern generation method scale to larger WDNs with more than 1,000 nodes?
- Basis in paper: [explicit] The authors mention the demand pattern generation method but do not evaluate its performance or limitations on larger networks.
- Why unresolved: The paper only tests the method on networks up to 1,325 nodes, leaving uncertainty about its applicability to much larger systems.
- What evidence would resolve it: Testing the demand pattern generation method on WDNs with 10,000+ nodes and comparing the results to smaller networks.

### Open Question 2
- Question: What is the impact of the semi-automatic algorithm's default acceptance ratio (40-60%) on the diversity of generated scenarios?
- Basis in paper: [explicit] The authors mention using a 40-60% acceptance ratio but do not analyze how this threshold affects scenario diversity.
- Why unresolved: The paper does not provide data on scenario diversity across different acceptance ratios or discuss potential trade-offs.
- What evidence would resolve it: Comparative analysis of scenario diversity using different acceptance ratios (e.g., 20-40%, 40-60%, 60-80%) and their effects on model performance.

### Open Question 3
- Question: How do the synthetic pressure and demand distributions compare to real-world WDN data?
- Basis in paper: [inferred] The authors compare their generated data to baseline WDNs but do not validate against actual operational data from real water distribution networks.
- Why unresolved: Without real-world data comparison, it's unclear if the synthetic data accurately represents actual WDN operating conditions.
- What evidence would resolve it: Statistical comparison of pressure and demand distributions between the synthetic dataset and operational data from multiple real WDNs.

## Limitations
- The 10× nodes sampling rule appears reasonable but lacks rigorous justification
- The pressure validation range [0, 151] is adopted from literature but may not be universally applicable
- Claim of enhanced dataset diversity is supported by qualitative statements but lacks quantitative comparisons to existing datasets

## Confidence
- Dataset generation methodology: Medium
- Dataset utility for deep learning: Medium
- Computational scalability: Low

## Next Checks
1. Verify that pressure validation rules [0, 151] are appropriate for all 10 networks by checking distribution of simulated pressures against physical constraints
2. Test the 10× nodes sampling rule on a new WDN not in the dataset to determine if it produces sufficient scenario diversity
3. Attempt to reproduce the dataset generation for a small network (e.g., Anytown) using the described methodology to identify potential implementation challenges