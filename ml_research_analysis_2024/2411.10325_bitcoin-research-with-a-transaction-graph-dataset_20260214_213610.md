---
ver: rpa2
title: Bitcoin Research with a Transaction Graph Dataset
arxiv_id: '2411.10325'
source_url: https://arxiv.org/abs/2411.10325
tags:
- bitcoin
- transaction
- addresses
- transactions
- graph
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This work presents the largest publicly available dataset of Bitcoin
  transactions in the form of a graph with 252 million nodes and 785 million edges,
  covering nearly 13 years of data. The dataset includes labeled nodes (33K) and addresses
  (100K) for entity type prediction tasks, along with 14 million BitcoinTalk forum
  posts.
---

# Bitcoin Research with a Transaction Graph Dataset

## Quick Facts
- arXiv ID: 2411.10325
- Source URL: https://arxiv.org/abs/2411.10325
- Reference count: 29
- Primary result: Largest publicly available Bitcoin transaction graph with 252M nodes and 785M edges, achieving 0.63-0.64 macro-F1 scores for entity type prediction

## Executive Summary
This work presents the largest publicly available dataset of Bitcoin transactions in the form of a graph with 252 million nodes and 785 million edges, covering nearly 13 years of data. The dataset includes labeled nodes (33K) and addresses (100K) for entity type prediction tasks, along with 14 million BitcoinTalk forum posts. Various graph neural networks were trained to predict node labels, achieving macro-F1 scores of 0.63-0.64, establishing baselines for future research. The dataset enables advanced analysis of Bitcoin transaction patterns, entity interactions, and graph evolution over time.

## Method Summary
The researchers constructed a Bitcoin transaction graph by processing blockchain data using a Bitcoin Core node, clustering Bitcoin scripts into entities using established heuristics, and creating nodes and edges based on transaction patterns. Node labels were assigned by combining on-chain data with off-chain contextual information from BitcoinTalk forum posts analyzed using ChatGPT, supplemented with external datasets. The graph data was stored in a PostgreSQL database and used to train various graph neural networks (GCN, GraphSage, GAT, GIN) and a Gradient Boosting Classifier for entity type prediction tasks.

## Key Results
- Largest publicly available Bitcoin transaction graph with 252 million nodes and 785 million edges
- Achieved macro-F1 scores of 0.63-0.64 for entity type prediction using graph neural networks
- Established baselines for future research with 33K labeled nodes and 100K labeled addresses
- Included 14 million BitcoinTalk forum posts for contextual analysis

## Why This Works (Mechanism)

### Mechanism 1
- Claim: The transaction graph is constructed by mapping Bitcoin scripts to real-world entities using heuristic clustering.
- Mechanism: Bitcoin transactions involve multiple input and output scripts (addresses). By applying heuristics that leverage common user behaviors—such as shared ownership patterns and transaction structures—scripts belonging to the same real-world entity are clustered together. These clusters become the nodes in the graph, with edges representing value transfers between entities.
- Core assumption: User behavior patterns and biases can be reliably detected and used to cluster scripts accurately.
- Evidence anchors:
  - [abstract] "The graph includes 252 million nodes and 785 million edges, covering a time span of nearly 13 years..."
  - [section] "To achieve this, we employed heuristics developed in previous research... These heuristics leverage established behavioral patterns and habits of Bitcoin users..."
  - [corpus] Weak evidence; corpus neighbors focus on ML applications but don't directly validate clustering heuristics.
- Break condition: If user behavior patterns change significantly or new transaction types emerge that bypass existing heuristics, the clustering accuracy would degrade.

### Mechanism 2
- Claim: Node labels are assigned by combining on-chain data with off-chain contextual information from forums and other sources.
- Mechanism: The system uses ChatGPT to analyze textual context from BitcoinTalk forum posts where addresses are mentioned. By understanding the discussion around an address (e.g., a user mentioning depositing to an exchange), the system can infer the entity type. This is supplemented with data from other sources like exchange address lists and ransomware datasets.
- Core assumption: The textual context in forum posts reliably indicates the entity type associated with an address.
- Evidence anchors:
  - [abstract] "As for supervised tasks we provide two labeled sets i. a 33,000 nodes based on entity type and ii. nearly 100,000 Bitcoin addresses labeled with an entity name and an entity type."
  - [section] "We utilized ChatGPT (model 'gpt-4o-mini') via API calls for this purpose... The first script is designed to detect Bitcoin deposits from customers to a service..."
  - [corpus] No direct evidence in corpus neighbors; the focus is on ML models rather than labeling methodology.
- Break condition: If forum discussions become less informative, more ambiguous, or if ChatGPT's performance degrades, labeling accuracy would decrease.

### Mechanism 3
- Claim: Graph neural networks can effectively predict node labels using both node features and neighborhood structure.
- Mechanism: GNNs like GCN, GraphSage, GAT, and GIN are trained on the graph data. They learn representations that capture both the attributes of individual nodes (like transaction volume, degree) and the structural context from neighboring nodes. This dual perspective enables accurate classification of node types.
- Core assumption: The graph structure contains meaningful information about entity types that can be learned by GNNs.
- Evidence anchors:
  - [abstract] "Various graph neural network models are trained to predict node labels, establishing a baseline for future research."
  - [section] "The GAT and GIN models, known for their high expressiveness, achieve the best results, with macro-F1 scores of 0.64 and 0.63, respectively."
  - [corpus] Corpus includes papers like "Benchmarking GNNs Using Lightning Network Data" suggesting GNNs are applicable to Bitcoin transaction graphs.
- Break condition: If the graph structure becomes too sparse or if node features become less discriminative, GNN performance would decline.

## Foundational Learning

- Concept: Graph Neural Networks (GNNs)
  - Why needed here: GNNs are essential for learning from the transaction graph structure, capturing both node features and neighborhood relationships to predict entity types.
  - Quick check question: What is the key difference between how GNNs and traditional neural networks process data?

- Concept: Bitcoin Transaction Structure (UTXO model)
  - Why needed here: Understanding how Bitcoin transactions work (inputs, outputs, UTXOs) is crucial for interpreting the graph construction and the meaning of edges.
  - Quick check question: In a Bitcoin transaction, what happens to the input UTXOs?

- Concept: Heuristic-based Address Clustering
  - Why needed here: The method of grouping Bitcoin addresses into entities relies on heuristics that detect common user behaviors; understanding this is key to evaluating the dataset's quality.
  - Quick check question: Why can't we simply use Bitcoin addresses as nodes instead of clustering them into entities?

## Architecture Onboarding

- Component map:
  - Data Extraction: Bitcoin Core node → blockchain data files
  - Graph Construction: Script clustering → node creation, transaction parsing → edge creation
  - Labeling: ChatGPT analysis of forum posts + external datasets → node/edge labels
  - Storage: PostgreSQL database with tables for nodes, edges, and features
  - ML Pipeline: Data preprocessing → GNN training → label prediction

- Critical path: Data extraction → graph construction → labeling → storage → ML training
  The most time-consuming steps are data extraction (downloading the blockchain) and graph construction (processing 670M transactions).

- Design tradeoffs:
  - Using script clusters instead of individual addresses reduces graph size but may merge distinct entities if heuristics are imperfect.
  - Excluding CoinJoin and colored coin transactions simplifies analysis but omits some real-world activity.
  - Relying on forum data for labels introduces potential bias toward English-speaking users and services popular on BitcoinTalk.

- Failure signatures:
  - If clustering heuristics fail, nodes may represent multiple entities, leading to noisy labels.
  - If ChatGPT misinterprets forum context, labels will be incorrect.
  - If the graph is too sparse, GNNs may not learn effectively.

- First 3 experiments:
  1. Verify graph construction by checking node and edge counts against expected values (252M nodes, 785M edges).
  2. Validate labeling by sampling labeled nodes and manually checking if the assigned entity type matches the evidence from forum posts or external sources.
  3. Test GNN performance on a small subset of the graph to ensure the training pipeline works before scaling up.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How do temporal dynamics in Bitcoin transaction patterns vary across different entity types (exchange, mining, gambling, etc.)?
- Basis in paper: [explicit] The dataset includes timestamped nodes and edges, enabling temporal analysis. The paper mentions studying "evolution of the graph over time" and "changes in the number of nodes and edges" as a use case.
- Why unresolved: The paper establishes the dataset and baselines but doesn't conduct temporal analysis across entity types. This would require analyzing the temporal features in the graph to understand how different entity types evolve and interact over time.
- What evidence would resolve it: Analysis showing temporal patterns of different entity types, including peak activity periods, seasonal variations, and correlation with external events (regulatory changes, market conditions, etc.).

### Open Question 2
- Question: How effective are Graph Neural Networks compared to traditional machine learning approaches for predicting entity types in Bitcoin transaction graphs?
- Basis in paper: [explicit] The paper trains both GNNs (GCN, GraphSage, GAT, GIN) and a Gradient Boosting Classifier, achieving macro-F1 scores of 0.63-0.64 for GNNs versus 0.57 for GBC.
- Why unresolved: While the paper establishes baseline performance, it doesn't explore why GNNs perform better or investigate the specific graph structural features that contribute to prediction accuracy. The comparison is limited to one classification task.
- What evidence would resolve it: Detailed ablation studies comparing feature importance, analysis of which graph structures (neighborhoods, clustering coefficients, etc.) are most predictive, and exploration of transfer learning capabilities from pre-trained GNNs.

### Open Question 3
- Question: How representative is the labeled dataset of the overall Bitcoin transaction network, given its reliance on BitcoinTalk forum data?
- Basis in paper: [explicit] The paper acknowledges that "posts retrieved from BitcoinTalk may contain inaccuracies" and that "only fetching posts from the English-speaking part of the forum" may not be globally representative.
- Why unresolved: The paper constructs the labeled dataset using BitcoinTalk data and other sources, but doesn't quantify the potential biases or evaluate how well the labeled subset represents the broader transaction network's characteristics.
- What evidence would resolve it: Statistical comparison of labeled vs. unlabeled node distributions, analysis of whether certain entity types are over/under-represented in the labels, and evaluation of label coverage across different time periods and transaction volumes.

## Limitations
- The dataset's completeness is limited by exclusion of CoinJoin and colored coin transactions, missing significant portions of Bitcoin activity
- Labeling accuracy depends on ChatGPT analysis of forum posts, introducing potential biases toward English-speaking users and services discussed publicly
- The 33K labeled nodes represent less than 0.02% of total nodes, raising concerns about label coverage and sampling bias

## Confidence
- **High Confidence**: The transaction graph construction methodology (252M nodes, 785M edges) is well-documented and reproducible given access to the full blockchain data. The GNN training pipeline and achieved macro-F1 scores (0.63-0.64) are verifiable through the provided code and evaluation framework.
- **Medium Confidence**: The heuristic clustering approach for grouping addresses into entities is based on established research, but its accuracy in this specific implementation depends on the quality of the heuristics and their application to 13 years of evolving Bitcoin usage patterns. The labeling methodology using ChatGPT is reasonable but the exact implementation details and accuracy rates are not fully specified.
- **Low Confidence**: The dataset's completeness for representing all types of Bitcoin activity is questionable due to the exclusion of certain transaction types and the reliance on specific data sources (forum posts) that may not capture the full diversity of Bitcoin users and services.

## Next Checks
1. **Clustering Accuracy Validation**: Sample 100 clustered entities and manually verify whether the heuristic-based clustering correctly groups addresses belonging to the same real-world entity. Compare against ground truth where available (e.g., known exchange addresses).

2. **Label Quality Assessment**: Select 50 labeled nodes across different entity types and verify the accuracy of ChatGPT-based labeling by examining the original forum posts and external sources used for annotation. Calculate precision and recall for the labeling process.

3. **Dataset Completeness Audit**: Analyze the distribution of excluded transaction types (CoinJoin, colored coins) and estimate what percentage of total Bitcoin activity they represent. Cross-reference with external blockchain analysis reports to assess if the dataset captures the majority of meaningful economic activity.