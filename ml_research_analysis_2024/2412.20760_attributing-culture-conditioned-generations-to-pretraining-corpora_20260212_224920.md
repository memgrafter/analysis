---
ver: rpa2
title: Attributing Culture-Conditioned Generations to Pretraining Corpora
arxiv_id: '2412.20760'
source_url: https://arxiv.org/abs/2412.20760
tags:
- symbols
- culture
- cultures
- memorized
- association
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses cultural bias in large language model generations
  by proposing MEMO ED, a framework that attributes culture-conditioned outputs to
  memorization from pretraining corpora. MEMO ED classifies symbols generated for
  cultures as either memorized associations (grounded in pretraining data), diffuse
  associations (not specific to any culture), cross-culture generalizations (memorized
  from one culture but generated for another), or weak association generalizations
  (broader concepts inferred from memorized symbols).
---

# Attributing Culture-Conditioned Generations to Pretraining Corpora

## Quick Facts
- arXiv ID: 2412.20760
- Source URL: https://arxiv.org/abs/2412.20760
- Reference count: 40
- Key outcome: MEMO ED framework classifies culture-conditioned symbols as memorized, diffuse, cross-culture, or weak association, finding 46% of food and 26% of clothing symbols arise from memorization.

## Executive Summary
This paper addresses cultural bias in large language model generations by proposing MEMO ED, a framework that attributes culture-conditioned outputs to memorization from pretraining corpora. MEMO ED classifies symbols generated for cultures as either memorized associations (grounded in pretraining data), diffuse associations (not specific to any culture), cross-culture generalizations (memorized from one culture but generated for another), or weak association generalizations (broader concepts inferred from memorized symbols). Applied to OLMo-7B's generations for 110 cultures on food and clothing topics, MEMO ED found that 46% of food symbols and 26% of clothing symbols arise from memorization. The analysis revealed that high-frequency cultures in pretraining yield more memorized symbols, while low-frequency cultures often have none. Additionally, the model disproportionately generates high-frequency diffuse association symbols regardless of the conditioned culture, reflecting a bias toward frequent pretraining terms. The framework provides a method for tracing cultural biases in generations to underlying pretraining data imbalances.

## Method Summary
MEMO ED is a framework that classifies culture-conditioned symbols generated by language models based on their origin in pretraining corpora. The method involves two main steps: identifying contributory documents where culture and symbol tokens co-occur within a minimum distance and have high context relevance (measured by Document-Signal-to-Noise Ratio), and classifying symbols as memorized if the percentage of contributory documents is significant (z-score ≥ 2.6 or contribution score > 1/110). The framework then categorizes remaining symbols as diffuse associations (appearing in ≥55 cultures), cross-culture generalizations (memorized for one culture but generated for others), or weak association generalizations (traced to memorized/diffuse symbols via definition generation). Applied to OLMo-7B's generations for 110 cultures on food and clothing topics, MEMO ED correlates symbol types with pretraining data frequency patterns.

## Key Results
- 46% of food symbols and 26% of clothing symbols arise from memorization in OLMo-7B's culture-conditioned generations.
- High-frequency cultures in pretraining yield more memorized symbols, while low-frequency cultures often have none.
- The model disproportionately generates high-frequency diffuse association symbols regardless of the conditioned culture, reflecting a bias toward frequent pretraining terms.

## Why This Works (Mechanism)

### Mechanism 1
- Claim: MEMO ED classifies symbols generated for cultures as memorized when the culture-symbol pair co-occurs frequently in relevant pretraining documents.
- Mechanism: MEMO ED first identifies contributory documents by checking if the culture and symbol tokens appear within a minimum distance and the document has high context relevance (Document-Signal-to-Noise Ratio). It then computes a contribution score as the ratio of contributory documents to total documents containing the symbol. Memorization is determined when the z-score of this contribution score is above a threshold.
- Core assumption: Frequent co-occurrence of culture and symbol tokens in relevant pretraining documents leads to memorization by the model.
- Evidence anchors:
  - [abstract] "MEMO ED involves two steps: 1) it identifies contributory documents in the pretraining corpora for the culture-symbol association 2) it classifies the symbol as memorized if the percentage of contributory documents is significant"
  - [section 3.3] "Memorized associations are important and highly desirable because they are grounded in pretraining documents, demonstrating sufficient model memorization of the symbol-culture association during pretraining."
- Break condition: If the pretraining data lacks relevant documents where culture and symbol co-occur, or if the co-occurrence is not frequent enough to meet the z-score threshold, MEMO ED will not classify the symbol as memorized.

### Mechanism 2
- Claim: The model prioritizes generating high-frequency symbols that are not specific to any culture (diffuse associations) over memorized symbols.
- Mechanism: Diffuse associations occur when a symbol is generated for many cultures without being associated with any specific culture through pretraining document grounding. The model favors these symbols because they appear with extraordinarily high frequency in the pretraining corpora compared to other symbols.
- Core assumption: High frequency of a symbol in pretraining data increases the likelihood of the model generating it, even if not specifically relevant to the conditioned culture.
- Evidence anchors:
  - [abstract] "Additionally, the model favors generating entities with extraordinarily high frequency regardless of the conditioned culture, reflecting biases toward frequent pretraining terms irrespective of relevance."
  - [section 4.3] "We find a moderate-to-high positive correlation for both clothing (Spearman ρ = 0 .551, Kendall τ = 0 .385) and food (Spearman ρ = 0 .519, Kendall τ = 0 .385) on overshadowing ratio r (defined in Section 3.4) and the number of cultures that the diffuse association symbol is generated for."
- Break condition: If the pretraining data is balanced across cultures and symbols, or if the model is trained to prioritize relevance over frequency, the generation of diffuse association symbols may decrease.

### Mechanism 3
- Claim: Cross-culture generalization occurs when the model generates symbols memorized with one culture for another culture due to their co-occurrence in pretraining documents.
- Mechanism: The model generalizes memorized symbols from one culture to another when the two cultures co-occur in pretraining documents under certain common topics. This leads to the generation of symbols memorized for one culture being attributed to another culture.
- Core assumption: Co-occurrence of cultures in pretraining documents under common topics enables the model to generalize memorized symbols across cultures.
- Evidence anchors:
  - [abstract] "Cross-culture generalization was more common for cultures with high pretraining frequencies, while weak association generalization did not correlate significantly with pretraining patterns."
  - [section 4.4] "We hypothesize that co-occurrence of both cultures may cause memorized associations to generalize. Therefore, as case study, we perform topic modeling on a subset of symbols and cultures."
- Break condition: If cultures do not co-occur in pretraining documents, or if the co-occurrence is not under common topics, cross-culture generalization may not occur.

## Foundational Learning

- Concept: Memorization vs. Generalization in Language Models
  - Why needed here: Understanding how models learn and apply knowledge is crucial for interpreting the results of MEMO ED and the types of culture-symbol associations it identifies.
  - Quick check question: What is the difference between memorization and generalization in the context of language models, and how does each affect the generation of culture-conditioned outputs?

- Concept: Cultural Bias in Language Models
  - Why needed here: Recognizing the existence and sources of cultural bias is essential for understanding the motivation behind MEMO ED and interpreting its findings.
  - Quick check question: How can cultural bias manifest in language model generations, and what are some potential sources of this bias in pretraining data?

- Concept: Statistical Analysis of Model Outputs
  - Why needed here: Analyzing the frequency and distribution of symbols in model generations is key to identifying different types of culture-symbol associations.
  - Quick check question: What statistical methods can be used to analyze the frequency and distribution of symbols in model generations, and how can these methods help identify patterns of cultural bias?

## Architecture Onboarding

- Component map: Data Collection -> MEMO ED Framework (Contributory Document Identification -> Memorization Classification) -> Analysis (Statistical Analysis -> Human Evaluation)
- Critical path:
  1. Collect culture-conditioned generations from the model.
  2. Identify contributory documents in the pretraining corpora for each culture-symbol pair.
  3. Compute contribution scores and z-scores to classify memorization.
  4. Analyze the frequency and distribution of symbols to identify diffuse and cross-culture associations.
  5. Validate classifications through human evaluation.
- Design tradeoffs:
  - Token distance vs. context relevance: Balancing the minimum distance between culture and symbol tokens with the overall relevance of the pretraining document.
  - Z-score threshold: Setting the threshold for classifying memorization affects the sensitivity and specificity of MEMO ED.
  - Human evaluation: Incorporating human judgment adds complexity but improves the validity of the results.
- Failure signatures:
  - High false positive rate in memorization classification: May indicate that the z-score threshold is too low or that the contributory document identification is too lenient.
  - Inability to identify any memorized symbols: May suggest that the pretraining data lacks relevant culture-symbol pairs or that the minimum distance requirement is too strict.
  - Over-reliance on diffuse associations: May indicate that the model is overly biased towards high-frequency symbols or that the pretraining data is unbalanced across cultures.
- First 3 experiments:
  1. Ablation study on the z-score threshold: Vary the z-score threshold and observe its effect on the number and distribution of memorized symbols.
  2. Analysis of cross-culture generalization: Identify cases where symbols memorized for one culture are generated for another, and investigate the common topics in pretraining documents where these cultures co-occur.
  3. Human evaluation of emblematic symbols: Recruit native speakers to annotate symbols for cultural emblematicity and compare their judgments with MEMO ED's classifications.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: Does the MEMO ED framework generalize to other large language models trained on different pretraining corpora?
- Basis in paper: [explicit] The paper notes that "the same analysis could be extended to other models in future works, as long as their pretraining data is accessible."
- Why unresolved: The study is constrained by the availability of open-sourced models with searchable pretraining data, limiting the analysis to OLMo-7B and its pretraining corpora Dolma.
- What evidence would resolve it: Applying MEMO ED to other LLMs with accessible pretraining data (e.g., other open-source models) and comparing the results to those found in this study would demonstrate generalizability.

### Open Question 2
- Question: How do different sampling strategies during generation affect the attribution of culture-conditioned symbols to memorization?
- Basis in paper: [explicit] The paper conducts an ablation study on hyperparameters like temperature and top-k sampling, finding high overlap in results, but does not explore other sampling strategies or their impact on symbol attribution.
- Why unresolved: While the ablation study shows robustness to some hyperparameters, it does not address whether alternative sampling strategies (e.g., nucleus sampling with different p values, beam search) might alter the distribution of symbol types (memorized vs. diffuse vs. generalized).
- What evidence would resolve it: Systematically varying generation sampling strategies and analyzing the resulting distributions of symbol types would reveal whether sampling affects attribution patterns.

### Open Question 3
- Question: What is the causal relationship between pretraining document frequency and the model's ability to memorize culture-specific symbols?
- Basis in paper: [explicit] The paper finds strong correlations between pretraining document frequency and memorization, but correlation does not imply causation. It notes that "memorization requires the knowledge to appear within intervals shorter than the forgetting interval," but does not experimentally manipulate pretraining data frequency to observe direct effects.
- Why unresolved: The study is observational, relying on existing data patterns, and does not experimentally control pretraining frequency to isolate its causal impact on memorization.
- What evidence would resolve it: Conducting controlled experiments by training models on curated datasets with varying frequencies of culture-specific symbols, and measuring subsequent memorization in generations, would establish causality.

## Limitations
- The framework may undercount memorized associations for low-frequency cultures with sparse pretraining data, potentially biasing results toward high-frequency cultures.
- The z-score threshold of 2.6 for memorization classification may not be optimal across all culture-symbol pairs and could lead to false positives or negatives.
- The ability to distinguish between cross-culture generalization and weak association generalization depends on the accuracy of definition-based expansion, which may not capture all nuanced cultural associations.

## Confidence
- **High Confidence:** The finding that 46% of food symbols and 26% of clothing symbols arise from memorization is well-supported by the methodology and statistical analysis presented. The correlation between pretraining frequency and memorized symbol generation is also robust.
- **Medium Confidence:** The identification of diffuse associations and their correlation with high-frequency symbols is reasonably supported, though the threshold of 55 cultures for diffuse classification may be somewhat arbitrary. The observation that the model disproportionately generates high-frequency diffuse association symbols regardless of conditioned culture is well-supported.
- **Low Confidence:** The cross-culture generalization analysis, particularly the topic modeling case study, provides suggestive evidence but lacks comprehensive validation. The weak association generalization category is particularly uncertain as it relies on definition expansion, which may not capture all relevant cultural associations.

## Next Checks
1. Conduct an ablation study varying the z-score threshold (2.0, 2.6, 3.0) to assess its impact on memorization classification across different culture frequencies and identify optimal thresholds for different cultural contexts.
2. Perform a human evaluation study with native speakers annotating a subset of culture-symbol pairs to validate MEMO ED's classifications, particularly for cross-culture and weak association generalizations where automated detection may be less reliable.
3. Analyze the impact of pretraining data coverage by systematically removing documents for high-frequency cultures and observing how this affects the distribution of memorized versus non-memorized symbols for those cultures.