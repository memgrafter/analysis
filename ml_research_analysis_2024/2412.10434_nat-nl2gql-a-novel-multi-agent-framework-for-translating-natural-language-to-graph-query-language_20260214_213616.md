---
ver: rpa2
title: 'NAT-NL2GQL: A Novel Multi-Agent Framework for Translating Natural Language
  to Graph Query Language'
arxiv_id: '2412.10434'
source_url: https://arxiv.org/abs/2412.10434
tags:
- schema
- graph
- query
- related
- data
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: 'This paper proposes NAT-NL2GQL, a novel multi-agent framework
  for translating natural language to graph query language (NL2GQL). The framework
  consists of three synergistic agents: a Preprocessor agent for data processing and
  schema extraction, a Generator agent for GQL generation using a fine-tuned LLM,
  and a Refiner agent for refining GQL based on error feedback.'
---

# NAT-NL2GQL: A Novel Multi-Agent Framework for Translating Natural Language to Graph Query Language

## Quick Facts
- **arXiv ID:** 2412.10434
- **Source URL:** https://arxiv.org/abs/2412.10434
- **Reference count:** 40
- **Primary result:** Proposed multi-agent framework achieves 85.44% EM and 86.25% EX on StockGQL dataset

## Executive Summary
NAT-NL2GQL introduces a novel multi-agent framework for translating natural language queries into graph query language (GQL), specifically addressing the nGQL syntax. The framework employs three synergistic agents - Preprocessor, Generator, and Refiner - to systematically process input, generate queries, and refine outputs through error feedback. To overcome the scarcity of high-quality NL2GQL datasets for nGQL syntax, the authors developed StockGQL, a dataset derived from financial market graph databases. Experimental evaluation demonstrates significant performance improvements over baseline approaches, achieving state-of-the-art results on both StockGQL and SpCQL datasets.

## Method Summary
The NAT-NL2GQL framework employs a three-agent architecture where each component serves a distinct function in the NL2GQL translation pipeline. The Preprocessor agent handles data processing and schema extraction from the target graph database, establishing the foundation for accurate query generation. The Generator agent utilizes a fine-tuned large language model to produce initial GQL outputs based on the preprocessed input and extracted schema. The Refiner agent then iteratively improves the generated queries by incorporating error feedback and validation checks. This multi-agent approach addresses the challenge of error accumulation in traditional NL2GQL systems by distributing responsibilities across specialized components and enabling cross-agent refinement.

## Key Results
- Achieved 85.44% exact match (EM) and 86.25% exact set (EX) on StockGQL dataset
- Achieved 59.99% EM and 58.69% EX on SpCQL dataset, outperforming baseline approaches
- Demonstrated effectiveness of multi-agent collaboration in reducing error accumulation compared to single-agent systems

## Why This Works (Mechanism)
The framework's effectiveness stems from its modular agent-based architecture that distributes the complex NL2GQL translation task across specialized components. The Preprocessor establishes a solid foundation by accurately extracting and representing the graph database schema, which guides the Generator's query formulation. The Generator leverages fine-tuned LLMs to produce syntactically correct GQL while the Refiner provides iterative refinement through error feedback mechanisms. This separation of concerns prevents the compounding of errors that typically occurs in monolithic NL2GQL systems, while the feedback loop between agents enables continuous improvement of query accuracy.

## Foundational Learning
- **Graph Query Language (GQL):** Domain-specific language for querying graph databases; needed to understand the target output format and syntax requirements for different graph database systems.
- **Schema Extraction:** Process of identifying and representing database structure; critical for providing the Generator agent with accurate context about the graph database's nodes, relationships, and properties.
- **Error Feedback Mechanisms:** Systems for identifying and correcting query generation errors; essential for the Refiner agent to iteratively improve GQL outputs and reduce error accumulation.
- **Multi-Agent Collaboration:** Distributed problem-solving approach using multiple specialized agents; enables complex tasks like NL2GQL translation to be broken down into manageable subtasks with quality checks between agents.
- **Fine-tuning LLMs:** Process of adapting pre-trained language models for specific tasks; necessary to ensure the Generator agent produces GQL syntax that aligns with nGQL requirements rather than general language patterns.

## Architecture Onboarding
**Component Map:** Preprocessor -> Generator -> Refiner -> (feedback to Generator)
**Critical Path:** Natural Language Input → Preprocessor → Schema Extraction → Generator → Initial GQL → Refiner → Refined GQL → Output
**Design Tradeoffs:** The three-agent architecture trades computational overhead for improved accuracy through error prevention and correction mechanisms, prioritizing output quality over processing speed.
**Failure Signatures:** Poor schema extraction leads to syntactically incorrect queries; inadequate error feedback results in minimal refinement improvements; insufficient fine-tuning produces semantically incorrect GQL outputs.
**First Experiments:**
1. Test individual agent performance on isolated subtasks to establish baseline capabilities
2. Validate schema extraction accuracy against ground truth database structures
3. Evaluate error feedback effectiveness by measuring refinement improvements across multiple iterations

## Open Questions the Paper Calls Out
None

## Limitations
- Framework focuses specifically on nGQL syntax, limiting applicability to other graph query languages without modification
- Performance evaluation relies on domain-specific StockGQL dataset (financial markets), raising questions about generalizability to other domains
- Effectiveness depends heavily on schema extraction quality and error feedback mechanisms, which lack extensive validation across diverse graph database schemas

## Confidence
- **High confidence:** Framework architecture and three-agent design approach
- **Medium confidence:** Performance improvements over baseline approaches
- **Medium confidence:** Generalization potential beyond financial market queries

## Next Checks
1. Test NAT-NL2GQL on graph databases from diverse domains (e.g., social networks, biological networks) to assess domain transferability
2. Conduct ablation studies removing individual agents to quantify their specific contributions to performance gains
3. Evaluate the framework with different graph query languages (Cypher, Gremlin) to verify language-agnostic capabilities