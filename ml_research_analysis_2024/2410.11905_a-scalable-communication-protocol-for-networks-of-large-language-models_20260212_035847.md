---
ver: rpa2
title: A Scalable Communication Protocol for Networks of Large Language Models
arxiv_id: '2410.11905'
source_url: https://arxiv.org/abs/2410.11905
tags:
- protocol
- language
- agents
- communication
- agora
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper introduces Agora, a communication meta-protocol for
  networks of heterogeneous large language models (LLMs). Agora addresses the "Agent
  Communication Trilemma" by combining efficient routines for frequent communications,
  natural language for rare ones, and LLM-written routines for intermediate cases.
---

# A Scalable Communication Protocol for Networks of Large Language Models

## Quick Facts
- arXiv ID: 2410.11905
- Source URL: https://arxiv.org/abs/2410.11905
- Reference count: 40
- Key outcome: Introduces Agora, a meta-protocol enabling efficient, portable, and versatile communication for networks of heterogeneous LLMs by combining routines for frequent communications, natural language for rare ones, and LLM-written routines for intermediate cases.

## Executive Summary
This paper introduces Agora, a communication meta-protocol designed to address the "Agent Communication Trilemma" by enabling networks of heterogeneous large language models to communicate efficiently, portably, and versatilely. Agora achieves this by using pre-written routines for frequent communications, natural language for rare communications, and LLM-written routines for intermediate cases, with protocol documents (PDs) identified by hashes enabling decentralized and portable communication. The system demonstrated significant cost reduction, being approximately five times cheaper than natural language-only communication, and enabled self-organizing protocols in a 100-agent demo without human intervention.

## Method Summary
Agora is implemented as a meta-protocol that combines three communication approaches: standardized routines for frequent communications, natural language for rare communications, and LLM-written routines for everything in between. The protocol uses machine-readable protocol documents (PDs) identified by SHA1 hashes, enabling decentralized storage and discovery. Agents negotiate new protocols using natural language when needed, and LLMs write routine implementations based on PD descriptions. The system uses HTTPS for communication with JSON metadata, and protocol documents are stored in decentralized databases. The 100-agent demo demonstrated the emergence of self-organizing protocols through autonomous negotiation and implementation.

## Key Results
- Agora achieved approximately five times cost reduction compared to natural language-only communication ($7.67 vs $36.23 for 1000 queries)
- Demonstrated emergence of self-organizing protocols in a 100-agent network without human intervention
- Enabled automated workflows through decentralized consensus on appropriate communication protocols
- Showed agents could negotiate, implement, and use protocols autonomously for complex tasks like food delivery

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Agora enables efficient communication by using human-written routines for frequent communications and natural language only for rare communications.
- Mechanism: The protocol uses protocol documents (PDs) identified by hashes to enable agents to recognize when they have a suitable routine. For frequent queries, agents invoke pre-written routines instead of calling the LLM, dramatically reducing computational cost.
- Core assumption: Agents can distinguish between frequent and rare communications and have mechanisms to implement and store routines for frequent patterns.
- Evidence anchors: [abstract] "In Agora, agents typically use standardised routines for frequent communications, natural language for rare communications, and LLM-written routines for everything in between." [section 4.1] "In Agora, the most frequent communications have dedicated efficient routines, and the least frequent ones use inefficient but flexible LLMs and natural language." [corpus] "Average neighbor FMR=0.358" indicates related work exists on efficient agent communication protocols.

### Mechanism 2
- Claim: Agora achieves portability by allowing LLMs to autonomously negotiate and implement protocols without human supervision.
- Mechanism: When agents lack suitable routines, they use natural language to negotiate new protocols. The LLM then writes the routine implementation based on the protocol document, making the protocol self-describing and implementable by any agent with LLM capabilities.
- Core assumption: LLMs have sufficient instruction-following capability to write working code from protocol descriptions.
- Evidence anchors: [abstract] "Agora sidesteps the Agent Communication Trilemma and robustly handles changes in interfaces and members, allowing unprecedented scalability with full decentralisation and minimal involvement of human beings." [section 4.1] "Since PDs fully describe the syntax and semantics of a protocol, human programmers only need to provide an overview of the tools the agent has access to, which means that the implementation effort required on the human side is minimal." [corpus] Related work on "Large language model based multi-agents" suggests LLMs can coordinate without human intervention.

### Mechanism 3
- Claim: Agora achieves versatility by supporting multiple communication formats (routines, structured data, natural language) within a single protocol framework.
- Mechanism: Agents can dynamically choose the most appropriate communication method based on context. They can fall back to natural language when needed, use structured data with LLM-written routines for intermediate cases, and rely on pre-written routines for frequent cases.
- Core assumption: Agents have the capability to switch between communication methods seamlessly and can handle the overhead of method selection.
- Evidence anchors: [abstract] "In Agora, agents typically use standardised routines for frequent communications, natural language for rare communications, and LLM-written routines for everything in between." [section 4.1] "Agora introduces a machine-readable way to transfer and refer to protocols, namely the protocol documents (PDs). A PD is a plain-text description of a communication protocol." [corpus] The survey of "agent interoperability protocols" suggests multiple communication approaches exist and can be unified.

## Foundational Learning

- Concept: Hash-based protocol identification
  - Why needed here: Enables decentralized protocol sharing without central authorities, allowing agents to reference protocols by their content rather than requiring registration.
  - Quick check question: How does using a protocol's hash instead of a central identifier enable decentralized protocol discovery?

- Concept: Protocol documents as self-describing interfaces
  - Why needed here: Allows any agent with LLM capabilities to implement new protocols without human intervention, achieving portability.
  - Quick check question: What information must a protocol document contain to enable autonomous implementation by an LLM?

- Concept: Communication frequency classification
  - Why needed here: Enables the efficiency mechanism by distinguishing between frequent communications (use routines) and rare ones (use natural language).
  - Quick check question: How might an agent determine whether a communication pattern is "frequent" enough to warrant implementing a routine?

## Architecture Onboarding

- Component map: Protocol Document Store -> Communication Layer -> Agent Interface -> Routine Executor -> Protocol Negotiator
- Critical path: 1. Agent receives query 2. Checks if protocol exists for query type 3. If yes, uses routine or LLM-written routine 4. If no, negotiates protocol using natural language 5. LLM writes routine implementation 6. Stores protocol document 7. Executes communication using new routine
- Design tradeoffs: Efficiency vs. flexibility (using routines increases efficiency but reduces ability to handle novel situations), Decentralization vs. consistency (hash-based identification enables decentralization but may lead to protocol fragmentation), Complexity vs. capability (supporting multiple communication methods increases complexity but enables better handling of diverse scenarios)
- Failure signatures: High LLM invocation rates despite expected routine usage (routine implementation failure), Protocol negotiation failures (LLM inability to create coherent protocols), Inconsistent responses to identical queries (protocol interpretation issues), Network congestion from protocol document sharing (scalability issues)
- First 3 experiments: 1. Implement two-agent demo: Alice queries Bob for weather data, starting with natural language and transitioning to PD-based communication 2. Test protocol negotiation: Have agents negotiate a simple data exchange protocol and measure LLM calls before/after 3. Scale to multi-agent: Create network of 5-10 agents with different specializations and test cross-communication using shared protocols

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does Agora's hash-based protocol identification scale when dealing with an extremely large number of protocols, and what are the implications for lookup efficiency and storage requirements?
- Basis in paper: [explicit] The paper describes Agora's use of SHA1 hashes to uniquely identify protocol documents and mentions that this enables decentralized storage options like IPFS.
- Why unresolved: The paper doesn't provide performance metrics or analysis of how hash-based identification performs at scale, particularly in terms of lookup efficiency or storage requirements.
- What evidence would resolve it: Empirical data showing lookup times and storage requirements for Agora with varying numbers of protocols, comparison with alternative identification schemes, and analysis of hash collision probability at scale.

### Open Question 2
- Question: What mechanisms could be implemented to prevent or mitigate the emergence of incompatible protocols in large networks, and how would these mechanisms affect the decentralization of Agora?
- Basis in paper: [explicit] The paper observes the emergence of decentralized consensus on appropriate protocols but doesn't discuss mechanisms to prevent fragmentation or incompatibility.
- Why unresolved: The paper demonstrates emergent protocol adoption but doesn't address the potential for incompatible protocols to develop or how to prevent this.
- What evidence would resolve it: Analysis of protocol adoption patterns in simulated large networks, proposals for governance mechanisms that maintain decentralization while preventing fragmentation, and empirical testing of these mechanisms.

### Open Question 3
- Question: How does the cost-effectiveness of Agora change when considering long-term operational costs, including LLM model updates, protocol maintenance, and infrastructure scaling?
- Basis in paper: [explicit] The paper provides a cost comparison showing Agora is approximately five times cheaper than natural language-only communication for a 1000-query demo.
- Why unresolved: The cost analysis focuses on immediate API costs without considering ongoing operational expenses, model versioning, or infrastructure scaling costs.
- What evidence would resolve it: Total cost of ownership analysis including model updates, protocol maintenance, infrastructure scaling, and long-term performance degradation or improvement trends.

## Limitations

- Lack of detailed implementation specifics for the 100-agent demonstration, including specific tasks, communication patterns, and how protocol emergence was measured
- Reliance on LLM-written routines introduces uncertainty about reliability and security without evaluation of routine quality or potential vulnerabilities
- Protocol assumes all agents have similar LLM capabilities without addressing scenarios where agents have vastly different model strengths or specialized functions

## Confidence

- Mechanism 1 (Efficiency through routine usage): Medium Confidence - Theoretical framework is sound but actual efficiency gains depend on quality of frequency classification and routine implementation
- Mechanism 2 (Portability through autonomous protocol negotiation): Low Confidence - Concept is promising but lacks evidence about reliability of LLM-written routines
- Mechanism 3 (Versatility through multiple communication formats): Medium Confidence - Framework is logically coherent but lacks quantitative analysis of overhead costs

## Next Checks

1. **Routine Reliability Test**: Implement a controlled experiment where multiple agents attempt to write and execute the same protocol routine from identical protocol documents. Measure success rates, execution errors, and consistency across different LLM models to validate the portability claim.

2. **Frequency Classification Validation**: Create a test suite with known communication patterns and measure how accurately agents classify communications as frequent vs rare. Track the false positive and false negative rates to quantify the efficiency mechanism's effectiveness.

3. **Security Audit of LLM-Written Routines**: Conduct a systematic analysis of routines generated by different LLM models for potential security vulnerabilities, including code injection, unauthorized access, or unintended behavior. This addresses the critical gap in assessing the safety of autonomous protocol implementation.