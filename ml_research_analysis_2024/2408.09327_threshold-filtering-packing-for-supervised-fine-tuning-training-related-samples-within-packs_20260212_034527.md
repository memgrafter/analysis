---
ver: rpa2
title: 'Threshold Filtering Packing for Supervised Fine-Tuning: Training Related Samples
  within Packs'
arxiv_id: '2408.09327'
source_url: https://arxiv.org/abs/2408.09327
tags:
- packing
- data
- samples
- packs
- pack
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the problem of inefficient and potentially
  harmful packing strategies during supervised fine-tuning of autoregressive models.
  Random concatenation of data points can lead to cross-contamination of sequences,
  reducing learning efficiency and negatively impacting performance.
---

# Threshold Filtering Packing for Supervised Fine-Tuning: Training Related Samples within Packs

## Quick Facts
- arXiv ID: 2408.09327
- Source URL: https://arxiv.org/abs/2408.09327
- Authors: Jiancheng Dong; Lei Jiang; Wei Jin; Lu Cheng
- Reference count: 23
- Primary result: TFP improves supervised fine-tuning by grouping related samples, achieving up to 7% better performance on GSM8K and 15% better fairness metrics

## Executive Summary
This paper addresses the problem of inefficient and potentially harmful packing strategies during supervised fine-tuning of autoregressive models. Random concatenation of data points can lead to cross-contamination of sequences, reducing learning efficiency and negatively impacting performance. The proposed Threshold Filtering Packing (TFP) method uses a greedy algorithm inspired by the Traveling Salesman Problem to create packs of related yet diverse samples, preventing overly similar samples from being grouped together. Experiments show that TFP significantly improves performance on various benchmarks, including up to 7% on GSM8K, 4% on HumanEval, and 3% on Alpaca. Additionally, TFP demonstrates promising results in improving fairness and reducing bias while boosting prediction accuracy by 15%. The method is simple to implement and integrates seamlessly with existing SFT frameworks.

## Method Summary
Threshold Filtering Packing (TFP) is a method for improving supervised fine-tuning of autoregressive models by creating more effective data packs. The approach uses a greedy algorithm inspired by the Traveling Salesman Problem to order samples based on their semantic similarity, then applies threshold filtering to ensure each pack contains related but diverse samples. The method