---
ver: rpa2
title: Improving Plan Execution Flexibility using Block-Substitution
arxiv_id: '2406.03091'
source_url: https://arxiv.org/abs/2406.03091
tags:
- plan
- block
- planning
- flexibility
- bdpo
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper presents FIBS, an algorithm that improves plan flexibility
  by substituting subplans in block-decomposed partial-order (BDPO) plans. The method
  combines block deordering and block-substitution to remove orderings while maintaining
  plan validity.
---

# Improving Plan Execution Flexibility using Block-Substitution

## Quick Facts
- arXiv ID: 2406.03091
- Source URL: https://arxiv.org/abs/2406.03091
- Reference count: 9
- Primary result: FIBS algorithm improves plan flexibility from 0.24 to 0.31 compared to EOG baseline

## Executive Summary
This paper introduces FIBS (Flexibility Improvement via Block-Substitution), a novel algorithm that enhances plan execution flexibility by substituting subplans within block-decomposed partial-order (BDPO) plans. Unlike traditional deordering and reordering strategies, FIBS replaces subplans with actions outside the original plan to achieve higher flexibility while maintaining validity. The method combines block deordering, block-substitution, and redundant operator elimination to remove orderings without compromising plan correctness. Experiments on 950 IPC benchmark problems demonstrate significant flexibility improvements over existing methods like EOG, MR, and MRR encodings, while also reducing plan costs through operator pruning.

## Method Summary
FIBS operates by first converting sequential plans to partial-order plans using EOG, then grouping coherent actions into blocks via block deordering. The core innovation is block-substitution, where the algorithm identifies subtasks whose goals are the facts produced by blocks and their causal dependencies. A solver finds lower-cost subplans for these subtasks, which are substituted back into the original plan if they satisfy the relative flexibility optimization (RFO) criterion. The method also identifies and removes redundant blocks through backward justification analysis. FIBS can be combined with MaxSAT reorderings (MR and MRR encodings) to further enhance flexibility beyond what either method achieves alone.

## Key Results
- FIBS increases flexibility from 0.24 to 0.31 compared to EOG baseline across 950 benchmark problems
- FIBS outperforms MR (0.3) and MRR (0.37) encodings while providing full coverage versus partial coverage
- Redundant operator elimination reduces plan costs by 3.7% on average while maintaining flexibility in most cases

## Why This Works (Mechanism)

### Mechanism 1
Block-substitution removes orderings by replacing coherent subplans with lower-cost alternatives that preserve causal dependencies. The algorithm constructs subtasks whose goals are the facts that the original block produces and the facts its predecessors provide to its successors. A solver finds a lower-cost subplan for this subtask, which is then substituted into the original plan if it satisfies relative flexibility optimization (RFO).

### Mechanism 2
Redundant blocks can be identified and removed by checking if they are backward justified or if another block can substitute them. A block is backward justified if it produces facts for the goal or for another backward justified block. During block-substitution, if a block becomes redundant (i.e., another block can substitute it without invalidating the plan), it is removed.

### Mechanism 3
Combining FIBS with MaxSAT reorderings further improves plan flexibility beyond what either method achieves alone. FIBS is applied on top of the POPs generated by MR and MRR encodings instead of EOG. This allows FIBS to leverage the high flexibility achieved by MaxSAT reorderings and further improve it through block-substitution.

## Foundational Learning

- Concept: Partial-Order Planning (POP)
  - Why needed here: The entire paper builds on POPs as the representation for flexible plans. Understanding how POPs work and their advantages is crucial for understanding the block-substitution algorithm.
  - Quick check question: What is the main advantage of POPs over sequential plans?

- Concept: Block Deordering
  - Why needed here: Block deordering is used as a preprocessing step in FIBS to remove orderings by grouping coherent actions into blocks. Understanding how block deordering works is essential for understanding how FIBS leverages blocks for substitution.
  - Quick check question: How does block deordering remove orderings from a POP?

- Concept: Causal Links and Threats
  - Why needed here: The block-substitution algorithm relies on establishing causal links and resolving threats to maintain plan validity. Understanding the producer-consumer-threat (PCT) formalism is crucial for understanding how the algorithm ensures plan correctness.
  - Quick check question: What is a threat in the context of POPs, and how is it resolved?

## Architecture Onboarding

- Component map: EOG -> Block Deordering -> FIBS -> Redundant Operator Pruning
- Critical path: EOG → Block Deordering → FIBS → Redundant Operator Pruning
- Design tradeoffs:
  - Flexibility vs. Cost: FIBS prioritizes flexibility, while the pruning method prioritizes cost reduction
  - Coverage vs. Computation Time: MaxSAT reorderings achieve high flexibility but have low coverage and high computation time
  - Block-based vs. Operator-based Substitution: FIBS uses blocks as candidate subplans, which is more efficient than searching for arbitrary subplans
- Failure signatures:
  - Low flexibility improvement: Block-substitution fails to find suitable lower-cost subplans
  - High computation time: MaxSAT reorderings take too long to find solutions
  - Plan invalidity: Block-substitution introduces threats that cannot be resolved
- First 3 experiments:
  1. Apply FIBS to a simple domain (e.g., blocksworld) and compare the flexibility improvement to EOG alone
  2. Measure the cost reduction achieved by the redundant operator pruning method on a set of plans
  3. Compare the flexibility-coverage scores of FIBS, MR, and MRR on a diverse set of domains

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does the performance of FIBS compare to other plan quality optimization methods like those using Petri net unfolding or Graphplan, particularly in domains with conditional effects?
- Basis in paper: The paper mentions that Petri net unfolding and Graphplan are alternative approaches for generating POPs, but does not compare FIBS to these methods.
- Why unresolved: The paper focuses on comparing FIBS to MR, MRR, and EOG encodings, and does not include a comparison to Petri net unfolding or Graphplan methods.
- What evidence would resolve it: Conducting experiments comparing FIBS to Petri net unfolding and Graphplan methods on domains with conditional effects would provide evidence of their relative performance.

### Open Question 2
- Question: Can the concept of block-substitution be extended to handle planning problems with numeric or temporal constraints, and if so, how would it affect the algorithm's performance and flexibility improvements?
- Basis in paper: The paper focuses on classical planning in finite domain representation and does not discuss extending the block-substitution concept to handle numeric or temporal constraints.
- Why unresolved: The paper does not explore the potential extension of block-substitution to handle numeric or temporal constraints, which are common in many real-world planning problems.
- What evidence would resolve it: Implementing and evaluating the block-substitution algorithm on planning problems with numeric or temporal constraints would provide evidence of its effectiveness and impact on performance and flexibility.

### Open Question 3
- Question: How does the choice of the initial planner (e.g., LAMA) affect the performance of FIBS, and would using a different planner lead to significantly different results in terms of plan flexibility and cost reduction?
- Basis in paper: The paper mentions that LAMA is used as the initial planner and suggests analyzing the influence of different planners as a potential extension.
- Why unresolved: The paper does not conduct experiments with different initial planners to assess their impact on FIBS's performance.
- What evidence would resolve it: Conducting experiments using different initial planners (e.g., other forward search-based planners or planners that use different heuristics) and comparing their results with those obtained using LAMA would provide evidence of the impact of the initial planner choice on FIBS's performance.

## Limitations

- The paper does not provide implementation details for the block deordering and block-substitution procedures, making exact reproduction challenging
- The computational overhead of FIBS compared to baseline methods is not thoroughly analyzed
- Claims about FIBS working seamlessly with MaxSAT reorderings are not fully detailed

## Confidence

- High confidence: Plan flexibility improvements over EOG baseline (0.24 to 0.31), as this is directly measured on 950 benchmark problems
- Medium confidence: Cost reduction claims (3.7% average) due to limited discussion of pruning criteria and potential flexibility trade-offs
- Low confidence: Claims about FIBS working seamlessly with MaxSAT reorderings, as the integration mechanism is not detailed

## Next Checks

1. Implement a simplified version of FIBS on a small domain (e.g., blocksworld) to verify the core block-substitution mechanism works as described
2. Test the backward justification method on plans with known redundant operators to validate the pruning approach
3. Measure computation times for FIBS versus EOG baseline on a representative subset of IPC domains to assess practical feasibility