---
ver: rpa2
title: Strategy Game-Playing with Size-Constrained State Abstraction
arxiv_id: '2408.06202'
source_url: https://arxiv.org/abs/2408.06202
tags:
- mcts
- state
- abstraction
- node
- scsa
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the challenge of applying state abstraction
  in Monte Carlo Tree Search (MCTS) for strategy game-playing, where large search
  spaces and combinatorial complexity hinder performance. The key difficulty lies
  in constructing high-quality state abstractions without sufficient data, which can
  lead to poor approximations and degraded agent performance.
---

# Strategy Game-Playing with Size-Constrained State Abstraction

## Quick Facts
- arXiv ID: 2408.06202
- Source URL: https://arxiv.org/abs/2408.06202
- Reference count: 29
- Primary result: SCSA outperforms baseline agents in two of three strategy games while maintaining competitive performance in the third, more complex game

## Executive Summary
This paper introduces Size-Constrained State Abstraction (SCSA), a method for improving Monte Carlo Tree Search (MCTS) performance in strategy games by limiting the maximum number of nodes grouped in each abstract node. The approach addresses the challenge of applying state abstraction in large search spaces where combinatorial complexity hinders performance. By introducing a single hyperparameter, SIZE LIMIT, SCSA eliminates the need for early stopping mechanisms used in previous methods while achieving consistent performance across different games. Empirical results on three strategy games demonstrate that SCSA outperforms all baseline agents in two games and achieves competitive results in the more complex third game.

## Method Summary
SCSA builds upon MCTS with unit ordering (MCTSu) as its base algorithm, which reduces the action space in strategy games by fixing unit move order. The method uses approximate Markov Decision Process (MDP) homomorphism to measure similarity between states when deciding whether to group them in the same abstract node. During MCTS search, SCSA evaluates candidate nodes against existing abstract nodes using approximate MDP homomorphism every B iterations; if errors are below thresholds and the abstract node isn't full, the candidate joins the group, otherwise a new abstract node is created. The key innovation is the SIZE LIMIT parameter that constrains the maximum number of nodes in each abstract group, preventing over-aggregation that can degrade abstraction quality.

## Key Results
- SCSA outperforms all baseline agents (Rule-based, vanilla MCTS, MCTS with unit ordering, RG MCTS u, Elastic MCTS u) in Kill The King and Push Them All games
- In the more complex Two Kingdoms game, SCSA achieves competitive performance against baselines
- SCSA demonstrates improved win rates compared to elastic MCTS variants while achieving lower compression rates
- The same SIZE LIMIT value (2) works consistently across all three games, validating the robustness claim

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Size-Constrained State Abstraction (SCSA) improves performance by limiting the maximum number of nodes grouped in each abstract node.
- Mechanism: By constraining group size with SIZE_LIMIT, SCSA prevents over-aggregation that can occur when many dissimilar states are forced into the same abstract node, which would otherwise degrade the quality of the state abstraction and negatively impact decision-making.
- Core assumption: There exists a trade-off between tree size reduction (achieved through abstraction) and performance, and this trade-off can be controlled by limiting the size of abstract nodes.
- Evidence anchors: [abstract] "This approach introduces a single hyperparameter, SIZE LIMIT, that is less sensitive than previous methods and allows consistent performance across different games."

### Mechanism 2
- Claim: SCSA eliminates the need for early stopping during MCTS search.
- Mechanism: Unlike previous approaches that abandon the state abstraction mid-search to avoid bias from poor-quality abstractions, SCSA maintains a consistent abstraction throughout the search by controlling group size, thus avoiding the need to switch between abstract and ground nodes.
- Core assumption: A controlled abstraction that doesn't require abandonment can maintain better consistency in the search process than methods that switch between abstraction modes.
- Evidence anchors: [section] "In contrast to their approach [19], SCSA does not abandon the state abstraction. Instead, a global size constraint is defined to limit the maximum number of member nodes for every node group."

### Mechanism 3
- Claim: SCSA provides a more robust hyperparameter that works across different games.
- Mechanism: The SIZE_LIMIT parameter is less sensitive to game-specific characteristics than the early-stop threshold used in Elastic MCTS, allowing a single value (e.g., 2) to work well across multiple games without requiring extensive tuning.
- Core assumption: A simpler, more universal hyperparameter is preferable to game-specific parameters that require tuning for each domain.
- Evidence anchors: [abstract] "This approach introduces a single hyperparameter, SIZE LIMIT, that is less sensitive than previous methods and allows consistent performance across different games."

## Foundational Learning

- Concept: Approximate Markov Decision Process (MDP) Homomorphism
  - Why needed here: SCSA uses approximate MDP homomorphism to measure similarity between states when deciding whether to group them in the same abstract node.
  - Quick check question: What two error measures are used in approximate MDP homomorphism to determine if two states can be considered similar?

- Concept: Monte Carlo Tree Search (MCTS) with Unit Ordering
  - Why needed here: SCSA builds upon MCTS with unit ordering (MCTSu) as its base algorithm, which reduces the action space in strategy games by fixing unit move order.
  - Quick check question: How does unit ordering in MCTS help reduce the branching factor in strategy games with multiple units?

- Concept: State Abstraction Trade-offs
  - Why needed here: Understanding the balance between tree size reduction and performance degradation is crucial for tuning SCSA's SIZE_LIMIT parameter.
  - Quick check question: What happens to performance when state abstraction is too aggressive versus too conservative in MCTS?

## Architecture Onboarding

- Component map: MCTS with unit ordering -> State abstraction construction -> Size constraint mechanism -> Approximate MDP homomorphism evaluation
- Critical path: During MCTS search, for every B iterations, SCSA evaluates candidate nodes against existing abstract nodes using approximate MDP homomorphism; if errors are below thresholds and the abstract node isn't full, the candidate joins the group; otherwise, a new abstract node is created.
- Design tradeoffs: SCSA trades some potential compression (compared to unbounded abstraction) for more consistent performance by preventing over-aggregation; it also trades the complexity of early-stopping mechanisms for a simpler size constraint approach.
- Failure signatures: Performance degradation when SIZE_LIMIT is too small (insufficient compression) or too large (poor-quality abstractions); inconsistent results across games if the hyperparameter isn't properly tuned; computational overhead from frequent abstraction updates.
- First 3 experiments:
  1. Run SCSA with SIZE_LIMIT=1, 2, and 3 on Kill The King to observe the trade-off between compression rate and win rate.
  2. Compare SCSA against Elastic MCTS without early stopping to measure the impact of the size constraint on performance and tree size.
  3. Test SCSA with different batch sizes B to find the optimal frequency for abstraction updates during MCTS search.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does SCSA's performance scale to even more complex strategy games with larger state spaces and more diverse unit types?
- Basis in paper: [inferred] The authors note that SCSA shows less strong performance in the more complex Two Kingdoms game compared to simpler games, indicating potential scalability issues.
- Why unresolved: The paper only tests SCSA on three relatively simple strategy games. More complex games with larger state spaces and more diverse units could present different challenges that haven't been explored.
- What evidence would resolve it: Testing SCSA on a wider range of strategy games of varying complexity, including modern commercial games with hundreds of unit types and complex resource management systems.

### Open Question 2
- Question: What is the optimal value for SIZE LIMIT across different types of strategy games, and how does it vary with game complexity?
- Basis in paper: [explicit] The authors observe that different games have different optimal SIZE LIMIT values (2-4), and larger values can degrade performance.
- Why unresolved: The experiments only tested SIZE LIMIT values from 2-5. The relationship between game complexity, branching factor, and optimal SIZE LIMIT remains unexplored.
- What evidence would resolve it: Systematic testing of SIZE LIMIT across games with varying complexity levels and branching factors to identify patterns and optimal ranges.

### Open Question 3
- Question: Can combining SCSA with other MCTS enhancements (like pruning or parallelization) further improve performance while maintaining scalability?
- Basis in paper: [inferred] The authors mention scalability as a limitation and suggest combining state abstraction with pruning as a possible solution.
- Why unresolved: The paper only evaluates SCSA in isolation. The interaction between state abstraction and other MCTS optimizations hasn't been explored.
- What evidence would resolve it: Experiments combining SCSA with various MCTS enhancements (pruning, parallelization, heuristic improvements) to measure performance gains and scalability impacts.

## Limitations

- Empirical evaluation covers only three relatively simple strategy games, limiting generalizability to more complex domains
- The relationship between compression rate and performance is observed but not thoroughly characterized across different game types
- Scalability claims to more complex domains are speculative without empirical validation on games with larger state spaces

## Confidence

**High Confidence**: The core mechanism of size-constrained state abstraction and its implementation details are well-specified. The experimental methodology (50 initial positions, 2 evaluations each, 5 random seeds) follows standard practices for MCTS evaluation.

**Medium Confidence**: The claim that SIZE_LIMIT=2 works consistently across different games is supported by results but lacks parameter sensitivity analysis. The trade-off between compression rate and performance is observed but not thoroughly characterized across different game types.

**Low Confidence**: The scalability claims to more complex domains are speculative without empirical validation on games with larger state spaces or longer time horizons. The relationship between compression rate and computational efficiency is not explicitly quantified.

## Next Checks

1. **Parameter Sensitivity Analysis**: Systematically test SCSA with SIZE_LIMIT values ranging from 1 to 5 on all three games to quantify the trade-off between abstraction quality, tree size reduction, and win rate. This would validate the robustness claims and identify optimal parameter ranges for different game types.

2. **Scalability Benchmark**: Evaluate SCSA on a more complex strategy game with larger state space and longer time horizons (e.g., a turn-based strategy game with 8+ units per side) to assess whether the size-constrained approach maintains performance advantages as complexity increases.

3. **Compression-Performance Correlation**: Conduct experiments measuring both tree size reduction (compression rate) and computational efficiency (nodes evaluated per second) across different abstraction strategies, establishing whether lower compression rates actually translate to performance benefits or if they represent an unnecessary constraint.