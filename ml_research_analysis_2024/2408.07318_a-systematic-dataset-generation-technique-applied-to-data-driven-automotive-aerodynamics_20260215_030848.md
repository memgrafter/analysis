---
ver: rpa2
title: A systematic dataset generation technique applied to data-driven automotive
  aerodynamics
arxiv_id: '2408.07318'
source_url: https://arxiv.org/abs/2408.07318
tags:
- figure
- drag
- geometry
- which
- dataset
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This work introduces a systematic geometry dataset generation method
  for automotive drag prediction using neural networks. The approach converts CAD
  geometries to binary voxel representations via ray-tracing, then interpolates between
  designs using signed distance functions in barycentric space.
---

# A systematic dataset generation technique applied to data-driven automotive aerodynamics

## Quick Facts
- arXiv ID: 2408.07318
- Source URL: https://arxiv.org/abs/2408.07318
- Reference count: 28
- Primary result: CNN-based drag prediction achieves 95th percentile error of 24 drag counts

## Executive Summary
This paper introduces a systematic geometry dataset generation method for automotive drag prediction using neural networks. The approach converts CAD geometries to binary voxel representations via ray-tracing, then interpolates between designs using signed distance functions in barycentric space. This generates a controlled, high-density dataset from a small set of starting geometries. Large-eddy simulations provide ground truth data for 1275 DrivAer geometries. Convolutional neural networks achieve excellent drag coefficient prediction and accurately predict surface pressure fields, enabling controlled extrapolation beyond training bounds.

## Method Summary
The method generates automotive geometries by first converting STL CAD files to binary voxel representations through ray-tracing along three principal axes. Signed distance functions are computed for each voxel grid, enabling smooth interpolation between three base geometries (notchback, fastback, estateback) using barycentric coordinates. This produces 1275 unique DrivAer geometries within the convex hull of the basis shapes. Large-eddy simulations provide drag coefficients and surface pressure fields for each geometry. Three CNN models are trained on three planar projections (back, side, top views) to predict scalar drag coefficients, vector surface pressure fields, and tensor outputs.

## Key Results
- CNN achieves 95th percentile drag prediction error of 24 drag counts on test set
- Method enables accurate extrapolation beyond training bounds
- Superior performance compared to uniform sampling and Gaussian process regression approaches
- Accurate reconstruction of surface pressure fields using U-Net architecture

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Controlled barycentric interpolation between starting geometries generates high-density, realistic automotive shapes with controlled feature transitions
- Mechanism: The signed distance function (SDF) representation allows continuous interpolation between geometries. By constructing the convex hull of SDFs in barycentric space, new geometries are generated as convex combinations of the basis shapes, ensuring smooth morphological transitions while preserving topological features
- Core assumption: The SDFs of the basis geometries have sufficient overlap in their zero-level sets to produce valid intermediate geometries
- Evidence anchors:
  - [abstract]: "converts CAD geometries to binary voxel representations via ray-tracing, then interpolates between designs using signed distance functions in barycentric space"
  - [section]: "The interpolated SDF ϕi,j,k(d) is computed as a weighted sum of the individual SDFs: ϕi,j,k(d) = Σ wiϕi i,j,k(d)"
  - [corpus]: "weak - corpus focuses on ML models for automotive aerodynamics but doesn't address geometry generation methods"
- Break condition: If basis geometries have disjoint SDFs with no overlapping zero-level sets, the interpolation may produce invalid or non-physical geometries

### Mechanism 2
- Claim: Ray-tracing conversion from STL to binary voxel representation enables systematic geometry manipulation while maintaining CFD compatibility
- Mechanism: The ray-tracing algorithm creates a structured binary grid representation of the geometry by casting rays along principal axes and recording intersections with the STL mesh. This structured format enables easy interpolation while the original STL can be reconstructed for CFD meshing
- Core assumption: The ray-tracing resolution is sufficient to capture all relevant geometric features without introducing significant discretization artifacts
- Evidence anchors:
  - [abstract]: "converts CAD geometries to binary voxel representations via ray-tracing"
  - [section]: "The intersection grids from ray-tracing along all three principal axes are combined to yield a final binary grid B ∈ {0, 1}Nx×Ny×Nz"
  - [corpus]: "weak - corpus neighbors discuss ML applications but don't address geometry representation conversion"
- Break condition: Insufficient ray-tracing resolution leads to stair-stepped artifacts that degrade CFD solution accuracy or prevent proper geometry reconstruction

### Mechanism 3
- Claim: Convolutional neural networks trained on multi-view projections achieve excellent drag coefficient prediction with controlled generalization bounds
- Mechanism: The three planar projections (back, side, top views) provide structured image data that CNNs can process efficiently. The barycentric sampling ensures uniform coverage of the feature space, enabling the network to learn smooth mappings from geometry to aerodynamic quantities
- Core assumption: The three views capture all relevant geometric features that influence drag coefficient, and the CNNs can learn the non-linear relationship between these projections and aerodynamic performance
- Evidence anchors:
  - [abstract]: "Convolutional neural networks achieve excellent drag coefficient prediction (95th percentile error: 24 drag counts)"
  - [section]: "The three networks downsample the input of dimension 384 × 384 × 3 down to a bottleneck of 24 × 24 × 256"
  - [corpus]: "weak - corpus neighbors discuss ML for automotive aerodynamics but don't address the specific CNN architecture or projection method"
- Break condition: If important geometric features affecting drag are not captured in the three views, or if the relationship between views and drag is too complex for the CNN architecture, prediction accuracy will degrade

## Foundational Learning

- Concept: Signed Distance Functions (SDFs)
  - Why needed here: SDFs provide a continuous representation of geometry that enables smooth interpolation between shapes while preserving topological features
  - Quick check question: What property of SDFs ensures that interpolated geometries won't introduce new topological features not present in the basis shapes?

- Concept: Barycentric interpolation and convex combinations
  - Why needed here: Barycentric coordinates provide a systematic way to interpolate between multiple geometries in a high-dimensional feature space while ensuring the results stay within the convex hull of the basis shapes
  - Quick check question: How does the constraint that barycentric weights sum to 1 and are non-negative ensure the interpolated geometry stays within the convex hull?

- Concept: Convolutional neural network architecture for image-based geometry representation
  - Why needed here: CNNs can learn complex non-linear mappings from image representations of geometry to aerodynamic quantities, leveraging their ability to detect local features and spatial hierarchies
  - Quick check question: Why are three planar projections (back, side, top) chosen as the input representation rather than a single 3D voxel grid or point cloud?

## Architecture Onboarding

- Component map: Ray-tracing module → Binary voxel conversion → SDF interpolation → Geometry reconstruction → CFD simulation → CNN training
- Critical path: Geometry generation (ray-tracing → SDF interpolation → reconstruction) → CFD simulation → CNN training → Prediction
- Design tradeoffs: Ray-tracing resolution vs. computational cost, number of basis geometries vs. interpolation flexibility, CNN architecture complexity vs. training data requirements
- Failure signatures: Poor CFD mesh quality from geometry reconstruction artifacts, CNN overfitting due to insufficient training data diversity, interpolation producing non-physical geometries
- First 3 experiments:
  1. Test ray-tracing and reconstruction pipeline with a simple geometry to verify binary voxel conversion and STL reconstruction works correctly
  2. Perform SDF interpolation between two simple geometries to verify smooth morphological transitions and valid geometry generation
  3. Train a CNN on a small dataset of synthetic geometries with known drag relationships to verify the prediction pipeline works before scaling to complex automotive geometries

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does the accuracy of the proposed CNN-based drag prediction compare to other machine learning models (e.g., Gaussian Process Regression, Random Forests) when trained on the same systematic dataset?
- Basis in paper: [explicit] The paper compares the CNN performance to Gaussian Process Regression (GPR) and shows superior results, but does not explore other potential models.
- Why unresolved: The paper only compares to GPR, leaving open the question of how the CNN would fare against other established machine learning approaches.
- What evidence would resolve it: A systematic comparison of the CNN with other ML models (e.g., Random Forests, Support Vector Machines, Gradient Boosting) on the same dataset, reporting performance metrics such as R-squared, mean absolute error, and prediction intervals.

### Open Question 2
- Question: What is the minimum number of basis geometries required to achieve acceptable drag prediction accuracy, and how does this scale with the dimensionality of the design space?
- Basis in paper: [inferred] The paper uses three basis geometries (notchback, fastback, estateback) and demonstrates good results, but does not explore the impact of using fewer or more basis geometries.
- Why unresolved: The choice of three basis geometries seems arbitrary, and it's unclear how the accuracy would change with different numbers of basis geometries or in higher-dimensional design spaces.
- What evidence would resolve it: A systematic study varying the number of basis geometries and measuring the resulting drag prediction accuracy, potentially using techniques like cross-validation or bootstrapping to assess the stability of the results.

### Open Question 3
- Question: How robust is the proposed method to noise or errors in the ray-tracing reconstruction of the geometries, and what are the practical limits of this robustness?
- Basis in paper: [explicit] The paper acknowledges the presence of "faint, spurious, low-amplitude rippling" in the reconstructed geometries due to finite ray-tracing resolution.
- Why unresolved: While the paper mentions these artifacts, it does not quantify their impact on the drag predictions or explore the limits of the method's robustness to such errors.
- What evidence would resolve it: A sensitivity analysis introducing controlled noise or errors into the reconstructed geometries and measuring the resulting impact on drag predictions, potentially using techniques like Monte Carlo simulation or uncertainty quantification.

## Limitations

- Ray-tracing resolution and SDF interpolation quality may introduce artifacts that affect CFD accuracy
- Three planar projections may not capture all drag-relevant geometric features, particularly complex underbody or wake structures
- The method's performance on geometries far outside the convex hull of basis shapes requires further validation

## Confidence

**High Confidence**: The CFD methodology using wall-modeled LES with the specified mesh resolution and solver settings is well-established in automotive aerodynamics literature. The CNN architecture for drag coefficient regression follows standard practices for image-based learning tasks.

**Medium Confidence**: The barycentric interpolation method generates valid automotive geometries as claimed. The approach produces smooth morphological transitions between basis shapes, though the exact distribution of generated geometries within the convex hull requires verification.

**Low Confidence**: The claim that three planar projections capture all relevant geometric features affecting drag lacks empirical validation. The extrapolation capability beyond training bounds needs systematic testing with geometries far from the training distribution.

## Next Checks

1. **Geometry Reconstruction Quality**: Generate a random subset of interpolated geometries and perform detailed visual and quantitative comparison between original STL files and ray-traced reconstructions. Measure geometric deviation using Hausdorff distance metrics to establish quality thresholds for CFD compatibility.

2. **Projection Coverage Analysis**: Systematically test whether three planar projections adequately represent complex geometric features by comparing CNN predictions using different view combinations (single views, four views including front, full 3D voxel input) on a validation set of simple geometries with known drag relationships.

3. **Extrapolation Robustness**: Generate geometries outside the convex hull of basis shapes (using negative barycentric weights) and evaluate CNN predictions against CFD results to quantify performance degradation and establish reliable extrapolation bounds for industrial applications.