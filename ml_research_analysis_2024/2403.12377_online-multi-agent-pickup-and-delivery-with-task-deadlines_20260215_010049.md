---
ver: rpa2
title: Online Multi-Agent Pickup and Delivery with Task Deadlines
arxiv_id: '2403.12377'
source_url: https://arxiv.org/abs/2403.12377
tags:
- task
- tasks
- deadlines
- pickup
- delivery
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This study introduces the online multi-agent pickup and delivery
  problem with task deadlines (MAPD-D), which extends traditional MAPD by incorporating
  task deadlines and online task arrival. The proposed deadline-aware token passing
  (D-TP) algorithm addresses this by calculating pickup deadlines and balancing execution
  cost against deadline proximity during task assignment.
---

# Online Multi-Agent Pickup and Delivery with Task Deadlines

## Quick Facts
- arXiv ID: 2403.12377
- Source URL: https://arxiv.org/abs/2403.12377
- Authors: Hiroya Makino; Seigo Ito
- Reference count: 21
- This study introduces MAPD-D and proposes D-TP and D-TPTS algorithms that significantly reduce task tardiness in simulated warehouse environments.

## Executive Summary
This paper introduces the online multi-agent pickup and delivery problem with task deadlines (MAPD-D), extending traditional MAPD by incorporating task deadlines and online task arrival. The authors propose two algorithms: D-TP, which calculates pickup deadlines using reversed-path search and assigns tasks based on a weighted combination of urgency and execution cost, and D-TPTS, which adds task-swapping strategies among agents and within individual agents. Both algorithms demonstrate significant reductions in task tardiness compared to existing methods in simulated warehouse environments with 15 agents and 151 tasks.

## Method Summary
The paper addresses MAPD-D by first computing pickup deadlines for each task using reversed-path planning from delivery location to pickup location, assuming the delivery deadline as the departure time. Tasks are then assigned to agents based on a weighted sum of urgency (deadline proximity) and execution cost, controlled by parameter α. D-TPTS extends this by allowing task swapping among agents (when another agent can execute a task faster) and task switching within agents (abandoning current tasks for more urgent ones). Both algorithms operate within the token passing framework, maintaining shared state of agent paths and task assignments while ensuring collision-free execution.

## Key Results
- D-TP and D-TPTS significantly reduce cumulative task tardiness compared to traditional token passing methods
- D-TPTS achieves the lowest tardiness in most scenarios through its enhanced task-swapping strategies
- The algorithms effectively balance execution cost against deadline proximity to optimize overall performance
- Results are demonstrated across 30 experiments in simulated warehouse environments

## Why This Works (Mechanism)

### Mechanism 1
- Claim: D-TP improves on traditional TP by incorporating pickup deadlines calculated from reversed-path search, balancing execution cost with deadline proximity.
- Mechanism: For each newly added task, a dummy agent performs reversed-path planning from the delivery location back to the pickup location, assuming the delivery deadline as the departure time. This yields the latest feasible pickup time, which is used as the pickup deadline. Tasks are then assigned to agents based on a weighted sum of urgency (pickup deadline proximity) and execution cost, with parameter α controlling the trade-off.
- Core assumption: The reversed-path search accurately captures the latest feasible pickup time that still permits on-time delivery under current path constraints.
- Evidence anchors:
  - [abstract] "The D-TP algorithm calculates pickup deadlines and assigns tasks while balancing execution cost and deadline proximity."
  - [section] "The pickup deadline dp_j represents the time obtained by subtracting the length (timesteps) of the dummy path from the delivery deadline dd_j."

### Mechanism 2
- Claim: Task swapping among agents reduces tardiness by allowing reallocation of unassigned or pending tasks to the agent that can execute them faster.
- Mechanism: During token passing, agents are allowed to claim tasks assigned to other agents that have not yet been picked up if they can reach the pickup location sooner. The selection is based on the same weighted urgency-cost function as primary assignment.
- Core assumption: Swapping tasks mid-execution does not cause significant overhead or conflicts that outweigh the benefit of reduced tardiness.
- Evidence anchors:
  - [abstract] "D-TPTS enhances flexibility and efficiency by employing task-swapping strategies among agents and within a single agent."
  - [section] "In contrast to TPTS, which focuses solely on execution cost considerations, the proposed method modifies this approach to incorporate a weighted sum of the execution cost and temporal margin for deadlines."

### Mechanism 3
- Claim: Task switching within a single agent allows abandoning a current task in favor of a more urgent one, reducing overall tardiness.
- Mechanism: While en route to a pickup location, if a new task arrives with an earlier pickup deadline and a lower execution cost to reach its pickup, the agent abandons the current task and starts the new one. This is conditioned on both earlier deadline and lower execution cost.
- Core assumption: The agent can abandon the current task without causing deadlock or violating other agents' plans.
- Evidence anchors:
  - [section] "An agent will abandon its current task if both of the following conditions are met: The urgency of the new task is higher than that of the current task. The execution cost of the new task is lower than that of the current task."
  - [section] "Task switching facilitates task reassignment when more urgent tasks are added."

## Foundational Learning

- Concept: Token Passing (TP) in MAPD
  - Why needed here: D-TP and D-TPTS build directly on the TP algorithm, modifying task assignment logic but keeping the overall framework of sequential agent access and path reservation.
  - Quick check question: In TP, how are tasks assigned to agents, and what data structure holds the shared state?

- Concept: Multi-agent Path Finding (MAPF) and collision constraints
  - Why needed here: MAPD-D inherits collision avoidance rules (vertex and swapping conflicts) from MAPF; understanding these is essential to grasp why paths must be reserved and why deadline-aware assignment is non-trivial.
  - Quick check question: What are the two types of collisions defined in MAPD-D, and how do they differ?

- Concept: Reversed-path planning for deadline calculation
  - Why needed here: The novel pickup deadline calculation in D-TP relies on reversed-path planning from delivery to pickup under deadline constraints; this is a core algorithmic innovation.
  - Quick check question: How does reversed-path planning from delivery to pickup under a delivery deadline yield a pickup deadline?

## Architecture Onboarding

- Component map: Task arrival -> Deadline calculator -> Task assigner -> Token (shared state) -> Path planner -> Execution

- Critical path:
  1. Receive new tasks
  2. Compute pickup deadlines
  3. Sequentially request token and assign tasks (possibly swapping)
  4. Update paths in token
  5. Execute paths

- Design tradeoffs:
  - Weight α balances urgency vs. cost; too high risks high execution cost, too low risks missed deadlines
  - Allowing swaps increases flexibility but may destabilize schedules
  - Reversed-path search adds computation but improves deadline accuracy

- Failure signatures:
  - High cumulative tardiness despite low α: deadline urgency not being prioritized enough
  - Increased tardiness when task switching is enabled: cost of abandoning tasks outweighs benefit
  - Token deadlock: simultaneous conflicting path reservations due to aggressive swapping

- First 3 experiments:
  1. Run D-TP with α = 0 (equivalent to TP) and measure tardiness baseline
  2. Vary α from 0 to 1 in D-TP and observe the trade-off curve between tardiness and execution cost
  3. Enable task swapping in D-TPTS and measure additional reduction in tardiness; also test with task switching enabled to identify when it helps vs. hurts

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How can decentralized algorithms be developed to solve MAPD-D in larger environments beyond the 35x21 grid?
- Basis in paper: [explicit] The paper mentions computational constraints limiting their ability to solve MAPD-D in larger environments and suggests exploring decentralized algorithms as future work.
- Why unresolved: Current methods are likely centralized and computationally intensive, making them impractical for larger-scale problems.
- What evidence would resolve it: A working decentralized algorithm that can handle MAPD-D in environments significantly larger than 35x21 grid, demonstrating scalability and maintaining or improving performance.

### Open Question 2
- How can MAPD-D algorithms be adapted to handle uncertain obstacles that may block paths during execution?
- Basis in paper: [explicit] The authors mention handling more realistic scenarios such as paths being obstructed by uncertain obstacles as future work.
- Why unresolved: The current algorithms assume static environments without obstacles that appear dynamically during task execution.
- What evidence would resolve it: An algorithm that can successfully handle dynamic obstacles in MAPD-D, showing robustness to environmental changes while maintaining task deadlines.

### Open Question 3
- What is the optimal balance between execution cost and deadline proximity across different task release frequencies and deadline durations?
- Basis in paper: [explicit] The paper discusses varying the weight α to balance execution cost and deadline proximity, but notes that the optimal value depends on the specific scenario.
- Why unresolved: The paper shows that optimal α varies with task release frequency and deadline duration, but doesn't provide a universal method for determining it.
- What evidence would resolve it: A method or model that can predict the optimal α value based on task release patterns and deadline distributions without requiring extensive experimentation.

## Limitations

- The reversed-path deadline calculation assumes static environments, which may become infeasible if dynamic obstacles appear between calculation and execution
- Task swapping mechanisms lack detailed analysis of computational overhead and potential schedule instability
- The specific implementation details for critical components like the prioritized path planning algorithm and the exact α parameter value are missing

## Confidence

- High confidence: The core mechanism of deadline-aware task assignment through reversed-path planning is well-founded and theoretically sound. The improvement over baseline TP methods in tardiness reduction is clearly demonstrated.
- Medium confidence: The task swapping mechanisms (both inter-agent and intra-agent) are supported by experimental results but lack detailed analysis of their overhead and stability implications.
- Low confidence: The specific implementation details for critical components like the prioritized path planning algorithm and the exact α parameter value are missing, preventing exact reproduction.

## Next Checks

1. **Sensitivity analysis**: Systematically vary α from 0 to 1 and measure the trade-off curve between cumulative tardiness and total execution cost to identify optimal parameter settings.

2. **Dynamic environment stress test**: Introduce random dynamic obstacles during execution to test whether the reversed-path deadline calculation remains valid under environmental changes.

3. **Scalability evaluation**: Scale the problem to 50+ agents and 500+ tasks to assess how D-TPTS performance scales with problem size and whether the task swapping mechanism remains beneficial at larger scales.